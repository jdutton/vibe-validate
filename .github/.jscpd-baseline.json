{
  "duplicates": [
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "function extractFailures(output: string): TestFailureInfo[] {\n  const failures: TestFailureInfo[] = [];\n  const lines = output.split('\\n');\n\n  let i = 0;\n  while (i < lines.length) {\n    const line = lines[i];\n\n    // Look for numbered failure markers (e.g., \"1) Test name\")",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.ts",
        "start": 31,
        "end": 39,
        "startLoc": {
          "line": 31,
          "column": 1,
          "position": 91
        },
        "endLoc": {
          "line": 39,
          "column": 60,
          "position": 180
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.ts",
        "start": 30,
        "end": 38,
        "startLoc": {
          "line": 30,
          "column": 1,
          "position": 85
        },
        "endLoc": {
          "line": 38,
          "column": 53,
          "position": 174
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "], 10) : 0;\n\n  // Extract all failures\n  const failures = extractFailures(output);\n\n  // Early return if no failures detected (but failure count suggested there should be)\n  if (failureCount === 0 && failures.length === 0) {\n    return processTestFailures([], 95);\n  }\n\n  // Process failures using shared utility\n  return processTestFailures(failures, 95);\n}\n\n/**\n * Detect if output is from Jasmine test framework\n *\n * @param output - Command output to analyze\n * @returns Detection result with confidence and patterns\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.ts",
        "start": 172,
        "end": 191,
        "startLoc": {
          "line": 172,
          "column": 2,
          "position": 1099
        },
        "endLoc": {
          "line": 191,
          "column": 4,
          "position": 1189
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.ts",
        "start": 174,
        "end": 193,
        "startLoc": {
          "line": 174,
          "column": 2,
          "position": 1099
        },
        "endLoc": {
          "line": 193,
          "column": 4,
          "position": 1189
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ",\n          confidence: detection.confidence,\n          patterns: detection.patterns,\n          reason: detection.reason,\n        },\n        confidence: 100,\n        completeness: 100,\n        issues: [],\n      },\n    };\n  }\n\n  const errors: FormattedError[] = [];\n  let completeCount = 0;\n\n  for (const failure of failures) {\n    const file = failure.file ?? 'unknown'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 175,
        "end": 191,
        "startLoc": {
          "line": 175,
          "column": 6,
          "position": 1083
        },
        "endLoc": {
          "line": 191,
          "column": 10,
          "position": 1206
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/tap/index.ts",
        "start": 167,
        "end": 183,
        "startLoc": {
          "line": 167,
          "column": 6,
          "position": 1020
        },
        "endLoc": {
          "line": 183,
          "column": 10,
          "position": 1143
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ",\n      confidence: detection.confidence,\n      patterns: detection.patterns,\n      reason: detection.reason,\n    },\n    confidence,\n    completeness,\n    issues: [],\n  };\n\n  return {\n    summary,\n    errors,\n    totalErrors: failures.length,\n    errorSummary: formatCleanOutput(errors),\n    guidance,\n    metadata,\n  };\n}\n\n/**\n * Extract all failures from Ava output\n * Strategy: Find detailed headers (test names with ›), then parse each block\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 222,
        "end": 245,
        "startLoc": {
          "line": 222,
          "column": 6,
          "position": 1479
        },
        "endLoc": {
          "line": 245,
          "column": 4,
          "position": 1580
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/tap/index.ts",
        "start": 213,
        "end": 235,
        "startLoc": {
          "line": 213,
          "column": 6,
          "position": 1394
        },
        "endLoc": {
          "line": 235,
          "column": 4,
          "position": 1495
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "import { existsSync } from 'node:fs';\nimport { mkdir, writeFile, readFile, rm } from 'node:fs/promises';\nimport { join } from 'node:path';\n\nimport { normalizedTmpdir } from '@vibe-validate/utils';\nimport { describe, it, expect, beforeEach, afterEach } from 'vitest';\n\nimport { HooksSetupCheck",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/setup-checks/hooks-check.test.ts",
        "start": 7,
        "end": 14,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 14,
          "column": 16,
          "position": 95
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/setup-checks/workflow-check.test.ts",
        "start": 7,
        "end": 14,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 14,
          "column": 19,
          "position": 95
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ".fix({ cwd: testDir });\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('already');\n      expect(result.filesChanged).toHaveLength(0);\n\n      // Content should be unchanged\n      const content = await readFile(preCommitPath",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/setup-checks/hooks-check.test.ts",
        "start": 252,
        "end": 259,
        "startLoc": {
          "line": 252,
          "column": 11,
          "position": 2523
        },
        "endLoc": {
          "line": 259,
          "column": 14,
          "position": 2595
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/setup-checks/workflow-check.test.ts",
        "start": 170,
        "end": 177,
        "startLoc": {
          "line": 170,
          "column": 14,
          "position": 1711
        },
        "endLoc": {
          "line": 177,
          "column": 13,
          "position": 1783
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ".fix({ cwd: testDir, dryRun: true });\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('dry-run');\n      expect(result.filesChanged).toHaveLength(0);\n\n      // File should not be created\n      expect(existsSync(preCommitPath",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/setup-checks/hooks-check.test.ts",
        "start": 278,
        "end": 285,
        "startLoc": {
          "line": 278,
          "column": 11,
          "position": 2805
        },
        "endLoc": {
          "line": 285,
          "column": 14,
          "position": 2877
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/setup-checks/workflow-check.test.ts",
        "start": 201,
        "end": 208,
        "startLoc": {
          "line": 201,
          "column": 14,
          "position": 2051
        },
        "endLoc": {
          "line": 208,
          "column": 13,
          "position": 2123
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", async () => {\n      const { safeExecSync } = await import('@vibe-validate/utils');\n      const ghResponse = {\n        number: 42,\n        title: 'test',\n        url: 'https://github.com/user/repo/pull/42',\n        headRefName: 'test',\n        statusCheckRollup: [\n          {\n            name: 'Check 1',\n            status: 'COMPLETED',\n            conclusion: 'SUCCESS',\n            detailsUrl: 'https://github.com/user/repo/actions/runs/1',\n          },\n          {\n            name: 'Check 2',\n            status: 'COMPLETED',\n            conclusion: 'FAILURE'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 205,
        "end": 222,
        "startLoc": {
          "line": 205,
          "column": 66,
          "position": 1674
        },
        "endLoc": {
          "line": 222,
          "column": 10,
          "position": 1803
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 174,
        "end": 191,
        "startLoc": {
          "line": 174,
          "column": 68,
          "position": 1446
        },
        "endLoc": {
          "line": 191,
          "column": 10,
          "position": 1575
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n            detailsUrl: 'https://github.com/user/repo/actions/runs/2',\n          },\n        ],\n      };\n\n      vi.mocked(safeExecSync).mockReturnValue(JSON.stringify(ghResponse));\n\n      const result = await provider.fetchCheckStatus(42);\n\n      expect(result.status).toBe('completed');\n      expect(result.result).toBe('failure'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 222,
        "end": 233,
        "startLoc": {
          "line": 222,
          "column": 10,
          "position": 1804
        },
        "endLoc": {
          "line": 233,
          "column": 10,
          "position": 1888
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 191,
        "end": 202,
        "startLoc": {
          "line": 191,
          "column": 10,
          "position": 1576
        },
        "endLoc": {
          "line": 202,
          "column": 10,
          "position": 1660
        }
      }
    },
    {
      "format": "typescript",
      "lines": 62,
      "fragment": ", () => {\n  let calc: Calculator;\n\n  beforeEach(() => {\n    calc = new Calculator();\n  });\n\n  describe('Addition', () => {\n    it('should add two small numbers correctly', () => {\n      // INTENTIONAL FAILURE: Calculator.add() has a bug when sum > 10\n      const result = calc.add(6, 7);\n      expect(result).toBe(13); // Expected: 13, Actual: 14 (bug)\n    });\n\n    it('should handle negative numbers', () => {\n      const result = calc.add(-5, 3);\n      expect(result).toBe(-2);\n    });\n  });\n\n  describe('Division', () => {\n    it('should divide numbers correctly', () => {\n      const result = calc.divide(10, 2);\n      expect(result).toBe(5);\n    });\n\n    it('should throw error when dividing by zero', () => {\n      // INTENTIONAL FAILURE: Calculator.divide() doesn't handle division by zero\n      expect(() => calc.divide(10, 0)).toThrow('Division by zero');\n      // This will fail because divide() doesn't throw an error\n    });\n  });\n\n  describe('Multiplication', () => {\n    it('should multiply numbers', () => {\n      // INTENTIONAL FAILURE: Wrong expected value\n      const result = calc.multiply(4, 5);\n      expect(result).toBe(25); // Expected: 25, Actual: 20\n    });\n  });\n\n  describe('Type Errors', () => {\n    it('should return version as string', () => {\n      const version = calc.getVersion();\n      // INTENTIONAL FAILURE: getVersion() returns number, not string\n      expect(typeof version).toBe('string');\n    });\n  });\n\n  describe('Runtime Errors', () => {\n    it('should read config file', async () => {\n      // INTENTIONAL FAILURE: File does not exist (ENOENT)\n      const fs = await import('node:fs/promises');\n      const config = await fs.readFile('/this/file/does/not/exist.json', 'utf8');\n      expect(config).toBeDefined();\n    });\n  });\n\n  describe('Timeout', () => {\n    it('should complete within timeout', async () => {\n      // INTENTIONAL FAILURE: Timeout\n      jest",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/calculator.test.ts",
        "start": 10,
        "end": 71,
        "startLoc": {
          "line": 10,
          "column": 20,
          "position": 20
        },
        "endLoc": {
          "line": 71,
          "column": 5,
          "position": 567
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/calculator.test.ts",
        "start": 12,
        "end": 73,
        "startLoc": {
          "line": 12,
          "column": 22,
          "position": 43
        },
        "endLoc": {
          "line": 73,
          "column": 6,
          "position": 590
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "});\n\n  describe('Snapshot Mismatch', () => {\n    it('should match snapshot', () => {\n      // INTENTIONAL FAILURE: Snapshot will not match\n      const result = {\n        status: 'failed',\n        timestamp: Date.now(),\n        errors: ['Something went wrong'],\n      };\n      expect(result).toMatchSnapshot();\n    });\n  });\n});",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/calculator.test.ts",
        "start": 74,
        "end": 87,
        "startLoc": {
          "line": 74,
          "column": 3,
          "position": 606
        },
        "endLoc": {
          "line": 87,
          "column": 2,
          "position": 703
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/calculator.test.ts",
        "start": 76,
        "end": 89,
        "startLoc": {
          "line": 76,
          "column": 3,
          "position": 637
        },
        "endLoc": {
          "line": 89,
          "column": 2,
          "position": 734
        }
      }
    },
    {
      "format": "javascript",
      "lines": 17,
      "fragment": ";\nimport { readFileSync } from 'node:fs';\n\n// ============================================================================\n// REAL VIBE-VALIDATE USAGE (80%)\n// ============================================================================\n\ntest('Extractors › Assertion Errors › should extract TypeScript errors correctly', async (t) => {\n  // FAILURE TYPE 1: Assertion Error\n  // INTENTIONAL FAILURE: Test extractor against known output, expect wrong count\n  const { extractTypeScriptErrors } = await import('@vibe-validate/extractors');\n\n  const tsOutput = 'src/runner.ts(45,10): error TS2345: Type mismatch.';\n  const result = extractTypeScriptErrors(tsOutput);\n\n  // Expected: 1 error, but we assert 5 (INTENTIONAL FAILURE)\n  t.is",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/ava/comprehensive-failures.test.js",
        "start": 12,
        "end": 28,
        "startLoc": {
          "line": 12,
          "column": 6,
          "position": 10
        },
        "endLoc": {
          "line": 28,
          "column": 3,
          "position": 104
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/tape/comprehensive-failures.test.js",
        "start": 12,
        "end": 28,
        "startLoc": {
          "line": 12,
          "column": 7,
          "position": 10
        },
        "endLoc": {
          "line": 28,
          "column": 6,
          "position": 104
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": "}],\n    totalErrors: 1,\n    summary: '1 error',\n    guidance: 'Fix it',\n    metadata: {\n      detection: {\n        extractor: 'test-extractor',\n        confidence: 100,\n        patterns: ['test'],\n        reason: 'Test',\n      },\n      confidence: 100,\n      completeness: 100,\n      issues: [],\n    },\n  }));\n}\n\n/**\n * Creates a mock plugin that returns multiple errors\n * Self-contained - works in sandbox.\n *\n * @returns Mock plugin\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/helpers/sandboxed-extractor-helpers.ts",
        "start": 137,
        "end": 160,
        "startLoc": {
          "line": 137,
          "column": 2,
          "position": 753
        },
        "endLoc": {
          "line": 160,
          "column": 4,
          "position": 859
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/helpers/sandboxed-extractor-helpers.ts",
        "start": 111,
        "end": 134,
        "startLoc": {
          "line": 111,
          "column": 2,
          "position": 579
        },
        "endLoc": {
          "line": 134,
          "column": 4,
          "position": 685
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", () => {\n      const entries: RunCacheNote[] = [\n        {\n          treeHash: 'abc123',\n          command: 'echo test',\n          workdir: '',\n          timestamp: '2025-11-09T22:00:00.000Z',\n          exitCode: 0,\n          durationSecs: 0.1,\n        },\n      ];\n\n      const cleaned = cleanRunCacheEntries(entries);\n\n      expect(cleaned[0]).not.toHaveProperty('workdir'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 30,
        "end": 44,
        "startLoc": {
          "line": 30,
          "column": 30,
          "position": 219
        },
        "endLoc": {
          "line": 44,
          "column": 10,
          "position": 323
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 12,
        "end": 26,
        "startLoc": {
          "line": 12,
          "column": 38,
          "position": 84
        },
        "endLoc": {
          "line": 26,
          "column": 11,
          "position": 188
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", () => {\n      const runCacheEntries: RunCacheNote[] = [\n        {\n          treeHash: 'abc123',\n          command: 'echo test',\n          workdir: '',\n          timestamp: '2025-11-09T22:00:00.000Z',\n          exitCode: 0,\n          durationSecs: 0.1,\n        },\n      ];\n\n      const result = formatTreeHashOutput(\n        'abc123def456',\n        null,\n        runCacheEntries,\n        { includeValidation: false, includeRunCache: false",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 205,
        "end": 221,
        "startLoc": {
          "line": 205,
          "column": 60,
          "position": 1601
        },
        "endLoc": {
          "line": 221,
          "column": 6,
          "position": 1712
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 127,
        "end": 143,
        "startLoc": {
          "line": 127,
          "column": 49,
          "position": 952
        },
        "endLoc": {
          "line": 143,
          "column": 5,
          "position": 1063
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ";\n\n      const mockCommitCount = '1';\n\n      // Mock git package functions instead of safeExecSync\n      vi.spyOn(gitPackage, 'getDiffStats').mockReturnValue(mockDiffOutput);\n      vi.spyOn(gitPackage, 'getCommitCount').mockReturnValue(mockCommitCount);\n\n      const changes = await fetcher.fetchFileChanges(123);\n\n      expect(changes.top_files?",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 534,
        "end": 544,
        "startLoc": {
          "line": 534,
          "column": 9,
          "position": 3910
        },
        "endLoc": {
          "line": 544,
          "column": 2,
          "position": 3986
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 519,
        "end": 528,
        "startLoc": {
          "line": 519,
          "column": 2,
          "position": 3784
        },
        "endLoc": {
          "line": 528,
          "column": 2,
          "position": 3859
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ";\n\n      // Mock git package functions instead of safeExecSync\n      vi.spyOn(gitPackage, 'getDiffStats').mockReturnValue(mockDiffOutput);\n      vi.spyOn(gitPackage, 'getCommitCount').mockReturnValue(mockCommitCount);\n\n      const changes = await fetcher.fetchFileChanges(123);\n\n      expect(changes).toEqual({\n        files_changed: 0",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 549,
        "end": 558,
        "startLoc": {
          "line": 549,
          "column": 4,
          "position": 4040
        },
        "endLoc": {
          "line": 558,
          "column": 2,
          "position": 4113
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 496,
        "end": 505,
        "startLoc": {
          "line": 496,
          "column": 4,
          "position": 3479
        },
        "endLoc": {
          "line": 505,
          "column": 2,
          "position": 3552
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ";\n\n      const result = await detector.detectAndExtract(check, logs);\n\n      expect(result).toBeDefined();\n      expect(result?.summary).toBe('2 test failure(s)');\n      expect(result?.totalErrors).toBe(2);\n      expect(result?.errors).toHaveLength(2);\n      expect(result?.errors",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 172,
        "end": 180,
        "startLoc": {
          "line": 172,
          "column": 101,
          "position": 825
        },
        "endLoc": {
          "line": 180,
          "column": 7,
          "position": 911
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 59,
        "end": 67,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 210
        },
        "endLoc": {
          "line": 67,
          "column": 9,
          "position": 296
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ";\n\n      const result = await detector.detectAndExtract(check, logs);\n\n      expect(result).toBeDefined();\n      expect(result?.summary).toBe('2 test failure(s)');\n      expect(result?.totalErrors).toBe(2);\n      expect(result?.errors).toHaveLength(2);\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 484,
        "end": 492,
        "startLoc": {
          "line": 484,
          "column": 2,
          "position": 2867
        },
        "endLoc": {
          "line": 492,
          "column": 2,
          "position": 2948
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 59,
        "end": 67,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 210
        },
        "endLoc": {
          "line": 67,
          "column": 7,
          "position": 291
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n        totalErrors: 1,\n        errors: [{ message: 'Error' }],\n      });\n\n      const result = await detector.detectAndExtract(check, logs);\n\n      // Should fall back to non-matrix mode\n      expect(result).toBeDefined();\n      expect(autoDetectAndExtract).toHaveBeenCalled();\n    });\n  });\n}",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 543,
        "end": 555,
        "startLoc": {
          "line": 543,
          "column": 16,
          "position": 3355
        },
        "endLoc": {
          "line": 555,
          "column": 2,
          "position": 3442
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 134,
        "end": 147,
        "startLoc": {
          "line": 134,
          "column": 10,
          "position": 646
        },
        "endLoc": {
          "line": 147,
          "column": 9,
          "position": 735
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "{\n          number: 90,\n          title: 'fix: Improve Windows platform independence',\n          url: 'https://github.com/jdutton/vibe-validate/pull/90',\n          branch: 'fix/windows-shell-independence',\n          base_branch: 'main',\n          author: 'jdutton',\n          draft: false,\n          mergeable: true,\n          merge_state_status: 'UNSTABLE',\n          labels: ['bug', 'windows'],\n          linked_issues: [\n            {\n              number: 86,\n              title: 'Windows CI failures',\n              url: 'https://github.com/jdutton/vibe-validate/issues/86',\n            },\n          ],\n        },",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 590,
        "end": 608,
        "startLoc": {
          "line": 590,
          "column": 2,
          "position": 4526
        },
        "endLoc": {
          "line": 608,
          "column": 2,
          "position": 4643
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 97,
        "end": 115,
        "startLoc": {
          "line": 97,
          "column": 2,
          "position": 945
        },
        "endLoc": {
          "line": 115,
          "column": 2,
          "position": 1062
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "{\n              name: 'Validation (windows-latest, 22)',\n              status: 'completed',\n              conclusion: 'failure',\n              run_id: 20275647370,\n              workflow: 'Validation Pipeline',\n              started_at: '2025-12-16T16:43:17Z',\n              duration: '2m15s',\n              log_command: 'gh run view 20275647370 --log',\n              extraction: {\n                summary: '1 test failure',\n                totalErrors: 1,\n                errors: [\n                  {\n                    file: 'test.ts',\n                    line: 42,\n                    message: 'Expected success',\n                  },\n                ],\n              },\n            },",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 621,
        "end": 641,
        "startLoc": {
          "line": 621,
          "column": 13,
          "position": 4724
        },
        "endLoc": {
          "line": 641,
          "column": 2,
          "position": 4846
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 191,
        "end": 211,
        "startLoc": {
          "line": 191,
          "column": 2,
          "position": 1631
        },
        "endLoc": {
          "line": 211,
          "column": 2,
          "position": 1753
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "= {\n        pr: {\n          number: 90,\n          title: 'Test',\n          url: 'https://github.com/org/repo/pull/90',\n          branch: 'feature',\n          base_branch: 'main',\n          author: 'user',\n          draft: false,\n          mergeable: true,\n          merge_state_status: 'CLEAN',\n          labels: [],\n        },\n        status: 'passed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 740,
        "end": 753,
        "startLoc": {
          "line": 740,
          "column": 2,
          "position": 5489
        },
        "endLoc": {
          "line": 753,
          "column": 9,
          "position": 5578
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 696,
        "end": 709,
        "startLoc": {
          "line": 696,
          "column": 2,
          "position": 5177
        },
        "endLoc": {
          "line": 709,
          "column": 10,
          "position": 5266
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n\n\t\t\t\t// Verify first error has proper structure\n\t\t\t\tconst firstError = extraction.errors[0];\n\t\t\t\texpect(firstError).toMatchObject({\n\t\t\t\t\tfile: expect.any(String),\n\t\t\t\t\tline: expect.any(Number),\n\t\t\t\t\tmessage: expect.any(String),\n\t\t\t\t});\n\n\t\t\t\t// Verify metadata indicates Vitest detection",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/integration/watch-pr-extraction.integration.test.ts",
        "start": 107,
        "end": 117,
        "startLoc": {
          "line": 107,
          "column": 10,
          "position": 808
        },
        "endLoc": {
          "line": 117,
          "column": 46,
          "position": 883
        }
      },
      "secondFile": {
        "name": "packages/cli/test/integration/watch-pr-extraction.integration.test.ts",
        "start": 76,
        "end": 86,
        "startLoc": {
          "line": 76,
          "column": 13,
          "position": 574
        },
        "endLoc": {
          "line": 86,
          "column": 50,
          "position": 649
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n      const mockHistoryNote = createMockHistoryNote(mockTreeHash, [\n        {\n          branch: 'main',\n          timestamp: '2025-10-16T12:00:00.000Z',\n          result: mockResult,\n        },\n      ]);\n\n      vi.mocked(hasHistoryForTree).mockResolvedValue(true);\n      vi.mocked(readHistoryNote).mockResolvedValue(mockHistoryNote);\n    });\n\n    it('should display failed state (minimal output)'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 226,
        "end": 239,
        "startLoc": {
          "line": 226,
          "column": 24,
          "position": 1857
        },
        "endLoc": {
          "line": 239,
          "column": 47,
          "position": 1945
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 195,
        "end": 208,
        "startLoc": {
          "line": 195,
          "column": 13,
          "position": 1575
        },
        "endLoc": {
          "line": 208,
          "column": 47,
          "position": 1663
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ";\nimport { setupCommanderTest, type CommanderTestEnv } from '../helpers/commander-test-setup.js';\n\n\n// Mock dependencies\nvi.mock('@vibe-validate/git', () => ({\n  getGitTreeHash: vi.fn(),\n}));\n\nvi.mock('@vibe-validate/history', () => ({\n  hasHistoryForTree: vi.fn(),\n  readHistoryNote: vi.fn(),\n}",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 6,
        "end": 18,
        "startLoc": {
          "line": 6,
          "column": 33,
          "position": 84
        },
        "endLoc": {
          "line": 18,
          "column": 2,
          "position": 177
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 8,
        "end": 20,
        "startLoc": {
          "line": 8,
          "column": 35,
          "position": 115
        },
        "endLoc": {
          "line": 20,
          "column": 22,
          "position": 209
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "));\n\n      snapshotCommand(env.program);\n      const exitCode = await runSnapshotCommand();\n      expect(exitCode).toBe(0);\n\n      const output = getLogOutput();\n      expect(output.some(call => call.includes('Validation Status:') && call.includes('Failed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 146,
        "end": 153,
        "startLoc": {
          "line": 146,
          "column": 6,
          "position": 1504
        },
        "endLoc": {
          "line": 153,
          "column": 9,
          "position": 1581
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 133,
        "end": 140,
        "startLoc": {
          "line": 133,
          "column": 5,
          "position": 1342
        },
        "endLoc": {
          "line": 140,
          "column": 9,
          "position": 1419
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "));\n      snapshotCommand(env.program);\n\n      const exitCode = await runSnapshotCommand();\n      expect(exitCode).toBe(1);\n      expect(console.error).toHaveBeenCalledWith(\n        expect.stringContaining('Failed to get snapshot'),\n        expect.any(Error)\n      );\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 198,
        "end": 208,
        "startLoc": {
          "line": 198,
          "column": 25,
          "position": 2104
        },
        "endLoc": {
          "line": 208,
          "column": 2,
          "position": 2182
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 185,
        "end": 196,
        "startLoc": {
          "line": 185,
          "column": 23,
          "position": 1982
        },
        "endLoc": {
          "line": 196,
          "column": 3,
          "position": 2061
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ".exitCode);\n      console.log('  Errors extracted:', parsed.extraction?.errors?.length ?? 0);\n      console.log('  Summary:', parsed.extraction?.summary);\n      if (parsed.extraction?.errors?.length) {\n        console.log('  First error:', JSON.stringify(parsed.extraction.errors[0], null, 2));\n      } else",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 132,
        "end": 137,
        "startLoc": {
          "line": 132,
          "column": 2,
          "position": 949
        },
        "endLoc": {
          "line": 137,
          "column": 5,
          "position": 1046
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 92,
        "end": 98,
        "startLoc": {
          "line": 92,
          "column": 7,
          "position": 617
        },
        "endLoc": {
          "line": 98,
          "column": 8,
          "position": 715
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n      console.log('  Exit code:', parsed.exitCode);\n      console.log('  Errors extracted:', parsed.extraction?.errors?.length ?? 0);\n      console.log('  Summary:', parsed.extraction?.summary);\n      if (parsed.extraction?.errors?.length) {\n        console.log('  First error:', JSON.stringify(parsed.extraction.errors[0], null, 2));\n      } else {\n        console.log('  Raw output (first 800 chars):', parsed.rawOutput?.substring(0, 800));\n      }\n\n      // Should detect Playwright and extract errors",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 170,
        "end": 180,
        "startLoc": {
          "line": 170,
          "column": 42,
          "position": 1271
        },
        "endLoc": {
          "line": 180,
          "column": 47,
          "position": 1412
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 91,
        "end": 141,
        "startLoc": {
          "line": 91,
          "column": 38,
          "position": 605
        },
        "endLoc": {
          "line": 141,
          "column": 41,
          "position": 1078
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ": vi.fn(),\n  };\n});\n\n// Mock the config loader\nvi.mock('../../src/utils/config-loader.js', async () => {\n  const actual = await vi.importActual<typeof configLoader>('../../src/utils/config-loader.js');\n  return {\n    ...actual,\n    loadConfig: vi.fn(),\n    loadConfigWithDir",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 57,
        "end": 67,
        "startLoc": {
          "line": 57,
          "column": 19,
          "position": 554
        },
        "endLoc": {
          "line": 67,
          "column": 18,
          "position": 634
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/sync-check.test.ts",
        "start": 13,
        "end": 23,
        "startLoc": {
          "line": 13,
          "column": 16,
          "position": 139
        },
        "endLoc": {
          "line": 23,
          "column": 2,
          "position": 219
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "program.parseAsync(args, { from: 'user' });\n    return 0;\n  } catch (err: unknown) {\n    // Commander exitOverride throws CommanderError with exitCode\n    if (err && typeof err === 'object' && 'exitCode' in err) {\n      return (err as { exitCode: number }).exitCode;\n    }\n    // process.exit throws Error with message \"process.exit(code)\"\n    if (err instanceof Error && err.message.startsWith('process.exit(')) {\n      const",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 94,
        "end": 103,
        "startLoc": {
          "line": 94,
          "column": 2,
          "position": 595
        },
        "endLoc": {
          "line": 103,
          "column": 6,
          "position": 715
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 74,
        "end": 83,
        "startLoc": {
          "line": 74,
          "column": 2,
          "position": 455
        },
        "endLoc": {
          "line": 83,
          "column": 27,
          "position": 575
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "${Date.now()}`);\n    testDir = mkdirSyncReal(targetDir, { recursive: true });\n\n    // Save original cwd and change to test directory\n    originalCwd = process.cwd();\n    process.chdir(testDir);\n\n    // Setup Commander test environment\n    env = setupCommanderTest();\n\n    // Reset mocks\n    vi.mocked(configLoader",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 138,
        "end": 149,
        "startLoc": {
          "line": 138,
          "column": 28,
          "position": 933
        },
        "endLoc": {
          "line": 149,
          "column": 13,
          "position": 1013
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 418,
        "end": 429,
        "startLoc": {
          "line": 418,
          "column": 32,
          "position": 2926
        },
        "endLoc": {
          "line": 429,
          "column": 5,
          "position": 3006
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "});\n\n  afterEach(() => {\n    env.cleanup();\n\n    // Restore cwd\n    process.chdir(originalCwd);\n\n    // Clean up test files\n    if (existsSync(testDir)) {\n      try {\n        rmSync(testDir, { recursive: true, force: true });\n      } catch {\n        // Ignore cleanup errors\n      }\n    }\n\n    vi.restoreAllMocks();\n  });\n\n  describe('command registration'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 152,
        "end": 172,
        "startLoc": {
          "line": 152,
          "column": 3,
          "position": 1054
        },
        "endLoc": {
          "line": 172,
          "column": 23,
          "position": 1168
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 450,
        "end": 470,
        "startLoc": {
          "line": 450,
          "column": 3,
          "position": 3297
        },
        "endLoc": {
          "line": 470,
          "column": 43,
          "position": 3411
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", () => {\n      configCommand(env.program);\n\n      const configCmd = env.program.commands.find(cmd => cmd.name() === 'config');\n      const options = configCmd?.options;\n\n      expect(options?.some(opt => opt.flags === '-v, --verbose'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 192,
        "end": 198,
        "startLoc": {
          "line": 192,
          "column": 35,
          "position": 1383
        },
        "endLoc": {
          "line": 198,
          "column": 16,
          "position": 1465
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 183,
        "end": 189,
        "startLoc": {
          "line": 183,
          "column": 36,
          "position": 1281
        },
        "endLoc": {
          "line": 189,
          "column": 13,
          "position": 1363
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n        },\n        recoveryInfo: 'Deleted branches are recoverable for 30 days via git reflog',\n      };\n\n      vi.mocked(git.cleanupBranches).mockResolvedValue(mockResult);\n\n      cleanupCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['cleanup'], { from: 'user' });\n      } catch (error) { // NOSONAR - Commander.js throws on exitOverride",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/cleanup.test.ts",
        "start": 102,
        "end": 113,
        "startLoc": {
          "line": 102,
          "column": 2,
          "position": 861
        },
        "endLoc": {
          "line": 113,
          "column": 49,
          "position": 947
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/cleanup.test.ts",
        "start": 69,
        "end": 80,
        "startLoc": {
          "line": 69,
          "column": 2,
          "position": 606
        },
        "endLoc": {
          "line": 80,
          "column": 76,
          "position": 692
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", async () => {\n        const oldTimestamp = createOldDate(100).toISOString();\n        const oldNote = createHistoryNote({\n          treeHash: 'old-abc123',\n          runs: [createRun({ treeHash: 'old-abc123', timestamp: oldTimestamp })],\n        });\n        setupPrunerTest([oldNote]);\n\n        await",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 230,
        "end": 238,
        "startLoc": {
          "line": 230,
          "column": 30,
          "position": 2105
        },
        "endLoc": {
          "line": 238,
          "column": 6,
          "position": 2192
        }
      },
      "secondFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 117,
        "end": 125,
        "startLoc": {
          "line": 117,
          "column": 25,
          "position": 905
        },
        "endLoc": {
          "line": 125,
          "column": 6,
          "position": 992
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async () => {\n        const oldTimestamp = createOldDate(100).toISOString();\n        const oldNotes = [\n          createHistoryNote({\n            treeHash: 'old-1',\n            runs: [createRun({ id: 'run-1', treeHash: 'old-1', timestamp: oldTimestamp, headCommit: 'commit1' })],\n          }),\n          createHistoryNote({\n            treeHash: 'old-2',\n            runs: [createRun({ id: 'run-2', treeHash: 'old-2', timestamp: oldTimestamp, headCommit: 'commit2' })],\n          }),\n        ];\n        vi",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 253,
        "end": 265,
        "startLoc": {
          "line": 253,
          "column": 48,
          "position": 2288
        },
        "endLoc": {
          "line": 265,
          "column": 3,
          "position": 2438
        }
      },
      "secondFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 137,
        "end": 149,
        "startLoc": {
          "line": 137,
          "column": 34,
          "position": 1097
        },
        "endLoc": {
          "line": 149,
          "column": 16,
          "position": 1247
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n\n        expect(result.notesPruned).toBe(0);\n        expect(result.runsPruned).toBe(0);\n        expect(result.notesRemaining).toBe(0);\n        expect(result.prunedTreeHashes).toEqual([]);\n        expect(git.removeNote).not.toHaveBeenCalled();\n      });\n    });\n\n    describe('when notes exist'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 309,
        "end": 319,
        "startLoc": {
          "line": 309,
          "column": 2,
          "position": 2831
        },
        "endLoc": {
          "line": 319,
          "column": 19,
          "position": 2921
        }
      },
      "secondFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 93,
        "end": 103,
        "startLoc": {
          "line": 93,
          "column": 3,
          "position": 663
        },
        "endLoc": {
          "line": 103,
          "column": 43,
          "position": 753
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "),\n}));\n\nvi.mock('fs', () => ({\n  writeFileSync: vi.fn(),\n  unlinkSync: vi.fn(),\n}));\n\nvi.mock('../src/reader.js', () => ({\n  readHistoryNote: vi.fn(() => Promise.resolve(null)),\n  listHistoryTreeHashes",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/integration.test.ts",
        "start": 34,
        "end": 44,
        "startLoc": {
          "line": 34,
          "column": 2,
          "position": 315
        },
        "endLoc": {
          "line": 44,
          "column": 22,
          "position": 405
        }
      },
      "secondFile": {
        "name": "packages/history/test/recorder.test.ts",
        "start": 21,
        "end": 31,
        "startLoc": {
          "line": 21,
          "column": 2,
          "position": 203
        },
        "endLoc": {
          "line": 31,
          "column": 2,
          "position": 292
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n        stderr: '',\n        exitCode: 0,\n      })\n      .mockReturnValueOnce({\n        success: true,\n        stdout: '0\\n',\n        stderr: '',\n        exitCode: 0,\n      });\n\n    const result = isCurrentBranchBehindTracking();\n\n    expect(result).toBe(0);\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/tracking-branch.test.ts",
        "start": 98,
        "end": 112,
        "startLoc": {
          "line": 98,
          "column": 16,
          "position": 653
        },
        "endLoc": {
          "line": 112,
          "column": 2,
          "position": 739
        }
      },
      "secondFile": {
        "name": "packages/git/test/tracking-branch.test.ts",
        "start": 46,
        "end": 60,
        "startLoc": {
          "line": 46,
          "column": 23,
          "position": 302
        },
        "endLoc": {
          "line": 60,
          "column": 7,
          "position": 388
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ",\n          metadata: {\n            confidence: 100,\n            completeness: 100,\n            issues: [],\n            detection: {\n              extractor: 'vitest',\n              confidence: 100,\n              patterns: [],\n              reason: 'test',\n            },\n          },\n        },\n      };\n\n      const result = StepResultSchema.parse",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 111,
        "end": 126,
        "startLoc": {
          "line": 111,
          "column": 3,
          "position": 783
        },
        "endLoc": {
          "line": 126,
          "column": 6,
          "position": 874
        }
      },
      "secondFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 52,
        "end": 67,
        "startLoc": {
          "line": 52,
          "column": 37,
          "position": 332
        },
        "endLoc": {
          "line": 67,
          "column": 10,
          "position": 423
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "];\n\n      // Check that expected fields appear in order\n      let lastIndex = -1;\n      for (const expectedKey of expectedOrder) {\n        const currentIndex = keys.indexOf(expectedKey);\n        if (currentIndex !== -1) {\n          expect(currentIndex).toBeGreaterThan(lastIndex);\n          lastIndex = currentIndex;\n        }\n      }\n    });\n  });\n\n  describe('v0.15.0 breaking changes'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 138,
        "end": 152,
        "startLoc": {
          "line": 138,
          "column": 7,
          "position": 948
        },
        "endLoc": {
          "line": 152,
          "column": 27,
          "position": 1050
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/run-result-schema.test.ts",
        "start": 75,
        "end": 89,
        "startLoc": {
          "line": 75,
          "column": 7,
          "position": 499
        },
        "endLoc": {
          "line": 89,
          "column": 24,
          "position": 601
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", // ❌ Removed in v0.15.0\n      };\n\n      const result = StepResultSchema.safeParse(stepWithOldFormat);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.errors.some(e =>\n          e.message.includes('Unrecognized key')\n        )).toBe(true);\n      }\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 180,
        "end": 192,
        "startLoc": {
          "line": 180,
          "column": 2,
          "position": 1287
        },
        "endLoc": {
          "line": 192,
          "column": 2,
          "position": 1382
        }
      },
      "secondFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 160,
        "end": 173,
        "startLoc": {
          "line": 160,
          "column": 19,
          "position": 1125
        },
        "endLoc": {
          "line": 173,
          "column": 3,
          "position": 1221
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ");\n\n      expect(runnerConfig.onPhaseStart).toBeDefined();\n      expect(runnerConfig.onPhaseComplete).toBeDefined();\n      expect(runnerConfig.onStepStart).toBeDefined();\n      expect(runnerConfig.onStepComplete).toBeDefined();\n    });\n\n    it('should include minimal callbacks for CI context (verbose=false)'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 153,
        "end": 161,
        "startLoc": {
          "line": 153,
          "column": 7,
          "position": 1135
        },
        "endLoc": {
          "line": 161,
          "column": 66,
          "position": 1200
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 140,
        "end": 148,
        "startLoc": {
          "line": 140,
          "column": 2,
          "position": 1014
        },
        "endLoc": {
          "line": 148,
          "column": 54,
          "position": 1079
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ", isInteractive: false },\n        false\n      );\n\n      expect(runnerConfig.onPhaseStart).toBeDefined();\n      expect(runnerConfig.onPhaseComplete).toBeDefined();\n      expect(runnerConfig.onStepStart).toBeDefined();\n      expect(runnerConfig.onStepComplete).toBeDefined();\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 164,
        "end": 173,
        "startLoc": {
          "line": 164,
          "column": 5,
          "position": 1236
        },
        "endLoc": {
          "line": 173,
          "column": 2,
          "position": 1312
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 151,
        "end": 161,
        "startLoc": {
          "line": 151,
          "column": 14,
          "position": 1121
        },
        "endLoc": {
          "line": 161,
          "column": 3,
          "position": 1198
        }
      }
    }
  ]
}