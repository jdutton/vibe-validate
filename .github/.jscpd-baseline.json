{
  "duplicates": [
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ".trim();\n\n      const result = extract(output);\n\n      expect(result.errors).toHaveLength(1);\n      expect(result.errors[0].file).toBe('vitest.config.ts');\n      expect(result.errors[0].message).toContain('Timeout calling \"onTaskUpdate\"'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/vitest/index.test.ts",
        "start": 397,
        "end": 403,
        "startLoc": {
          "line": 397,
          "column": 8,
          "position": 2031
        },
        "endLoc": {
          "line": 403,
          "column": 33,
          "position": 2100
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/vitest/index.test.ts",
        "start": 369,
        "end": 375,
        "startLoc": {
          "line": 369,
          "column": 8,
          "position": 1865
        },
        "endLoc": {
          "line": 375,
          "column": 25,
          "position": 1934
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ".trim();\n\n      const result = extract(output);\n\n      expect(result.errors).toHaveLength(1);\n      expect(result.errors[0].file).toBe('vitest.config.ts');\n      expect(result.errors[0].message).toContain('Timeout calling \"onTaskUpdate\"');\n      expect(result.errors[0].message).toContain('system resource constraints');\n      expect(result.errors[0].message).toContain('Kill background processes');\n      expect(result.totalErrors).toBe(1);\n      expect(result.summary).toBe('1 test failure(s)');\n    });\n\n    it('should truncate errors array to MAX_ERRORS_IN_ARRAY but preserve totalErrors count'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/vitest/index.test.ts",
        "start": 430,
        "end": 443,
        "startLoc": {
          "line": 430,
          "column": 8,
          "position": 2197
        },
        "endLoc": {
          "line": 443,
          "column": 85,
          "position": 2345
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/vitest/index.test.ts",
        "start": 369,
        "end": 410,
        "startLoc": {
          "line": 369,
          "column": 8,
          "position": 1865
        },
        "endLoc": {
          "line": 410,
          "column": 77,
          "position": 2179
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n\n      // totalErrors should be 15 (full count)\n      expect(result.totalErrors).toBe(15);\n\n      // errors array should be truncated to MAX_ERRORS_IN_ARRAY (10)\n      expect(result.errors).toHaveLength(MAX_ERRORS_IN_ARRAY);\n      expect(result.errors).toHaveLength(10);\n\n      // Verify we got the first 10 errors\n      expect(result.errors[0].file).toBe('src/file1.ts'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/typescript/index.test.ts",
        "start": 205,
        "end": 215,
        "startLoc": {
          "line": 205,
          "column": 7,
          "position": 1550
        },
        "endLoc": {
          "line": 215,
          "column": 15,
          "position": 1622
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/vitest/index.test.ts",
        "start": 458,
        "end": 468,
        "startLoc": {
          "line": 458,
          "column": 9,
          "position": 2491
        },
        "endLoc": {
          "line": 468,
          "column": 26,
          "position": 2563
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ".extract(sample.input!);\n        expect(result.errors.length).toBeGreaterThan(0);\n        expect(result.errors.length).toBe(sample.expectedErrors);\n      }\n    });\n  });\n\n  describe('metadata', () => {\n    it('should have complete plugin metadata', () => {\n      expect(mochaPlugin",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/mocha/index.test.ts",
        "start": 321,
        "end": 330,
        "startLoc": {
          "line": 321,
          "column": 12,
          "position": 1853
        },
        "endLoc": {
          "line": 330,
          "column": 12,
          "position": 1940
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/playwright/index.test.ts",
        "start": 295,
        "end": 304,
        "startLoc": {
          "line": 295,
          "column": 17,
          "position": 1501
        },
        "endLoc": {
          "line": 304,
          "column": 17,
          "position": 1588
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ");\n      expect(sample).toBeDefined();\n      if (sample && 'input' in sample && sample.input) {\n        const result = mavenSurefireExtractor.extract(sample.input);\n        expect(result.totalErrors).toBe(sample.expected!.totalErrors);\n      }\n    });\n\n    it('should validate assertj-failure sample'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/maven-surefire/index.test.ts",
        "start": 198,
        "end": 206,
        "startLoc": {
          "line": 198,
          "column": 7,
          "position": 1644
        },
        "endLoc": {
          "line": 206,
          "column": 41,
          "position": 1729
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/maven-surefire/index.test.ts",
        "start": 187,
        "end": 195,
        "startLoc": {
          "line": 187,
          "column": 7,
          "position": 1518
        },
        "endLoc": {
          "line": 195,
          "column": 48,
          "position": 1603
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ");\n      expect(sample).toBeDefined();\n      if (sample && 'input' in sample && sample.input) {\n        const result = mavenSurefireExtractor.extract(sample.input);\n        expect(result.totalErrors).toBe(sample.expected!.totalErrors);\n      }\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/maven-surefire/index.test.ts",
        "start": 207,
        "end": 214,
        "startLoc": {
          "line": 207,
          "column": 18,
          "position": 1766
        },
        "endLoc": {
          "line": 214,
          "column": 2,
          "position": 1848
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/maven-surefire/index.test.ts",
        "start": 187,
        "end": 195,
        "startLoc": {
          "line": 187,
          "column": 7,
          "position": 1518
        },
        "endLoc": {
          "line": 195,
          "column": 3,
          "position": 1601
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ");\n      expect(sample).toBeDefined();\n\n      if (sample && 'input' in sample) {\n        const result = extractMavenCheckstyle(sample.input!);\n        expect(result.totalErrors).toBe(sample.expected!.totalErrors);\n        if (sample.expected!.errors) {\n          expect(result.errors[0]).toMatchObject(sample.expected!.errors[0]);\n        }\n      }\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/maven-checkstyle/index.test.ts",
        "start": 211,
        "end": 222,
        "startLoc": {
          "line": 211,
          "column": 23,
          "position": 1778
        },
        "endLoc": {
          "line": 222,
          "column": 2,
          "position": 1896
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/maven-checkstyle/index.test.ts",
        "start": 198,
        "end": 210,
        "startLoc": {
          "line": 198,
          "column": 20,
          "position": 1623
        },
        "endLoc": {
          "line": 210,
          "column": 3,
          "position": 1742
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n\n      const result = extract(output);\n\n      // totalErrors should be 15 (full count)\n      expect(result.totalErrors).toBe(15);\n\n      // errors array should be truncated to MAX_ERRORS_IN_ARRAY (10)\n      expect(result.errors).toHaveLength(MAX_ERRORS_IN_ARRAY);\n      expect(result.errors).toHaveLength(10);\n\n      // Verify we got the first 10 errors\n      expect(result.errors[0].message",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jest/index.test.ts",
        "start": 215,
        "end": 227,
        "startLoc": {
          "line": 215,
          "column": 2,
          "position": 1414
        },
        "endLoc": {
          "line": 227,
          "column": 8,
          "position": 1495
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/typescript/index.test.ts",
        "start": 203,
        "end": 468,
        "startLoc": {
          "line": 203,
          "column": 5,
          "position": 1536
        },
        "endLoc": {
          "line": 468,
          "column": 5,
          "position": 2558
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "function extractFailures(output: string): TestFailureInfo[] {\n  const failures: TestFailureInfo[] = [];\n  const lines = output.split('\\n');\n\n  let i = 0;\n  while (i < lines.length) {\n    const line = lines[i];\n\n    // Look for numbered failure markers (e.g., \"1) Test name\")",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.ts",
        "start": 21,
        "end": 29,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 55
        },
        "endLoc": {
          "line": 29,
          "column": 60,
          "position": 144
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.ts",
        "start": 21,
        "end": 29,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 55
        },
        "endLoc": {
          "line": 29,
          "column": 53,
          "position": 144
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "], 10) : 0;\n\n  // Extract all failures\n  const failures = extractFailures(output);\n\n  // Early return if no failures detected (but failure count suggested there should be)\n  if (failureCount === 0 && failures.length === 0) {\n    return processTestFailures([], 95);\n  }\n\n  // Process failures using shared utility\n  return processTestFailures(failures, 95);\n}\n\n/**\n * Detect if output is from Jasmine test framework\n *\n * @param output - Command output to analyze\n * @returns Detection result with confidence and patterns\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.ts",
        "start": 160,
        "end": 179,
        "startLoc": {
          "line": 160,
          "column": 2,
          "position": 1104
        },
        "endLoc": {
          "line": 179,
          "column": 4,
          "position": 1194
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.ts",
        "start": 174,
        "end": 193,
        "startLoc": {
          "line": 174,
          "column": 2,
          "position": 1084
        },
        "endLoc": {
          "line": 193,
          "column": 4,
          "position": 1174
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".extract(input);\n\n        expect(result.summary).toBe('3 test(s) failed');\n        expect(result.errors).toHaveLength(3);\n        expect(result.errors[0].line).toBe(10);\n        expect(result.errors[1].line).toBe(20);\n        expect(result.errors[2].line).toBe(30);\n      });\n    });\n\n    describe('Error Type Detection', () => {\n      it('should detect assertion errors'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.test.ts",
        "start": 129,
        "end": 140,
        "startLoc": {
          "line": 129,
          "column": 14,
          "position": 603
        },
        "endLoc": {
          "line": 140,
          "column": 33,
          "position": 723
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.test.ts",
        "start": 89,
        "end": 100,
        "startLoc": {
          "line": 89,
          "column": 12,
          "position": 444
        },
        "endLoc": {
          "line": 100,
          "column": 31,
          "position": 564
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ".extract(input);\n        expect(result.errors[0].file).toBe('/path/to/test.js');\n        expect(result.errors[0].line).toBe(42);\n      });\n\n      it('should handle relative paths', () => {\n        const input = `\nFailures:\n1) Test\n  Message:\n    Error: Test error\n  Stack:\n        at UserContext.<anonymous> (tests/unit/helpers.test.js:128:30)\n\n1 spec, 1 failure\n`",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.test.ts",
        "start": 220,
        "end": 235,
        "startLoc": {
          "line": 220,
          "column": 14,
          "position": 1026
        },
        "endLoc": {
          "line": 235,
          "column": 2,
          "position": 1097
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.test.ts",
        "start": 163,
        "end": 175,
        "startLoc": {
          "line": 163,
          "column": 12,
          "position": 866
        },
        "endLoc": {
          "line": 175,
          "column": 2,
          "position": 937
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ".extract(sample.input!);\n        expect(result.errors.length).toBeGreaterThan(0);\n        expect(result.errors.length).toBe(sample.expectedErrors);\n      }\n    });\n  });\n\n  describe('metadata', () => {\n    it('should have complete plugin metadata', () => {\n      expect(jasminePlugin",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.test.ts",
        "start": 366,
        "end": 375,
        "startLoc": {
          "line": 366,
          "column": 14,
          "position": 1886
        },
        "endLoc": {
          "line": 375,
          "column": 14,
          "position": 1973
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/playwright/index.test.ts",
        "start": 295,
        "end": 304,
        "startLoc": {
          "line": 295,
          "column": 17,
          "position": 1501
        },
        "endLoc": {
          "line": 304,
          "column": 17,
          "position": 1588
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ";\n      const result = eslintPlugin.detect(output);\n\n      expect(result.confidence).toBe(85);\n      expect(result.patterns).toContain('file:line:col: error/warning rule-name');\n      expect(result.reason).toBe('ESLint error format detected');\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/eslint/index.test.ts",
        "start": 48,
        "end": 55,
        "startLoc": {
          "line": 48,
          "column": 76,
          "position": 372
        },
        "endLoc": {
          "line": 55,
          "column": 2,
          "position": 438
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/eslint/index.test.ts",
        "start": 16,
        "end": 24,
        "startLoc": {
          "line": 16,
          "column": 67,
          "position": 79
        },
        "endLoc": {
          "line": 24,
          "column": 3,
          "position": 146
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ");\n      expect(result.totalErrors).toBe(3);\n\n      // Verify first error\n      expect(result.errors[0].file).toBe('src/index.ts');\n      expect(result.errors[0].severity).toBe('error');\n      expect(result.errors[0].code).toBe('no-console'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/eslint/index.test.ts",
        "start": 84,
        "end": 90,
        "startLoc": {
          "line": 84,
          "column": 34,
          "position": 670
        },
        "endLoc": {
          "line": 90,
          "column": 13,
          "position": 744
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/typescript/index.test.ts",
        "start": 65,
        "end": 71,
        "startLoc": {
          "line": 65,
          "column": 32,
          "position": 454
        },
        "endLoc": {
          "line": 71,
          "column": 9,
          "position": 528
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ";\n\n      const result = eslintPlugin.extract(output);\n\n      expect(result.errors).toHaveLength(3);\n      expect(result.summary).toBe('2 ESLint error(s), 1 warning(s)');\n      expect(result.totalErrors).toBe(3);\n\n      // Verify first error\n      expect(result.errors[0].file).toBe('src/index.ts');\n      expect(result.errors[0].line",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/eslint/index.test.ts",
        "start": 175,
        "end": 185,
        "startLoc": {
          "line": 175,
          "column": 113,
          "position": 1439
        },
        "endLoc": {
          "line": 185,
          "column": 5,
          "position": 1533
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/eslint/index.test.ts",
        "start": 79,
        "end": 89,
        "startLoc": {
          "line": 79,
          "column": 50,
          "position": 626
        },
        "endLoc": {
          "line": 89,
          "column": 9,
          "position": 720
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ",\n          confidence: detection.confidence,\n          patterns: detection.patterns,\n          reason: detection.reason,\n        },\n        confidence: 100,\n        completeness: 100,\n        issues: [],\n      },\n    };\n  }\n\n  const errors: FormattedError[] = [];\n  let completeCount = 0;\n\n  for (const failure of failures) {\n    const file = failure.file ?? 'unknown'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 164,
        "end": 180,
        "startLoc": {
          "line": 164,
          "column": 6,
          "position": 1021
        },
        "endLoc": {
          "line": 180,
          "column": 10,
          "position": 1144
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/tap/index.ts",
        "start": 158,
        "end": 174,
        "startLoc": {
          "line": 158,
          "column": 6,
          "position": 988
        },
        "endLoc": {
          "line": 174,
          "column": 10,
          "position": 1111
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ",\n      confidence: detection.confidence,\n      patterns: detection.patterns,\n      reason: detection.reason,\n    },\n    confidence,\n    completeness,\n    issues: [],\n  };\n\n  return {\n    summary,\n    errors,\n    totalErrors: failures.length,\n    errorSummary: formatCleanOutput(errors),\n    guidance,\n    metadata,\n  };\n}\n\n/**\n * Extract all failures from Ava output\n * Strategy: Find detailed headers (test names with ›), then parse each block\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 211,
        "end": 234,
        "startLoc": {
          "line": 211,
          "column": 6,
          "position": 1417
        },
        "endLoc": {
          "line": 234,
          "column": 4,
          "position": 1518
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/tap/index.ts",
        "start": 204,
        "end": 226,
        "startLoc": {
          "line": 204,
          "column": 6,
          "position": 1362
        },
        "endLoc": {
          "line": 226,
          "column": 4,
          "position": 1463
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "(input);\n\n      expect(result.summary).toBe('3 test(s) failed');\n      expect(result.errors).toHaveLength(3);\n      expect(result.errors[0].line).toBe(10);\n      expect(result.errors[1].line).toBe(20);\n      expect(result.errors[2].line).toBe(30);\n      expect",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.test.ts",
        "start": 150,
        "end": 157,
        "startLoc": {
          "line": 150,
          "column": 17,
          "position": 807
        },
        "endLoc": {
          "line": 157,
          "column": 7,
          "position": 899
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.test.ts",
        "start": 89,
        "end": 96,
        "startLoc": {
          "line": 89,
          "column": 8,
          "position": 446
        },
        "endLoc": {
          "line": 96,
          "column": 2,
          "position": 538
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "import { existsSync } from 'node:fs';\nimport { mkdir, writeFile, readFile, rm } from 'node:fs/promises';\nimport { join } from 'node:path';\n\nimport { normalizedTmpdir } from '@vibe-validate/utils';\nimport { describe, it, expect, beforeEach, afterEach } from 'vitest';\n\nimport { HooksSetupCheck",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/setup-checks/hooks-check.test.ts",
        "start": 7,
        "end": 14,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 14,
          "column": 16,
          "position": 95
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/setup-checks/workflow-check.test.ts",
        "start": 7,
        "end": 14,
        "startLoc": {
          "line": 7,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 14,
          "column": 19,
          "position": 95
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ".fix({ cwd: testDir });\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('already');\n      expect(result.filesChanged).toHaveLength(0);\n\n      // Content should be unchanged\n      const content = await readFile(preCommitPath",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/setup-checks/hooks-check.test.ts",
        "start": 252,
        "end": 259,
        "startLoc": {
          "line": 252,
          "column": 11,
          "position": 2523
        },
        "endLoc": {
          "line": 259,
          "column": 14,
          "position": 2595
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/setup-checks/workflow-check.test.ts",
        "start": 170,
        "end": 177,
        "startLoc": {
          "line": 170,
          "column": 14,
          "position": 1711
        },
        "endLoc": {
          "line": 177,
          "column": 13,
          "position": 1783
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ".fix({ cwd: testDir, dryRun: true });\n\n      expect(result.success).toBe(true);\n      expect(result.message).toContain('dry-run');\n      expect(result.filesChanged).toHaveLength(0);\n\n      // File should not be created\n      expect(existsSync(preCommitPath",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/setup-checks/hooks-check.test.ts",
        "start": 278,
        "end": 285,
        "startLoc": {
          "line": 278,
          "column": 11,
          "position": 2805
        },
        "endLoc": {
          "line": 285,
          "column": 14,
          "position": 2877
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/setup-checks/workflow-check.test.ts",
        "start": 201,
        "end": 208,
        "startLoc": {
          "line": 201,
          "column": 14,
          "position": 2051
        },
        "endLoc": {
          "line": 208,
          "column": 13,
          "position": 2123
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ", async () => {\n      const { safeExecSync } = await import('@vibe-validate/utils');\n      const ghResponse = {\n        number: 42,\n        title: 'test',\n        url: 'https://github.com/user/repo/pull/42',\n        headRefName: 'test',\n        statusCheckRollup: [\n          {\n            name: 'Check 1',\n            status: 'COMPLETED',\n            conclusion: 'SUCCESS',\n            detailsUrl: 'https://github.com/user/repo/actions/runs/1',\n          },\n          {\n            name: 'Check 2',\n            status: 'COMPLETED',\n            conclusion: 'FAILURE'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 205,
        "end": 222,
        "startLoc": {
          "line": 205,
          "column": 66,
          "position": 1690
        },
        "endLoc": {
          "line": 222,
          "column": 10,
          "position": 1819
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 174,
        "end": 191,
        "startLoc": {
          "line": 174,
          "column": 68,
          "position": 1462
        },
        "endLoc": {
          "line": 191,
          "column": 10,
          "position": 1591
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n            detailsUrl: 'https://github.com/user/repo/actions/runs/2',\n          },\n        ],\n      };\n\n      vi.mocked(safeExecSync).mockReturnValue(JSON.stringify(ghResponse));\n\n      const result = await provider.fetchCheckStatus(42);\n\n      expect(result.status).toBe('completed');\n      expect(result.result).toBe('failure'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 222,
        "end": 233,
        "startLoc": {
          "line": 222,
          "column": 10,
          "position": 1820
        },
        "endLoc": {
          "line": 233,
          "column": 10,
          "position": 1904
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/ci-providers/github-actions.test.ts",
        "start": 191,
        "end": 202,
        "startLoc": {
          "line": 191,
          "column": 10,
          "position": 1592
        },
        "endLoc": {
          "line": 202,
          "column": 10,
          "position": 1676
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "const eslintOutput = 'src/foo.ts\\n  45:10  error  Unused variable  no-unused-vars';\n      const result = extractESLintErrors(eslintOutput);\n\n      expect(result.summary).toBe('0 error(s)'); // Actually: \"1 error(s)\"\n    });\n  });\n\n  // FAILURE TYPE 2: TypeScript Type Errors\n  describe('Config › Type Errors', () => {\n    it('should fail when passing invalid config type', async () => {\n      // INTENTIONAL FAILURE: TypeScript type error - passing wrong type\n\n      // Pass invalid path type (runtime type error)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/comprehensive-failures.test.ts",
        "start": 42,
        "end": 54,
        "startLoc": {
          "line": 42,
          "column": 7,
          "position": 179
        },
        "endLoc": {
          "line": 54,
          "column": 47,
          "position": 265
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/comprehensive-failures.test.ts",
        "start": 39,
        "end": 50,
        "startLoc": {
          "line": 39,
          "column": 7,
          "position": 202
        },
        "endLoc": {
          "line": 50,
          "column": 6,
          "position": 287
        }
      }
    },
    {
      "format": "typescript",
      "lines": 41,
      "fragment": "const vitestOutput = `\n❌ packages/core/test/runner.test.ts > ValidationRunner > should fail\n  AssertionError: expected 2 to equal 3\n    at Object.<anonymous> (packages/core/test/runner.test.ts:45:12)\n      `;\n\n      const result = extractVitestErrors(vitestOutput);\n\n      // Snapshot will fail because errors array contains dynamic data\n      expect(result).toMatchSnapshot();\n    });\n  });\n\n  // FAILURE TYPE 7: Async Rejection\n  describe('Core › Async Errors', () => {\n    it('should handle async function that rejects', async () => {\n      // INTENTIONAL FAILURE: Unhandled promise rejection\n\n      // Simulate async operation that rejects (like failed validation)\n      const asyncValidation = async () => {\n        throw new Error('Validation failed: Config schema mismatch');\n      };\n\n      // Don't await or catch - will cause unhandled rejection\n      asyncValidation();\n\n      // This assertion will run before the rejection happens\n      expect(true).toBe(true);\n    });\n  });\n\n  // FAILURE TYPE 8: Import Error\n  describe('Packages › Import Errors', () => {\n    it('should fail when importing non-existent export', async () => {\n      // INTENTIONAL FAILURE: Import error - function doesn't exist\n\n      // @ts-expect-error - INTENTIONAL IMPORT ERROR\n      const { nonExistentFunction } = await import('@vibe-validate/core');\n\n      nonExistentFunction();\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/comprehensive-failures.test.ts",
        "start": 88,
        "end": 128,
        "startLoc": {
          "line": 88,
          "column": 7,
          "position": 484
        },
        "endLoc": {
          "line": 128,
          "column": 2,
          "position": 704
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/comprehensive-failures.test.ts",
        "start": 91,
        "end": 131,
        "startLoc": {
          "line": 91,
          "column": 7,
          "position": 595
        },
        "endLoc": {
          "line": 131,
          "column": 7,
          "position": 815
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "expect(tsResult.summary).toContain('999 errors'); // Wrong\n    });\n  });\n\n  // FAILURE TYPE 10: Nested Describe Blocks (Deep Hierarchy)\n  describe('Deep Nesting', () => {\n    describe('Level 1', () => {\n      describe('Level 2', () => {\n        describe('Level 3', () => { // NOSONAR - Intentional deep nesting to test error extractor handling of nested test structures\n          it('should test deeply nested vibe-validate usage', async () => {\n            // INTENTIONAL FAILURE: Deep in hierarchy\n            \n\n            const input",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/comprehensive-failures.test.ts",
        "start": 151,
        "end": 164,
        "startLoc": {
          "line": 151,
          "column": 7,
          "position": 872
        },
        "endLoc": {
          "line": 164,
          "column": 6,
          "position": 979
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/comprehensive-failures.test.ts",
        "start": 156,
        "end": 167,
        "startLoc": {
          "line": 156,
          "column": 7,
          "position": 1019
        },
        "endLoc": {
          "line": 167,
          "column": 2,
          "position": 1123
        }
      }
    },
    {
      "format": "typescript",
      "lines": 48,
      "fragment": "const input = '\\x1b[31mError\\x1b[0m';\n            const result = stripAnsiCodes(input);\n\n            // Wrong expectation\n            expect(result).toBe('Error with ANSI codes still present');\n          });\n        });\n      });\n    });\n  });\n});\n\n// ============================================================================\n// SIMPLE EDGE CASES (20%)\n// ============================================================================\n\ndescribe('Edge Cases (Simple Code)', () => {\n  let calc: Calculator;\n\n  beforeEach(() => {\n    calc = new Calculator();\n  });\n\n  // FAILURE TYPE 1: Basic Assertion Error\n  describe('Calculator › Assertions', () => {\n    it('should add numbers correctly', () => {\n      // INTENTIONAL FAILURE: Bug in Calculator.add()\n      const result = calc.add(6, 7);\n      expect(result).toBe(13); // Expected: 13, Actual: 14\n    });\n  });\n\n  // FAILURE TYPE 3: Runtime Error (ENOENT)\n  describe('File System › ENOENT', () => {\n    it('should read config file', async () => {\n      // INTENTIONAL FAILURE: File doesn't exist\n      const fs = await import('node:fs/promises');\n      const config = await fs.readFile('/this/file/does/not/exist.json', 'utf8');\n      expect(config).toBeDefined();\n    });\n  });\n\n  // FAILURE TYPE 5: Timeout\n  describe('Performance › Timeout', () => {\n    it('should complete within timeout', async () => {\n      // INTENTIONAL FAILURE: Test times out\n      await new Promise(resolve => setTimeout(resolve, 100000));\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/comprehensive-failures.test.ts",
        "start": 164,
        "end": 211,
        "startLoc": {
          "line": 164,
          "column": 13,
          "position": 977
        },
        "endLoc": {
          "line": 211,
          "column": 2,
          "position": 1324
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/comprehensive-failures.test.ts",
        "start": 169,
        "end": 216,
        "startLoc": {
          "line": 169,
          "column": 13,
          "position": 1141
        },
        "endLoc": {
          "line": 216,
          "column": 7,
          "position": 1488
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "}, 10); // 10ms timeout\n  });\n\n  // FAILURE TYPE 2: Simple Type Error\n  describe('Calculator › Type Errors', () => {\n    it('should return version as string', () => {\n      // INTENTIONAL FAILURE: Returns number, not string\n      const version = calc.getVersion();\n      expect(typeof version).toBe('string');\n    });\n  });\n});",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/comprehensive-failures.test.ts",
        "start": 211,
        "end": 222,
        "startLoc": {
          "line": 211,
          "column": 5,
          "position": 1324
        },
        "endLoc": {
          "line": 222,
          "column": 2,
          "position": 1411
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/comprehensive-failures.test.ts",
        "start": 217,
        "end": 228,
        "startLoc": {
          "line": 217,
          "column": 5,
          "position": 1502
        },
        "endLoc": {
          "line": 228,
          "column": 2,
          "position": 1589
        }
      }
    },
    {
      "format": "typescript",
      "lines": 62,
      "fragment": ", () => {\n  let calc: Calculator;\n\n  beforeEach(() => {\n    calc = new Calculator();\n  });\n\n  describe('Addition', () => {\n    it('should add two small numbers correctly', () => {\n      // INTENTIONAL FAILURE: Calculator.add() has a bug when sum > 10\n      const result = calc.add(6, 7);\n      expect(result).toBe(13); // Expected: 13, Actual: 14 (bug)\n    });\n\n    it('should handle negative numbers', () => {\n      const result = calc.add(-5, 3);\n      expect(result).toBe(-2);\n    });\n  });\n\n  describe('Division', () => {\n    it('should divide numbers correctly', () => {\n      const result = calc.divide(10, 2);\n      expect(result).toBe(5);\n    });\n\n    it('should throw error when dividing by zero', () => {\n      // INTENTIONAL FAILURE: Calculator.divide() doesn't handle division by zero\n      expect(() => calc.divide(10, 0)).toThrow('Division by zero');\n      // This will fail because divide() doesn't throw an error\n    });\n  });\n\n  describe('Multiplication', () => {\n    it('should multiply numbers', () => {\n      // INTENTIONAL FAILURE: Wrong expected value\n      const result = calc.multiply(4, 5);\n      expect(result).toBe(25); // Expected: 25, Actual: 20\n    });\n  });\n\n  describe('Type Errors', () => {\n    it('should return version as string', () => {\n      const version = calc.getVersion();\n      // INTENTIONAL FAILURE: getVersion() returns number, not string\n      expect(typeof version).toBe('string');\n    });\n  });\n\n  describe('Runtime Errors', () => {\n    it('should read config file', async () => {\n      // INTENTIONAL FAILURE: File does not exist (ENOENT)\n      const fs = await import('node:fs/promises');\n      const config = await fs.readFile('/this/file/does/not/exist.json', 'utf8');\n      expect(config).toBeDefined();\n    });\n  });\n\n  describe('Timeout', () => {\n    it('should complete within timeout', async () => {\n      // INTENTIONAL FAILURE: Timeout\n      jest",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/calculator.test.ts",
        "start": 10,
        "end": 71,
        "startLoc": {
          "line": 10,
          "column": 20,
          "position": 20
        },
        "endLoc": {
          "line": 71,
          "column": 5,
          "position": 567
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/calculator.test.ts",
        "start": 12,
        "end": 73,
        "startLoc": {
          "line": 12,
          "column": 22,
          "position": 43
        },
        "endLoc": {
          "line": 73,
          "column": 6,
          "position": 590
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "});\n\n  describe('Snapshot Mismatch', () => {\n    it('should match snapshot', () => {\n      // INTENTIONAL FAILURE: Snapshot will not match\n      const result = {\n        status: 'failed',\n        timestamp: Date.now(),\n        errors: ['Something went wrong'],\n      };\n      expect(result).toMatchSnapshot();\n    });\n  });\n});",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/jest/calculator.test.ts",
        "start": 74,
        "end": 87,
        "startLoc": {
          "line": 74,
          "column": 3,
          "position": 606
        },
        "endLoc": {
          "line": 87,
          "column": 2,
          "position": 703
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/vitest/calculator.test.ts",
        "start": 76,
        "end": 89,
        "startLoc": {
          "line": 76,
          "column": 3,
          "position": 637
        },
        "endLoc": {
          "line": 89,
          "column": 2,
          "position": 734
        }
      }
    },
    {
      "format": "javascript",
      "lines": 17,
      "fragment": ";\nimport { readFileSync } from 'fs';\n\n// ============================================================================\n// REAL VIBE-VALIDATE USAGE (80%)\n// ============================================================================\n\ntest('Extractors › Assertion Errors › should extract TypeScript errors correctly', async (t) => {\n  // FAILURE TYPE 1: Assertion Error\n  // INTENTIONAL FAILURE: Test extractor against known output, expect wrong count\n  const { extractTypeScriptErrors } = await import('@vibe-validate/extractors');\n\n  const tsOutput = 'src/runner.ts(45,10): error TS2345: Type mismatch.';\n  const result = extractTypeScriptErrors(tsOutput);\n\n  // Expected: 1 error, but we assert 5 (INTENTIONAL FAILURE)\n  t.is",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors-test-bed/tests/ava/comprehensive-failures.test.js",
        "start": 12,
        "end": 28,
        "startLoc": {
          "line": 12,
          "column": 6,
          "position": 10
        },
        "endLoc": {
          "line": 28,
          "column": 3,
          "position": 104
        }
      },
      "secondFile": {
        "name": "packages/extractors-test-bed/tests/tape/comprehensive-failures.test.js",
        "start": 12,
        "end": 28,
        "startLoc": {
          "line": 12,
          "column": 7,
          "position": 10
        },
        "endLoc": {
          "line": 28,
          "column": 6,
          "position": 104
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ", () => {\n      const entries: RunCacheNote[] = [\n        {\n          treeHash: 'abc123',\n          command: 'echo test',\n          workdir: '',\n          timestamp: '2025-11-09T22:00:00.000Z',\n          exitCode: 0,\n          durationSecs: 0.1,\n        },\n      ];\n\n      const cleaned = cleanRunCacheEntries(entries);\n\n      expect(cleaned[0]).not.toHaveProperty('workdir'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 30,
        "end": 44,
        "startLoc": {
          "line": 30,
          "column": 30,
          "position": 219
        },
        "endLoc": {
          "line": 44,
          "column": 10,
          "position": 323
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 12,
        "end": 26,
        "startLoc": {
          "line": 12,
          "column": 38,
          "position": 84
        },
        "endLoc": {
          "line": 26,
          "column": 11,
          "position": 188
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", () => {\n      const runCacheEntries: RunCacheNote[] = [\n        {\n          treeHash: 'abc123',\n          command: 'echo test',\n          workdir: '',\n          timestamp: '2025-11-09T22:00:00.000Z',\n          exitCode: 0,\n          durationSecs: 0.1,\n        },\n      ];\n\n      const result = formatTreeHashOutput(\n        'abc123def456',\n        null,\n        runCacheEntries,\n        { includeValidation: false, includeRunCache: false",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 205,
        "end": 221,
        "startLoc": {
          "line": 205,
          "column": 60,
          "position": 1601
        },
        "endLoc": {
          "line": 221,
          "column": 6,
          "position": 1712
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/tree-hash-output.test.ts",
        "start": 127,
        "end": 143,
        "startLoc": {
          "line": 127,
          "column": 49,
          "position": 952
        },
        "endLoc": {
          "line": 143,
          "column": 5,
          "position": 1063
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ", async () => {\n      const { isToolAvailable } = await import('@vibe-validate/utils');\n      vi.mocked(isToolAvailable).mockReturnValue(false);\n      vi.mocked(existsSync).mockImplementation((path) => {\n        return path.toString().includes('gitleaks');\n      });\n\n      const tools = selectToolsToRun",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/secret-scanning.test.ts",
        "start": 232,
        "end": 239,
        "startLoc": {
          "line": 232,
          "column": 94,
          "position": 2020
        },
        "endLoc": {
          "line": 239,
          "column": 17,
          "position": 2110
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/secret-scanning.test.ts",
        "start": 112,
        "end": 120,
        "startLoc": {
          "line": 112,
          "column": 54,
          "position": 898
        },
        "endLoc": {
          "line": 120,
          "column": 26,
          "position": 989
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ");\n      vi.mocked(existsSync).mockImplementation((path) => {\n        return path.toString().includes('gitleaks');\n      });\n\n      const tools = selectToolsToRun(undefined, '/test');\n\n      expect(tools).toHaveLength(1);\n      expect(tools[0].tool).toBe('gitleaks');\n    });\n\n    it('should treat \"autodetect\" keyword as undefined'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/secret-scanning.test.ts",
        "start": 234,
        "end": 245,
        "startLoc": {
          "line": 234,
          "column": 6,
          "position": 2061
        },
        "endLoc": {
          "line": 245,
          "column": 49,
          "position": 2158
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/secret-scanning.test.ts",
        "start": 179,
        "end": 190,
        "startLoc": {
          "line": 179,
          "column": 5,
          "position": 1520
        },
        "endLoc": {
          "line": 190,
          "column": 64,
          "position": 1617
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ");\n\n      expect(consoleWarnSpy).toHaveBeenCalled();\n      const allWarnings = consoleWarnSpy.mock.calls.map(call => call[0]).join('\\n');\n      expect(allWarnings).toContain('secretlint');\n      expect(allWarnings).not",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/secret-scanning.test.ts",
        "start": 395,
        "end": 400,
        "startLoc": {
          "line": 395,
          "column": 5,
          "position": 3624
        },
        "endLoc": {
          "line": 400,
          "column": 4,
          "position": 3688
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/secret-scanning.test.ts",
        "start": 385,
        "end": 390,
        "startLoc": {
          "line": 385,
          "column": 6,
          "position": 3510
        },
        "endLoc": {
          "line": 390,
          "column": 10,
          "position": 3574
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n            uncommittedChanges: false,\n            result: {\n              passed: false,\n              timestamp: '2025-10-21T10:00:00Z',\n              treeHash: 'abc123def456',\n              phases: [],\n            }\n          }\n        ]\n      };\n\n      vi.mocked(git.getGitTreeHash).mockResolvedValue('abc123def456');\n      vi.mocked(history.readHistoryNote).mockResolvedValue(multiRunNote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 171,
        "end": 184,
        "startLoc": {
          "line": 171,
          "column": 12,
          "position": 1337
        },
        "endLoc": {
          "line": 184,
          "column": 13,
          "position": 1423
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 114,
        "end": 127,
        "startLoc": {
          "line": 114,
          "column": 12,
          "position": 947
        },
        "endLoc": {
          "line": 127,
          "column": 11,
          "position": 1033
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ": HistoryNote = {\n        treeHash: 'abc123def456',\n        runs: [\n          {\n            id: 'run-1',\n            timestamp: '2025-10-21T10:00:00Z',\n            duration: 5000,\n            passed: false,\n            branch: 'main',\n            headCommit: 'commit123',\n            uncommittedChanges: false,\n            result: {\n              passed: false,\n              timestamp: '2025-10-21T10:00:00Z',\n              treeHash: 'abc123def456',\n              phases: [\n                {",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 198,
        "end": 214,
        "startLoc": {
          "line": 198,
          "column": 22,
          "position": 1518
        },
        "endLoc": {
          "line": 214,
          "column": 2,
          "position": 1625
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 105,
        "end": 120,
        "startLoc": {
          "line": 105,
          "column": 11,
          "position": 883
        },
        "endLoc": {
          "line": 120,
          "column": 2,
          "position": 988
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": "const failedNote: HistoryNote = {\n        treeHash: 'abc123def456',\n        runs: [\n          {\n            id: 'run-1',\n            timestamp: '2025-10-21T10:00:00Z',\n            duration: 5000,\n            passed: false,\n            branch: 'main',\n            headCommit: 'commit123',\n            uncommittedChanges: false,\n            result: {\n              passed: false,\n              timestamp: '2025-10-21T10:00:00Z',\n              treeHash: 'abc123def456',\n              phases: [],\n            }\n          }\n        ]\n      };\n\n      vi.mocked(git.getGitTreeHash).mockResolvedValue('abc123def456');\n      vi.mocked(history.readHistoryNote).mockResolvedValue(failedNote);\n\n      await expect(checkValidationStatus(mockConfig,",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 259,
        "end": 283,
        "startLoc": {
          "line": 259,
          "column": 7,
          "position": 2042
        },
        "endLoc": {
          "line": 283,
          "column": 2,
          "position": 2208
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 105,
        "end": 129,
        "startLoc": {
          "line": 105,
          "column": 7,
          "position": 880
        },
        "endLoc": {
          "line": 129,
          "column": 2,
          "position": 1046
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ": HistoryNote = {\n        treeHash: 'abc123def456',\n        runs: [\n          {\n            id: 'run-1',\n            timestamp: '2025-10-21T09:00:00Z',\n            duration: 5000,\n            passed: false,\n            branch: 'main',\n            headCommit: 'commit123',\n            uncommittedChanges: false,\n            result: {\n              passed: false,\n              timestamp: '2025-10-21T09:00:00Z',\n              treeHash: 'abc123def456',\n              phases: [],\n            }\n          },\n          {\n            id: 'run-2',\n            timestamp: '2025-10-21T10:00:00Z',\n            duration: 3000",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 344,
        "end": 365,
        "startLoc": {
          "line": 344,
          "column": 10,
          "position": 2679
        },
        "endLoc": {
          "line": 365,
          "column": 5,
          "position": 2815
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 147,
        "end": 168,
        "startLoc": {
          "line": 147,
          "column": 13,
          "position": 1179
        },
        "endLoc": {
          "line": 168,
          "column": 5,
          "position": 1315
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ": HistoryNote = {\n        treeHash: 'abc123def456',\n        runs: [\n          {\n            id: 'run-1',\n            timestamp: '2025-10-21T10:00:00Z',\n            duration: 5000,\n            passed: true,\n            branch: 'main',\n            headCommit: 'commit123',\n            uncommittedChanges: false,\n            result: {\n              passed: true,\n              timestamp: '2025-10-21T10:00:00Z',\n              treeHash: 'abc123def456',\n              phases: [\n                {",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 410,
        "end": 426,
        "startLoc": {
          "line": 410,
          "column": 21,
          "position": 3112
        },
        "endLoc": {
          "line": 426,
          "column": 2,
          "position": 3219
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 299,
        "end": 314,
        "startLoc": {
          "line": 299,
          "column": 11,
          "position": 2362
        },
        "endLoc": {
          "line": 314,
          "column": 2,
          "position": 2467
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ",\n              timestamp: '2025-10-21T10:00:00Z',\n              treeHash: 'abc123def456',\n              phases: [\n                {\n                  name: 'Pre-Qualification',\n                  durationSecs: 2.5,\n                  passed: true,\n                  steps: [\n                    { name: 'TypeScript', passed: true, durationSecs: 1.2 },\n                    { name: 'ESLint', passed: true, durationSecs: 1.3 }\n                  ]\n                },\n                {\n                  name: 'Testing',\n                  durationSecs: 2.5,\n                  passed: true",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 422,
        "end": 438,
        "startLoc": {
          "line": 422,
          "column": 5,
          "position": 3196
        },
        "endLoc": {
          "line": 438,
          "column": 5,
          "position": 3321
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 210,
        "end": 226,
        "startLoc": {
          "line": 210,
          "column": 6,
          "position": 1602
        },
        "endLoc": {
          "line": 226,
          "column": 6,
          "position": 1727
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ": HistoryNote = {\n        treeHash: 'abc123def456',\n        runs: [\n          {\n            id: 'run-1',\n            timestamp: '2025-10-21T10:00:00Z',\n            duration: 5000,\n            passed: true,\n            branch: 'main',\n            headCommit: 'commit123',\n            uncommittedChanges: false,\n            result: {\n              passed: true,\n              timestamp: '2025-10-21T10:00:00Z',\n              treeHash: 'abc123def456',\n              phases: undefined",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 460,
        "end": 475,
        "startLoc": {
          "line": 460,
          "column": 19,
          "position": 3475
        },
        "endLoc": {
          "line": 475,
          "column": 10,
          "position": 3579
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 299,
        "end": 314,
        "startLoc": {
          "line": 299,
          "column": 11,
          "position": 2362
        },
        "endLoc": {
          "line": 314,
          "column": 2,
          "position": 2466
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ");\n\n      // Should output YAML to stdout (not console.log)\n      expect(stdoutWriteSpy).toHaveBeenCalled();\n      // First call is separator, second call is YAML content\n      expect(stdoutWriteSpy.mock.calls[0][0]).toBe('---\\n');\n      const yamlOutput = stdoutWriteSpy.mock.calls[1][0] as string;\n      expect(yamlOutput).toContain('exists: false'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 535,
        "end": 542,
        "startLoc": {
          "line": 535,
          "column": 18,
          "position": 4088
        },
        "endLoc": {
          "line": 542,
          "column": 16,
          "position": 4163
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 283,
        "end": 290,
        "startLoc": {
          "line": 283,
          "column": 18,
          "position": 2219
        },
        "endLoc": {
          "line": 290,
          "column": 16,
          "position": 2294
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": "expect(stdoutWriteSpy).toHaveBeenCalled();\n      // First call is separator, second call is YAML content\n      expect(stdoutWriteSpy.mock.calls[0][0]).toBe('---\\n');\n      const yamlOutput = stdoutWriteSpy.mock.calls[1][0] as string;\n      expect(yamlOutput).toContain('exists: false');\n      expect(yamlOutput).toContain('treeHash: abc123def456'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 556,
        "end": 561,
        "startLoc": {
          "line": 556,
          "column": 7,
          "position": 4288
        },
        "endLoc": {
          "line": 561,
          "column": 25,
          "position": 4367
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 286,
        "end": 543,
        "startLoc": {
          "line": 286,
          "column": 7,
          "position": 2227
        },
        "endLoc": {
          "line": 543,
          "column": 9,
          "position": 4175
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n\n      await expect(checkValidationStatus(mockConfig, true)).rejects.toThrow('process.exit(2)');\n\n      // Should output YAML to stdout\n      expect(stdoutWriteSpy).toHaveBeenCalled();\n      // First call is separator, second call is YAML content\n      expect(stdoutWriteSpy.mock.calls[0][0]).toBe('---\\n');\n      const yamlOutput = stdoutWriteSpy.mock.calls[1][0] as string;\n      expect(yamlOutput).toContain('exists: false');\n      expect(yamlOutput).toContain('treeHash: abc123def456');\n\n      // Should NOT use console.log for human-readable messages",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 570,
        "end": 582,
        "startLoc": {
          "line": 570,
          "column": 5,
          "position": 4456
        },
        "endLoc": {
          "line": 582,
          "column": 58,
          "position": 4572
        }
      },
      "secondFile": {
        "name": "packages/cli/test/utils/check-validation.test.ts",
        "start": 551,
        "end": 562,
        "startLoc": {
          "line": 551,
          "column": 2,
          "position": 4257
        },
        "endLoc": {
          "line": 562,
          "column": 7,
          "position": 4372
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n          },\n        ],\n      });\n\n      vi.mocked(safeExecSync).mockReturnValue(Buffer.from(mockChecksResponse));\n\n      const results = await fetcher.fetchChecks(123);\n\n      expect(results).toHaveLength(2);\n      expect(results[0]).toMatchObject({\n        type: 'external'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 230,
        "end": 241,
        "startLoc": {
          "line": 230,
          "column": 47,
          "position": 1795
        },
        "endLoc": {
          "line": 241,
          "column": 11,
          "position": 1878
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 191,
        "end": 202,
        "startLoc": {
          "line": 191,
          "column": 23,
          "position": 1519
        },
        "endLoc": {
          "line": 202,
          "column": 16,
          "position": 1602
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ", async () => {\n      const mockChecksResponse = JSON.stringify({\n        statusCheckRollup: [\n          {\n            __typename: 'CheckRun',\n            name: 'CI / Build',\n            status: 'COMPLETED',\n            conclusion: 'SUCCESS',\n            detailsUrl: 'https://github.com/test/test/actions/runs/12345',\n            startedAt: '2025-12-16T10:00:00Z',\n            completedAt: '2025-12-16T10:05:00Z',\n          },\n          {\n            __typename: 'StatusContext'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 256,
        "end": 269,
        "startLoc": {
          "line": 256,
          "column": 34,
          "position": 1977
        },
        "endLoc": {
          "line": 269,
          "column": 16,
          "position": 2070
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 172,
        "end": 185,
        "startLoc": {
          "line": 172,
          "column": 50,
          "position": 1383
        },
        "endLoc": {
          "line": 185,
          "column": 11,
          "position": 1476
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ",\n          },\n        ],\n      });\n\n      vi.mocked(safeExecSync).mockReturnValue(Buffer.from(mockChecksResponse));\n\n      const results = await fetcher.fetchChecks(123);\n\n      expect(results).toHaveLength(2);\n      expect(results[0].",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 272,
        "end": 282,
        "startLoc": {
          "line": 272,
          "column": 43,
          "position": 2092
        },
        "endLoc": {
          "line": 282,
          "column": 2,
          "position": 2165
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 191,
        "end": 201,
        "startLoc": {
          "line": 191,
          "column": 23,
          "position": 1519
        },
        "endLoc": {
          "line": 201,
          "column": 2,
          "position": 1592
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ";\n\n      const mockCommitCount = '1';\n\n      // Mock git package functions instead of safeExecSync\n      vi.spyOn(gitPackage, 'getDiffStats').mockReturnValue(mockDiffOutput);\n      vi.spyOn(gitPackage, 'getCommitCount').mockReturnValue(mockCommitCount);\n\n      const changes = await fetcher.fetchFileChanges(123);\n\n      expect(changes.top_files?",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 427,
        "end": 437,
        "startLoc": {
          "line": 427,
          "column": 9,
          "position": 3436
        },
        "endLoc": {
          "line": 437,
          "column": 2,
          "position": 3512
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 412,
        "end": 421,
        "startLoc": {
          "line": 412,
          "column": 2,
          "position": 3310
        },
        "endLoc": {
          "line": 421,
          "column": 2,
          "position": 3385
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ";\n\n      // Mock git package functions instead of safeExecSync\n      vi.spyOn(gitPackage, 'getDiffStats').mockReturnValue(mockDiffOutput);\n      vi.spyOn(gitPackage, 'getCommitCount').mockReturnValue(mockCommitCount);\n\n      const changes = await fetcher.fetchFileChanges(123);\n\n      expect(changes).toEqual({\n        files_changed: 0",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 442,
        "end": 451,
        "startLoc": {
          "line": 442,
          "column": 4,
          "position": 3566
        },
        "endLoc": {
          "line": 451,
          "column": 2,
          "position": 3639
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 389,
        "end": 398,
        "startLoc": {
          "line": 389,
          "column": 4,
          "position": 3005
        },
        "endLoc": {
          "line": 398,
          "column": 2,
          "position": 3078
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ",\n        baseRefName: 'main',\n        author: { login: 'testuser' },\n        isDraft: false,\n        mergeable: 'MERGEABLE',\n        mergeStateStatus: 'CLEAN',\n        labels: [],\n        closingIssuesReferences: { nodes: [] },\n      });\n\n      vi.mocked(safeExecSync).mockReturnValue(mockResponse",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 594,
        "end": 604,
        "startLoc": {
          "line": 594,
          "column": 10,
          "position": 4856
        },
        "endLoc": {
          "line": 604,
          "column": 13,
          "position": 4939
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/github-fetcher.test.ts",
        "start": 145,
        "end": 155,
        "startLoc": {
          "line": 145,
          "column": 20,
          "position": 1154
        },
        "endLoc": {
          "line": 155,
          "column": 7,
          "position": 1237
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ";\n\n      const result = await detector.detectAndExtract(check, logs);\n\n      expect(result).toBeDefined();\n      expect(result?.summary).toBe('2 test failure(s)');\n      expect(result?.totalErrors).toBe(2);\n      expect(result?.errors).toHaveLength(2);\n      expect(result?.errors",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 172,
        "end": 180,
        "startLoc": {
          "line": 172,
          "column": 101,
          "position": 825
        },
        "endLoc": {
          "line": 180,
          "column": 7,
          "position": 911
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 59,
        "end": 67,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 210
        },
        "endLoc": {
          "line": 67,
          "column": 9,
          "position": 296
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ";\n\n      const result = await detector.detectAndExtract(check, logs);\n\n      expect(result).toBeDefined();\n      expect(result?.summary).toBe('2 test failure(s)');\n      expect(result?.totalErrors).toBe(2);\n      expect(result?.errors).toHaveLength(2);\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 484,
        "end": 492,
        "startLoc": {
          "line": 484,
          "column": 2,
          "position": 2867
        },
        "endLoc": {
          "line": 492,
          "column": 2,
          "position": 2948
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 59,
        "end": 67,
        "startLoc": {
          "line": 59,
          "column": 2,
          "position": 210
        },
        "endLoc": {
          "line": 67,
          "column": 7,
          "position": 291
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ",\n        totalErrors: 1,\n        errors: [{ message: 'Error' }],\n      });\n\n      const result = await detector.detectAndExtract(check, logs);\n\n      // Should fall back to non-matrix mode\n      expect(result).toBeDefined();\n      expect(autoDetectAndExtract).toHaveBeenCalled();\n    });\n  });\n}",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 543,
        "end": 555,
        "startLoc": {
          "line": 543,
          "column": 16,
          "position": 3355
        },
        "endLoc": {
          "line": 555,
          "column": 2,
          "position": 3442
        }
      },
      "secondFile": {
        "name": "packages/cli/test/services/extraction-mode-detector.test.ts",
        "start": 134,
        "end": 147,
        "startLoc": {
          "line": 134,
          "column": 10,
          "position": 646
        },
        "endLoc": {
          "line": 147,
          "column": 9,
          "position": 735
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "{\n          number: 90,\n          title: 'fix: Improve Windows platform independence',\n          url: 'https://github.com/jdutton/vibe-validate/pull/90',\n          branch: 'fix/windows-shell-independence',\n          base_branch: 'main',\n          author: 'jdutton',\n          draft: false,\n          mergeable: true,\n          merge_state_status: 'UNSTABLE',\n          labels: ['bug', 'windows'],\n          linked_issues: [\n            {\n              number: 86,\n              title: 'Windows CI failures',\n              url: 'https://github.com/jdutton/vibe-validate/issues/86',\n            },\n          ],\n        },",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 590,
        "end": 608,
        "startLoc": {
          "line": 590,
          "column": 2,
          "position": 4526
        },
        "endLoc": {
          "line": 608,
          "column": 2,
          "position": 4643
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 97,
        "end": 115,
        "startLoc": {
          "line": 97,
          "column": 2,
          "position": 945
        },
        "endLoc": {
          "line": 115,
          "column": 2,
          "position": 1062
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "{\n              name: 'Validation (windows-latest, 22)',\n              status: 'completed',\n              conclusion: 'failure',\n              run_id: 20275647370,\n              workflow: 'Validation Pipeline',\n              started_at: '2025-12-16T16:43:17Z',\n              duration: '2m15s',\n              log_command: 'gh run view 20275647370 --log',\n              extraction: {\n                summary: '1 test failure',\n                totalErrors: 1,\n                errors: [\n                  {\n                    file: 'test.ts',\n                    line: 42,\n                    message: 'Expected success',\n                  },\n                ],\n              },\n            },",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 621,
        "end": 641,
        "startLoc": {
          "line": 621,
          "column": 13,
          "position": 4724
        },
        "endLoc": {
          "line": 641,
          "column": 2,
          "position": 4846
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 191,
        "end": 211,
        "startLoc": {
          "line": 191,
          "column": 2,
          "position": 1631
        },
        "endLoc": {
          "line": 211,
          "column": 2,
          "position": 1753
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "= {\n        pr: {\n          number: 90,\n          title: 'Test',\n          url: 'https://github.com/org/repo/pull/90',\n          branch: 'feature',\n          base_branch: 'main',\n          author: 'user',\n          draft: false,\n          mergeable: true,\n          merge_state_status: 'CLEAN',\n          labels: [],\n        },\n        status: 'passed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 740,
        "end": 753,
        "startLoc": {
          "line": 740,
          "column": 2,
          "position": 5489
        },
        "endLoc": {
          "line": 753,
          "column": 9,
          "position": 5578
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/watch-pr-result.test.ts",
        "start": 696,
        "end": 709,
        "startLoc": {
          "line": 696,
          "column": 2,
          "position": 5177
        },
        "endLoc": {
          "line": 709,
          "column": 10,
          "position": 5266
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n\n\t\t\t\t// Verify first error has proper structure\n\t\t\t\tconst firstError = extraction.errors[0];\n\t\t\t\texpect(firstError).toMatchObject({\n\t\t\t\t\tfile: expect.any(String),\n\t\t\t\t\tline: expect.any(Number),\n\t\t\t\t\tmessage: expect.any(String),\n\t\t\t\t});\n\n\t\t\t\t// Verify metadata indicates Vitest detection",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/integration/watch-pr-extraction.integration.test.ts",
        "start": 107,
        "end": 117,
        "startLoc": {
          "line": 107,
          "column": 10,
          "position": 808
        },
        "endLoc": {
          "line": 117,
          "column": 46,
          "position": 883
        }
      },
      "secondFile": {
        "name": "packages/cli/test/integration/watch-pr-extraction.integration.test.ts",
        "start": 76,
        "end": 86,
        "startLoc": {
          "line": 76,
          "column": 13,
          "position": 574
        },
        "endLoc": {
          "line": 86,
          "column": 50,
          "position": 649
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Minimal YAML output",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 151,
        "end": 161,
        "startLoc": {
          "line": 151,
          "column": 7,
          "position": 1508
        },
        "endLoc": {
          "line": 161,
          "column": 23,
          "position": 1610
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 109,
        "end": 119,
        "startLoc": {
          "line": 109,
          "column": 7,
          "position": 1121
        },
        "endLoc": {
          "line": 119,
          "column": 46,
          "position": 1223
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state', '--verbose'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Verbose output includes status indicator and explanatory text",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 166,
        "end": 176,
        "startLoc": {
          "line": 166,
          "column": 7,
          "position": 1653
        },
        "endLoc": {
          "line": 176,
          "column": 65,
          "position": 1758
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 85,
        "end": 95,
        "startLoc": {
          "line": 85,
          "column": 7,
          "position": 835
        },
        "endLoc": {
          "line": 95,
          "column": 58,
          "position": 940
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ",\n        phases: [],\n      };\n\n      const mockHistoryNote: HistoryNote = {\n        treeHash: mockTreeHash,\n        runs: [\n          {\n            branch: 'main',\n            timestamp: '2025-10-16T12:00:00.000Z',\n            result: mockResult,\n          },\n        ],\n      };\n\n      vi.mocked(hasHistoryForTree).mockResolvedValue(true);\n      vi.mocked(readHistoryNote).mockResolvedValue(mockHistoryNote);\n    });\n\n    it('should display failed state (minimal output)'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 188,
        "end": 207,
        "startLoc": {
          "line": 188,
          "column": 24,
          "position": 1870
        },
        "endLoc": {
          "line": 207,
          "column": 47,
          "position": 1984
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 131,
        "end": 150,
        "startLoc": {
          "line": 131,
          "column": 13,
          "position": 1381
        },
        "endLoc": {
          "line": 150,
          "column": 47,
          "position": 1495
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async () => {\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Minimal YAML output\n      expect(console.log).toHaveBeenCalledWith(expect.stringContaining('passed: false'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 207,
        "end": 219,
        "startLoc": {
          "line": 207,
          "column": 47,
          "position": 1985
        },
        "endLoc": {
          "line": 219,
          "column": 16,
          "position": 2115
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 150,
        "end": 162,
        "startLoc": {
          "line": 150,
          "column": 47,
          "position": 1496
        },
        "endLoc": {
          "line": 162,
          "column": 15,
          "position": 1626
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async () => {\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state', '--verbose'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Verbose output includes status indicator and explanatory text\n      expect(console.log).toHaveBeenCalledWith(expect.stringContaining('FAILED'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 223,
        "end": 235,
        "startLoc": {
          "line": 223,
          "column": 47,
          "position": 2149
        },
        "endLoc": {
          "line": 235,
          "column": 9,
          "position": 2282
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 165,
        "end": 177,
        "startLoc": {
          "line": 165,
          "column": 47,
          "position": 1641
        },
        "endLoc": {
          "line": 177,
          "column": 9,
          "position": 1774
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state', '--verbose'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Verbose mode shows full output (no truncation)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 260,
        "end": 272,
        "startLoc": {
          "line": 260,
          "column": 16,
          "position": 2472
        },
        "endLoc": {
          "line": 272,
          "column": 50,
          "position": 2582
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 83,
        "end": 95,
        "startLoc": {
          "line": 83,
          "column": 6,
          "position": 830
        },
        "endLoc": {
          "line": 95,
          "column": 58,
          "position": 940
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Should include structured error message",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 280,
        "end": 292,
        "startLoc": {
          "line": 280,
          "column": 2,
          "position": 2677
        },
        "endLoc": {
          "line": 292,
          "column": 43,
          "position": 2784
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 2,
          "position": 1116
        },
        "endLoc": {
          "line": 119,
          "column": 46,
          "position": 1223
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state', '--verbose'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Should include structured error + explanatory text",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 299,
        "end": 311,
        "startLoc": {
          "line": 299,
          "column": 2,
          "position": 2910
        },
        "endLoc": {
          "line": 311,
          "column": 54,
          "position": 3020
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 83,
        "end": 95,
        "startLoc": {
          "line": 83,
          "column": 6,
          "position": 830
        },
        "endLoc": {
          "line": 95,
          "column": 58,
          "position": 940
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "));\n\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(1",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 319,
        "end": 327,
        "startLoc": {
          "line": 319,
          "column": 17,
          "position": 3164
        },
        "endLoc": {
          "line": 327,
          "column": 2,
          "position": 3260
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 280,
        "end": 115,
        "startLoc": {
          "line": 280,
          "column": 23,
          "position": 2676
        },
        "endLoc": {
          "line": 115,
          "column": 2,
          "position": 1211
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ");\n\n      stateCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['state'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof error === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }\n      }\n\n      // Should show the newer result (passed: true)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 372,
        "end": 384,
        "startLoc": {
          "line": 372,
          "column": 16,
          "position": 3555
        },
        "endLoc": {
          "line": 384,
          "column": 47,
          "position": 3662
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 107,
        "end": 119,
        "startLoc": {
          "line": 107,
          "column": 2,
          "position": 1116
        },
        "endLoc": {
          "line": 119,
          "column": 46,
          "position": 1223
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ";\nimport { setupCommanderTest, type CommanderTestEnv } from '../helpers/commander-test-setup.js';\n\n\n// Mock dependencies\nvi.mock('@vibe-validate/git', () => ({\n  getGitTreeHash: vi.fn(),\n}));\n\nvi.mock('@vibe-validate/history', () => ({\n  hasHistoryForTree: vi.fn(),\n  readHistoryNote: vi.fn(),\n}));\n\n// Helper to get all console.log output as strings",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 6,
        "end": 20,
        "startLoc": {
          "line": 6,
          "column": 33,
          "position": 84
        },
        "endLoc": {
          "line": 20,
          "column": 51,
          "position": 183
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 7,
        "end": 21,
        "startLoc": {
          "line": 7,
          "column": 30,
          "position": 99
        },
        "endLoc": {
          "line": 21,
          "column": 9,
          "position": 198
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": "beforeEach(() => {\n    env = setupCommanderTest();\n\n    // Default mock implementations\n    vi.mocked(getGitTreeHash).mockResolvedValue(mockTreeHash);\n    vi.mocked(hasHistoryForTree).mockResolvedValue(false);\n    vi.mocked(readHistoryNote).mockResolvedValue(null);\n  });\n\n  afterEach(() => {\n    env.cleanup();\n    vi.restoreAllMocks();\n  });\n\n  describe('command registration', () => {\n    it('should register snapshot command with correct name'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 64,
        "end": 79,
        "startLoc": {
          "line": 64,
          "column": 3,
          "position": 578
        },
        "endLoc": {
          "line": 79,
          "column": 53,
          "position": 697
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/state.test.ts",
        "start": 25,
        "end": 40,
        "startLoc": {
          "line": 25,
          "column": 3,
          "position": 231
        },
        "endLoc": {
          "line": 40,
          "column": 50,
          "position": 350
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "));\n\n      snapshotCommand(env.program);\n      const exitCode = await runSnapshotCommand();\n      expect(exitCode).toBe(0);\n\n      const output = getLogOutput();\n      expect(output.some(call => call.includes('Validation Status:') && call.includes('Failed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 143,
        "end": 150,
        "startLoc": {
          "line": 143,
          "column": 6,
          "position": 1485
        },
        "endLoc": {
          "line": 150,
          "column": 9,
          "position": 1562
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 130,
        "end": 137,
        "startLoc": {
          "line": 130,
          "column": 5,
          "position": 1323
        },
        "endLoc": {
          "line": 137,
          "column": 9,
          "position": 1400
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "));\n      snapshotCommand(env.program);\n\n      const exitCode = await runSnapshotCommand();\n      expect(exitCode).toBe(1);\n      expect(console.error).toHaveBeenCalledWith(\n        expect.stringContaining('Failed to get snapshot'),\n        expect.any(Error)\n      );\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 195,
        "end": 205,
        "startLoc": {
          "line": 195,
          "column": 25,
          "position": 2085
        },
        "endLoc": {
          "line": 205,
          "column": 2,
          "position": 2163
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/snapshot.test.ts",
        "start": 182,
        "end": 193,
        "startLoc": {
          "line": 182,
          "column": 23,
          "position": 1963
        },
        "endLoc": {
          "line": 193,
          "column": 3,
          "position": 2042
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ".exitCode);\n      console.log('  Errors extracted:', parsed.extraction?.errors?.length || 0);\n      console.log('  Summary:', parsed.extraction?.summary);\n      if (parsed.extraction?.errors?.length) {\n        console.log('  First error:', JSON.stringify(parsed.extraction.errors[0], null, 2));\n      } else",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 132,
        "end": 137,
        "startLoc": {
          "line": 132,
          "column": 2,
          "position": 947
        },
        "endLoc": {
          "line": 137,
          "column": 5,
          "position": 1043
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 92,
        "end": 98,
        "startLoc": {
          "line": 92,
          "column": 7,
          "position": 616
        },
        "endLoc": {
          "line": 98,
          "column": 8,
          "position": 713
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n      console.log('  Exit code:', parsed.exitCode);\n      console.log('  Errors extracted:', parsed.extraction?.errors?.length || 0);\n      console.log('  Summary:', parsed.extraction?.summary);\n      if (parsed.extraction?.errors?.length) {\n        console.log('  First error:', JSON.stringify(parsed.extraction.errors[0], null, 2));\n      } else {\n        console.log('  Raw output (first 800 chars):', parsed.rawOutput?.substring(0, 800));\n      }\n\n      // Should detect Playwright and extract errors",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 170,
        "end": 180,
        "startLoc": {
          "line": 170,
          "column": 42,
          "position": 1268
        },
        "endLoc": {
          "line": 180,
          "column": 47,
          "position": 1408
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/run.system.test.ts",
        "start": 91,
        "end": 141,
        "startLoc": {
          "line": 91,
          "column": 38,
          "position": 604
        },
        "endLoc": {
          "line": 141,
          "column": 41,
          "position": 1075
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ": vi.fn(),\n  };\n});\n\n// Mock the config loader\nvi.mock('../../src/utils/config-loader.js', async () => {\n  const actual = await vi.importActual<typeof configLoader>('../../src/utils/config-loader.js');\n  return {\n    ...actual,\n    loadConfig: vi.fn(),\n  };\n});\n\ndescribe",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 57,
        "end": 70,
        "startLoc": {
          "line": 57,
          "column": 19,
          "position": 554
        },
        "endLoc": {
          "line": 70,
          "column": 9,
          "position": 642
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/sync-check.test.ts",
        "start": 13,
        "end": 26,
        "startLoc": {
          "line": 13,
          "column": 16,
          "position": 139
        },
        "endLoc": {
          "line": 26,
          "column": 46,
          "position": 227
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "};\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      await runPreCommit(0);\n\n      // Should default to origin/main",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 191,
        "end": 209,
        "startLoc": {
          "line": 191,
          "column": 7,
          "position": 1643
        },
        "endLoc": {
          "line": 209,
          "column": 33,
          "position": 1769
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 160,
        "end": 178,
        "startLoc": {
          "line": 160,
          "column": 7,
          "position": 1429
        },
        "endLoc": {
          "line": 178,
          "column": 76,
          "position": 1555
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "autoSync: false,\n          warnIfBehind: true,\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      await runPreCommit(0);\n\n      // Should use origin/master (custom branch with default origin)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 224,
        "end": 245,
        "startLoc": {
          "line": 224,
          "column": 11,
          "position": 1872
        },
        "endLoc": {
          "line": 245,
          "column": 64,
          "position": 2016
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 157,
        "end": 178,
        "startLoc": {
          "line": 157,
          "column": 11,
          "position": 1411
        },
        "endLoc": {
          "line": 178,
          "column": 76,
          "position": 1555
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ",\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      preCommitCommand",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 266,
        "end": 284,
        "startLoc": {
          "line": 266,
          "column": 2,
          "position": 2165
        },
        "endLoc": {
          "line": 284,
          "column": 17,
          "position": 2288
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 158,
        "end": 176,
        "startLoc": {
          "line": 158,
          "column": 5,
          "position": 1422
        },
        "endLoc": {
          "line": 176,
          "column": 6,
          "position": 1545
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "},\n          },\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n\n      // Mock secret scanning to fail (simulating secrets found)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 310,
        "end": 323,
        "startLoc": {
          "line": 310,
          "column": 13,
          "position": 2507
        },
        "endLoc": {
          "line": 323,
          "column": 59,
          "position": 2588
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 265,
        "end": 169,
        "startLoc": {
          "line": 265,
          "column": 13,
          "position": 2160
        },
        "endLoc": {
          "line": 169,
          "column": 3,
          "position": 1497
        }
      }
    },
    {
      "format": "typescript",
      "lines": 30,
      "fragment": "},\n          },\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0); // Should succeed\n        }\n      }\n\n      // Validation should run since scanning was skipped",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 349,
        "end": 378,
        "startLoc": {
          "line": 349,
          "column": 13,
          "position": 2787
        },
        "endLoc": {
          "line": 378,
          "column": 52,
          "position": 3019
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 265,
        "end": 294,
        "startLoc": {
          "line": 265,
          "column": 13,
          "position": 2160
        },
        "endLoc": {
          "line": 294,
          "column": 60,
          "position": 2392
        }
      }
    },
    {
      "format": "typescript",
      "lines": 29,
      "fragment": "},\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0); // Should succeed\n        }\n      }\n\n      // Validation should run since no scanning configured",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 392,
        "end": 420,
        "startLoc": {
          "line": 392,
          "column": 11,
          "position": 3115
        },
        "endLoc": {
          "line": 420,
          "column": 54,
          "position": 3343
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 266,
        "end": 294,
        "startLoc": {
          "line": 266,
          "column": 11,
          "position": 2164
        },
        "endLoc": {
          "line": 294,
          "column": 60,
          "position": 2392
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "},\n          },\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n\n      // Mock tool execution to fail (simulating tool not found)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 436,
        "end": 449,
        "startLoc": {
          "line": 436,
          "column": 13,
          "position": 3458
        },
        "endLoc": {
          "line": 449,
          "column": 59,
          "position": 3539
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 265,
        "end": 169,
        "startLoc": {
          "line": 265,
          "column": 13,
          "position": 2160
        },
        "endLoc": {
          "line": 169,
          "column": 3,
          "position": 1497
        }
      }
    },
    {
      "format": "typescript",
      "lines": 30,
      "fragment": "},\n          },\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0); // Should succeed\n        }\n      }\n\n      // Validation should run after successful scan",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 477,
        "end": 506,
        "startLoc": {
          "line": 477,
          "column": 13,
          "position": 3752
        },
        "endLoc": {
          "line": 506,
          "column": 47,
          "position": 3984
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 265,
        "end": 294,
        "startLoc": {
          "line": 265,
          "column": 13,
          "position": 2160
        },
        "endLoc": {
          "line": 294,
          "column": 60,
          "position": 2392
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ",\n            },\n          },\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n\n      // Mock secret scanning to fail (simulating secrets found)\n      const error: any = new Error('Command failed');\n      error.stdout = 'Found: AWS_SECRET_KEY=abc123'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 521,
        "end": 537,
        "startLoc": {
          "line": 521,
          "column": 48,
          "position": 4094
        },
        "endLoc": {
          "line": 537,
          "column": 31,
          "position": 4205
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 476,
        "end": 325,
        "startLoc": {
          "line": 476,
          "column": 38,
          "position": 3749
        },
        "endLoc": {
          "line": 325,
          "column": 3,
          "position": 2615
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ", async () => {\n      const mockConfig: VibeValidateConfig = {\n        version: '1.0',\n        validation: {\n          phases: [\n            {\n              name: 'Test',\n              steps: [{ name: 'Test Step', command: 'echo test' }]\n            }\n          ]\n        }\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        hasRemote: true,\n        behindBy: 0,\n        aheadBy: 0,\n      });\n\n      // Mock cache MISS scenario",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 626,
        "end": 647,
        "startLoc": {
          "line": 626,
          "column": 42,
          "position": 4895
        },
        "endLoc": {
          "line": 647,
          "column": 28,
          "position": 5047
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 563,
        "end": 584,
        "startLoc": {
          "line": 563,
          "column": 52,
          "position": 4468
        },
        "endLoc": {
          "line": 584,
          "column": 27,
          "position": 4620
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ");\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0); // Should succeed\n        }\n      }\n\n      expect",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 712,
        "end": 723,
        "startLoc": {
          "line": 712,
          "column": 5,
          "position": 5500
        },
        "endLoc": {
          "line": 723,
          "column": 7,
          "position": 5608
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 282,
        "end": 294,
        "startLoc": {
          "line": 282,
          "column": 2,
          "position": 2283
        },
        "endLoc": {
          "line": 294,
          "column": 60,
          "position": 2392
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ");\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(1",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 728,
        "end": 735,
        "startLoc": {
          "line": 728,
          "column": 6,
          "position": 5660
        },
        "endLoc": {
          "line": 735,
          "column": 2,
          "position": 5754
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 282,
        "end": 290,
        "startLoc": {
          "line": 282,
          "column": 2,
          "position": 2283
        },
        "endLoc": {
          "line": 290,
          "column": 2,
          "position": 2378
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ");\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(0);\n        }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 756,
        "end": 777,
        "startLoc": {
          "line": 756,
          "column": 2,
          "position": 5938
        },
        "endLoc": {
          "line": 777,
          "column": 2,
          "position": 6132
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 162,
        "end": 290,
        "startLoc": {
          "line": 162,
          "column": 11,
          "position": 1446
        },
        "endLoc": {
          "line": 290,
          "column": 18,
          "position": 2382
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", async () => {\n      const mockConfig: VibeValidateConfig = {\n        version: '1.0',\n        validation: {\n          phases: [],\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.getGitTreeHash).mockResolvedValue('abc123def456');\n      vi.mocked(git.getPartiallyStagedFiles",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 789,
        "end": 799,
        "startLoc": {
          "line": 789,
          "column": 86,
          "position": 6228
        },
        "endLoc": {
          "line": 799,
          "column": 24,
          "position": 6320
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 745,
        "end": 755,
        "startLoc": {
          "line": 745,
          "column": 62,
          "position": 5821
        },
        "endLoc": {
          "line": 755,
          "column": 30,
          "position": 5913
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ",\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(1); // Should fail when behind",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 808,
        "end": 817,
        "startLoc": {
          "line": 808,
          "column": 5,
          "position": 6391
        },
        "endLoc": {
          "line": 817,
          "column": 27,
          "position": 6494
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 281,
        "end": 735,
        "startLoc": {
          "line": 281,
          "column": 4,
          "position": 2279
        },
        "endLoc": {
          "line": 735,
          "column": 15,
          "position": 5758
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async () => {\n      const mockConfig: VibeValidateConfig = {\n        version: '1.0',\n        validation: {\n          phases: [],\n        },\n      };\n\n      vi.mocked(configLoader.loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(git.getGitTreeHash).mockResolvedValue('abc123def456');\n      vi.mocked(git.getPartiallyStagedFiles).mockReturnValue([]);\n\n      // Mock no tracking branch issue",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 825,
        "end": 837,
        "startLoc": {
          "line": 825,
          "column": 89,
          "position": 6529
        },
        "endLoc": {
          "line": 837,
          "column": 33,
          "position": 6633
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 745,
        "end": 801,
        "startLoc": {
          "line": 745,
          "column": 62,
          "position": 5821
        },
        "endLoc": {
          "line": 801,
          "column": 68,
          "position": 6332
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ",\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          expect(err.exitCode).toBe(1); // Should fail when behind\n        }\n      }\n\n      // Snapshot should have been created before the error\n      expect(git.getGitTreeHash).toHaveBeenCalled();\n\n      // And before sync check (using invocationCallOrder)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 843,
        "end": 861,
        "startLoc": {
          "line": 843,
          "column": 2,
          "position": 6681
        },
        "endLoc": {
          "line": 861,
          "column": 53,
          "position": 6825
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 806,
        "end": 823,
        "startLoc": {
          "line": 806,
          "column": 2,
          "position": 6377
        },
        "endLoc": {
          "line": 823,
          "column": 2,
          "position": 6520
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": "const getTreeHashOrder = vi.mocked(git.getGitTreeHash).mock.invocationCallOrder[0];\n      const checkSyncOrder = vi.mocked(git.checkBranchSync).mock.invocationCallOrder[0];\n      expect(getTreeHashOrder).toBeLessThan(checkSyncOrder);\n    });\n\n    it('should handle snapshot creation failure gracefully'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 862,
        "end": 867,
        "startLoc": {
          "line": 862,
          "column": 7,
          "position": 6828
        },
        "endLoc": {
          "line": 867,
          "column": 53,
          "position": 6896
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 784,
        "end": 789,
        "startLoc": {
          "line": 784,
          "column": 7,
          "position": 6159
        },
        "endLoc": {
          "line": 789,
          "column": 86,
          "position": 6227
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ");\n\n      vi.mocked(git.checkBranchSync).mockResolvedValue({\n        isUpToDate: true,\n        behindBy: 0,\n        currentBranch: 'feature/test',\n        hasRemote: true,\n      });\n      vi.mocked(core.runValidation).mockResolvedValue({\n        passed: true,\n        phasesRun: 0,\n        stepsRun: 0,\n        duration: 100,\n      });\n\n      preCommitCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['pre-commit'], { from: 'user' });\n      } catch (err: unknown) {\n        if (err && typeof err === 'object' && 'exitCode' in err) {\n          // Should still succeed (fail-safe philosophy)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 880,
        "end": 901,
        "startLoc": {
          "line": 880,
          "column": 2,
          "position": 7023
        },
        "endLoc": {
          "line": 901,
          "column": 47,
          "position": 7204
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 162,
        "end": 290,
        "startLoc": {
          "line": 162,
          "column": 11,
          "position": 1446
        },
        "endLoc": {
          "line": 290,
          "column": 7,
          "position": 2369
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "${Date.now()}-${Math.random()}`);\n    await mkdir(testDir, { recursive: true });\n    cliPath = join(__dirname, '../../dist/bin.js');\n  });\n\n  afterEach(async () => {\n    // Clean up test directory\n    await rm(testDir, { recursive: true, force: true });\n  });\n\n  describe('--dry-run'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/init-focused-modes.test.ts",
        "start": 27,
        "end": 37,
        "startLoc": {
          "line": 27,
          "column": 21,
          "position": 156
        },
        "endLoc": {
          "line": 37,
          "column": 12,
          "position": 263
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/init-schema-validation.test.ts",
        "start": 23,
        "end": 33,
        "startLoc": {
          "line": 23,
          "column": 28,
          "position": 176
        },
        "endLoc": {
          "line": 33,
          "column": 34,
          "position": 283
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": "});\n      const workflow = parseWorkflowYaml(workflowYaml);\n\n      expect(workflow.jobs).toHaveProperty('all-validation-passed');\n      expect(workflow.jobs['all-validation-passed'].if).toBe('always()');\n      expect(workflow.jobs['all-validation-passed'].needs).toEqual(['validate'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 484,
        "end": 489,
        "startLoc": {
          "line": 484,
          "column": 7,
          "position": 4337
        },
        "endLoc": {
          "line": 489,
          "column": 11,
          "position": 4404
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 157,
        "end": 163,
        "startLoc": {
          "line": 157,
          "column": 2,
          "position": 1327
        },
        "endLoc": {
          "line": 163,
          "column": 24,
          "position": 1396
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "const job = workflow.jobs['typescript-type-check'];\n        const npmStep = job.steps.find((s: any) => s.run === 'npm ci');\n        expect(npmStep).toBeDefined();\n\n        // Should NOT have pnpm setup\n        const pnpmStep = job.steps.find((s: any) => s.uses?.includes('pnpm/action-setup'));\n        expect(pnpmStep).toBeUndefined();\n      });\n\n      it('should use pnpm when only pnpm-lock.yaml exists'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 672,
        "end": 681,
        "startLoc": {
          "line": 672,
          "column": 9,
          "position": 6061
        },
        "endLoc": {
          "line": 681,
          "column": 50,
          "position": 6176
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 639,
        "end": 648,
        "startLoc": {
          "line": 639,
          "column": 9,
          "position": 5719
        },
        "endLoc": {
          "line": 648,
          "column": 74,
          "position": 5834
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "vi.mocked(readFileSync).mockImplementation((path: any) => {\n          if (path.toString().endsWith('package.json')) {\n            return JSON.stringify({\n              name: 'test-project',\n              engines: { node: '>=22.0.0' },\n            });\n          }\n          return '';\n        });\n\n        const workflowYaml = generateWorkflow(mockConfig, { useMatrix: false });\n        const workflow = parseWorkflowYaml(workflowYaml);\n\n        // Should use pnpm when only pnpm-lock exists",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 690,
        "end": 703,
        "startLoc": {
          "line": 690,
          "column": 9,
          "position": 6273
        },
        "endLoc": {
          "line": 703,
          "column": 46,
          "position": 6399
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 658,
        "end": 671,
        "startLoc": {
          "line": 658,
          "column": 9,
          "position": 5932
        },
        "endLoc": {
          "line": 671,
          "column": 61,
          "position": 6058
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": ";\n          return true; // package.json exists\n        });\n\n        vi.mocked(readFileSync).mockImplementation((path: any) => {\n          if (path.toString().endsWith('package.json')) {\n            return JSON.stringify({\n              name: 'test-project',\n              engines: { node: '>=22.0.0' },\n            });\n          }\n          return '';\n        });\n\n        const workflowYaml = generateWorkflow(mockConfig, { useMatrix: false });\n        const workflow = parseWorkflowYaml(workflowYaml);\n\n        // Should use npm when only package-lock exists",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 714,
        "end": 731,
        "startLoc": {
          "line": 714,
          "column": 6,
          "position": 6550
        },
        "endLoc": {
          "line": 731,
          "column": 48,
          "position": 6693
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 686,
        "end": 671,
        "startLoc": {
          "line": 686,
          "column": 5,
          "position": 6256
        },
        "endLoc": {
          "line": 671,
          "column": 61,
          "position": 6058
        }
      }
    },
    {
      "format": "typescript",
      "lines": 29,
      "fragment": "const mockConfig: VibeValidateConfig = {\n    validation: {\n      phases: [\n        {\n          name: 'Pre-Qualification',\n          parallel: true,\n          steps: [\n            {\n              name: 'TypeScript Type Check',\n              command: 'pnpm -r typecheck',\n            },\n            {\n              name: 'ESLint Code Quality',\n              command: 'pnpm lint',\n            },\n          ],\n          timeout: 300000,\n          failFast: true,\n        },\n        {\n          name: 'Testing',\n          parallel: false,\n          steps: [\n            {\n              name: 'Unit Tests with Coverage',\n              command: 'pnpm test:coverage',\n            },\n          ],\n          timeout: 600000",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/generate-workflow-subdirectory.system.test.ts",
        "start": 22,
        "end": 50,
        "startLoc": {
          "line": 22,
          "column": 3,
          "position": 181
        },
        "endLoc": {
          "line": 50,
          "column": 7,
          "position": 343
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/generate-workflow.test.ts",
        "start": 32,
        "end": 60,
        "startLoc": {
          "line": 32,
          "column": 3,
          "position": 280
        },
        "endLoc": {
          "line": 60,
          "column": 7,
          "position": 442
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "vi.mocked(findConfigPath).mockReturnValue(configPath);\n      vi.mocked(loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(loadConfigWithErrors).mockResolvedValue({\n        config: mockConfig,\n        errors: null,\n        filePath: configPath,\n      });\n      vi.mocked(checkSync).mockReturnValue({ inSync: true });\n\n      // ACT: Run doctor (simulated from subdirectory via mocked findConfigPath)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 146,
        "end": 155,
        "startLoc": {
          "line": 146,
          "column": 7,
          "position": 1176
        },
        "endLoc": {
          "line": 155,
          "column": 75,
          "position": 1264
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 121,
        "end": 130,
        "startLoc": {
          "line": 121,
          "column": 7,
          "position": 987
        },
        "endLoc": {
          "line": 130,
          "column": 37,
          "position": 1075
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "vi.mocked(findConfigPath).mockReturnValue(configPath);\n      vi.mocked(loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(loadConfigWithErrors).mockResolvedValue({\n        config: mockConfig,\n        errors: null,\n        filePath: configPath,\n      });\n      vi.mocked(checkSync).mockReturnValue({ inSync: true });\n\n      // ACT: Run doctor",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 174,
        "end": 183,
        "startLoc": {
          "line": 174,
          "column": 7,
          "position": 1380
        },
        "endLoc": {
          "line": 183,
          "column": 19,
          "position": 1468
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 121,
        "end": 130,
        "startLoc": {
          "line": 121,
          "column": 7,
          "position": 987
        },
        "endLoc": {
          "line": 130,
          "column": 37,
          "position": 1075
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "vi.mocked(findConfigPath).mockReturnValue(configPath);\n      vi.mocked(loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(loadConfigWithErrors).mockResolvedValue({\n        config: mockConfig,\n        errors: null,\n        filePath: configPath,\n      });\n      vi.mocked(checkSync).mockReturnValue({ inSync: true });\n\n      // ACT: Run doctor\n      const result = await runDoctor({ verbose: true });\n\n      // ASSERT: Config file check should pass\n      assertCheck(result, 'Configuration file', {\n        passed: true,\n        messageContains: 'vibe-validate.config.yaml',\n      });\n    });\n\n    it('should fail when run from non-project directory (no config found)'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 199,
        "end": 218,
        "startLoc": {
          "line": 199,
          "column": 7,
          "position": 1569
        },
        "endLoc": {
          "line": 218,
          "column": 68,
          "position": 1724
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 121,
        "end": 193,
        "startLoc": {
          "line": 121,
          "column": 7,
          "position": 987
        },
        "endLoc": {
          "line": 193,
          "column": 67,
          "position": 1535
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": "vi.mocked(findConfigPath).mockReturnValue(configPath);\n      vi.mocked(loadConfig).mockResolvedValue(mockConfig);\n      vi.mocked(loadConfigWithErrors).mockResolvedValue({\n        config: mockConfig,\n        errors: null,\n        filePath: configPath,\n      });\n      vi.mocked(checkSync).mockReturnValue({ inSync: true });\n\n      // ACT: Run doctor\n      const result = await runDoctor({ verbose: true });\n\n      // ASSERT: Config check should pass (using findConfigPath, not hardcoded existsSync)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 276,
        "end": 288,
        "startLoc": {
          "line": 276,
          "column": 7,
          "position": 2140
        },
        "endLoc": {
          "line": 288,
          "column": 85,
          "position": 2254
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/doctor-subdirectory.test.ts",
        "start": 121,
        "end": 186,
        "startLoc": {
          "line": 121,
          "column": 7,
          "position": 987
        },
        "endLoc": {
          "line": 186,
          "column": 41,
          "position": 1494
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "${Date.now()}`);\n    testDir = mkdirSyncReal(targetDir, { recursive: true });\n\n    // Save original cwd and change to test directory\n    originalCwd = process.cwd();\n    process.chdir(testDir);\n\n    // Setup Commander test environment\n    env = setupCommanderTest();\n\n    // Reset mocks\n    vi.mocked(configLoader",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 30,
        "end": 41,
        "startLoc": {
          "line": 30,
          "column": 28,
          "position": 295
        },
        "endLoc": {
          "line": 41,
          "column": 13,
          "position": 375
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 80,
        "end": 91,
        "startLoc": {
          "line": 80,
          "column": 32,
          "position": 722
        },
        "endLoc": {
          "line": 91,
          "column": 5,
          "position": 802
        }
      }
    },
    {
      "format": "typescript",
      "lines": 21,
      "fragment": "});\n\n  afterEach(() => {\n    env.cleanup();\n\n    // Restore cwd\n    process.chdir(originalCwd);\n\n    // Clean up test files\n    if (existsSync(testDir)) {\n      try {\n        rmSync(testDir, { recursive: true, force: true });\n      } catch {\n        // Ignore cleanup errors\n      }\n    }\n\n    vi.restoreAllMocks();\n  });\n\n  describe",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 44,
        "end": 64,
        "startLoc": {
          "line": 44,
          "column": 3,
          "position": 416
        },
        "endLoc": {
          "line": 64,
          "column": 9,
          "position": 528
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/pre-commit.test.ts",
        "start": 110,
        "end": 133,
        "startLoc": {
          "line": 110,
          "column": 3,
          "position": 1077
        },
        "endLoc": {
          "line": 133,
          "column": 6,
          "position": 1189
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", () => {\n      configCommand(env.program);\n\n      const configCmd = env.program.commands.find(cmd => cmd.name() === 'config');\n      const options = configCmd?.options;\n\n      expect(options?.some(opt => opt.flags === '-v, --verbose'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 84,
        "end": 90,
        "startLoc": {
          "line": 84,
          "column": 35,
          "position": 745
        },
        "endLoc": {
          "line": 90,
          "column": 16,
          "position": 827
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 75,
        "end": 81,
        "startLoc": {
          "line": 75,
          "column": 36,
          "position": 643
        },
        "endLoc": {
          "line": 81,
          "column": 13,
          "position": 725
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "configCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['config'], { from: 'user' });\n      } catch (error: unknown) {\n        if (error && typeof error === 'object' && 'exitCode' in error) {\n          expect(error.exitCode).toBe(1);\n        }\n      }\n\n      expect(console.error).toHaveBeenCalledWith(\n        expect.stringContaining('Configuration is invalid'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 167,
        "end": 178,
        "startLoc": {
          "line": 167,
          "column": 7,
          "position": 1520
        },
        "endLoc": {
          "line": 178,
          "column": 27,
          "position": 1637
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 99,
        "end": 109,
        "startLoc": {
          "line": 99,
          "column": 7,
          "position": 897
        },
        "endLoc": {
          "line": 109,
          "column": 30,
          "position": 1012
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ", async () => {\n      configCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['config'], { from: 'user' });\n      } catch (error: unknown) {\n        if (error && typeof error === 'object' && 'exitCode' in error) {\n          expect(error.exitCode).toBe(0",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 203,
        "end": 210,
        "startLoc": {
          "line": 203,
          "column": 58,
          "position": 1840
        },
        "endLoc": {
          "line": 210,
          "column": 2,
          "position": 1942
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 166,
        "end": 105,
        "startLoc": {
          "line": 166,
          "column": 44,
          "position": 1508
        },
        "endLoc": {
          "line": 105,
          "column": 2,
          "position": 987
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n\n      configCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['config'], { from: 'user' });\n      } catch (error: unknown) {\n        if (error && typeof error === 'object' && 'exitCode' in error) {\n          expect(error.exitCode).toBe(1);\n        }\n      }\n\n      expect(console.error).toHaveBeenCalledWith(\n        expect.stringContaining('Failed to load configuration'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 238,
        "end": 251,
        "startLoc": {
          "line": 238,
          "column": 2,
          "position": 2221
        },
        "endLoc": {
          "line": 251,
          "column": 31,
          "position": 2343
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/config.test.ts",
        "start": 97,
        "end": 109,
        "startLoc": {
          "line": 97,
          "column": 5,
          "position": 892
        },
        "endLoc": {
          "line": 109,
          "column": 30,
          "position": 1012
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ",\n        },\n        recoveryInfo: 'Deleted branches are recoverable for 30 days via git reflog',\n      };\n\n      vi.mocked(git.cleanupBranches).mockResolvedValue(mockResult);\n\n      cleanupCommand(env.program);\n\n      try {\n        await env.program.parseAsync(['cleanup'], { from: 'user' });\n      } catch (error) { // NOSONAR - Commander.js throws on exitOverride",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/commands/cleanup.test.ts",
        "start": 102,
        "end": 113,
        "startLoc": {
          "line": 102,
          "column": 2,
          "position": 861
        },
        "endLoc": {
          "line": 113,
          "column": 49,
          "position": 947
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/cleanup.test.ts",
        "start": 69,
        "end": 80,
        "startLoc": {
          "line": 69,
          "column": 2,
          "position": 606
        },
        "endLoc": {
          "line": 80,
          "column": 76,
          "position": 692
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", '--help'], {\n        cwd: join(__dirname, '../../../..'),\n        env: { ...process.env },\n      });\n\n      expect(result.status).toBe(0);\n      expect(result.stdout.toString()).toContain('state'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 116,
        "end": 122,
        "startLoc": {
          "line": 116,
          "column": 8,
          "position": 1015
        },
        "endLoc": {
          "line": 122,
          "column": 8,
          "position": 1084
        }
      },
      "secondFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 106,
        "end": 112,
        "startLoc": {
          "line": 106,
          "column": 12,
          "position": 906
        },
        "endLoc": {
          "line": 112,
          "column": 9,
          "position": 975
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", 'state', '--help'], {\n        cwd: join(__dirname, '../../../..'),\n        env: { ...process.env },\n      });\n\n      expect(result.status).toBe(0);\n      expect(result.stdout.toString()).toContain('state');\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 170,
        "end": 178,
        "startLoc": {
          "line": 170,
          "column": 7,
          "position": 1523
        },
        "endLoc": {
          "line": 178,
          "column": 2,
          "position": 1605
        }
      },
      "secondFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 116,
        "end": 125,
        "startLoc": {
          "line": 116,
          "column": 12,
          "position": 1012
        },
        "endLoc": {
          "line": 125,
          "column": 3,
          "position": 1095
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "const result = spawnSync('node', [wrapperPath, '--version'], {\n        cwd: join(__dirname, '../../../..'),\n        env: { ...process.env },\n      });\n\n      expect(result.status).toBe(0);\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 220,
        "end": 227,
        "startLoc": {
          "line": 220,
          "column": 7,
          "position": 1961
        },
        "endLoc": {
          "line": 227,
          "column": 2,
          "position": 2035
        }
      },
      "secondFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 210,
        "end": 218,
        "startLoc": {
          "line": 210,
          "column": 7,
          "position": 1870
        },
        "endLoc": {
          "line": 218,
          "column": 3,
          "position": 1945
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", '--help'], {\n        cwd: join(__dirname, '../../../..'),\n        env: { ...process.env },\n      });\n\n      expect(result.status).toBe(0);\n      expect(result.stdout.toString()).toContain('doctor'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 252,
        "end": 258,
        "startLoc": {
          "line": 252,
          "column": 9,
          "position": 2301
        },
        "endLoc": {
          "line": 258,
          "column": 9,
          "position": 2370
        }
      },
      "secondFile": {
        "name": "packages/cli/test/bin/wrapper.test.ts",
        "start": 106,
        "end": 112,
        "startLoc": {
          "line": 106,
          "column": 12,
          "position": 906
        },
        "endLoc": {
          "line": 112,
          "column": 9,
          "position": 975
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", async () => {\n        const oldTimestamp = createOldDate(100).toISOString();\n        const oldNote = createHistoryNote({\n          treeHash: 'old-abc123',\n          runs: [createRun({ treeHash: 'old-abc123', timestamp: oldTimestamp })],\n        });\n        setupPrunerTest([oldNote]);\n\n        await",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 230,
        "end": 238,
        "startLoc": {
          "line": 230,
          "column": 30,
          "position": 2100
        },
        "endLoc": {
          "line": 238,
          "column": 6,
          "position": 2187
        }
      },
      "secondFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 117,
        "end": 125,
        "startLoc": {
          "line": 117,
          "column": 25,
          "position": 900
        },
        "endLoc": {
          "line": 125,
          "column": 6,
          "position": 987
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async () => {\n        const oldTimestamp = createOldDate(100).toISOString();\n        const oldNotes = [\n          createHistoryNote({\n            treeHash: 'old-1',\n            runs: [createRun({ id: 'run-1', treeHash: 'old-1', timestamp: oldTimestamp, headCommit: 'commit1' })],\n          }),\n          createHistoryNote({\n            treeHash: 'old-2',\n            runs: [createRun({ id: 'run-2', treeHash: 'old-2', timestamp: oldTimestamp, headCommit: 'commit2' })],\n          }),\n        ];\n        vi",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 253,
        "end": 265,
        "startLoc": {
          "line": 253,
          "column": 48,
          "position": 2283
        },
        "endLoc": {
          "line": 265,
          "column": 3,
          "position": 2433
        }
      },
      "secondFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 137,
        "end": 149,
        "startLoc": {
          "line": 137,
          "column": 34,
          "position": 1092
        },
        "endLoc": {
          "line": 149,
          "column": 16,
          "position": 1242
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n\n        expect(result.notesPruned).toBe(0);\n        expect(result.runsPruned).toBe(0);\n        expect(result.notesRemaining).toBe(0);\n        expect(result.prunedTreeHashes).toEqual([]);\n        expect(git.removeNote).not.toHaveBeenCalled();\n      });\n    });\n\n    describe('when notes exist'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 309,
        "end": 319,
        "startLoc": {
          "line": 309,
          "column": 2,
          "position": 2826
        },
        "endLoc": {
          "line": 319,
          "column": 19,
          "position": 2916
        }
      },
      "secondFile": {
        "name": "packages/history/test/pruner.test.ts",
        "start": 93,
        "end": 103,
        "startLoc": {
          "line": 93,
          "column": 3,
          "position": 658
        },
        "endLoc": {
          "line": 103,
          "column": 43,
          "position": 748
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "),\n}));\n\nvi.mock('fs', () => ({\n  writeFileSync: vi.fn(),\n  unlinkSync: vi.fn(),\n}));\n\nvi.mock('../src/reader.js', () => ({\n  readHistoryNote: vi.fn(() => Promise.resolve(null)),\n  listHistoryTreeHashes",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/integration.test.ts",
        "start": 31,
        "end": 41,
        "startLoc": {
          "line": 31,
          "column": 2,
          "position": 283
        },
        "endLoc": {
          "line": 41,
          "column": 22,
          "position": 373
        }
      },
      "secondFile": {
        "name": "packages/history/test/recorder.test.ts",
        "start": 20,
        "end": 30,
        "startLoc": {
          "line": 20,
          "column": 2,
          "position": 185
        },
        "endLoc": {
          "line": 30,
          "column": 2,
          "position": 274
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ": HistoryNote[] = [\n        {\n          treeHash: 'abc123',\n          runs: [\n            {\n              id: 'run-1',\n              timestamp: oldDate.toISOString(),\n              duration: 5000,\n              passed: true,\n              branch: 'main',\n              headCommit: 'commit123',\n              uncommittedChanges: false,\n              result: {\n                passed: true,\n                timestamp: oldDate.toISOString(),\n                treeHash: 'abc123',\n                phases: [],\n              },\n            },\n          ],\n        },\n      ];\n\n      vi.mocked(reader.getAllHistoryNotes).mockResolvedValue(notes",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/health-check.test.ts",
        "start": 216,
        "end": 239,
        "startLoc": {
          "line": 216,
          "column": 6,
          "position": 1860
        },
        "endLoc": {
          "line": 239,
          "column": 6,
          "position": 2014
        }
      },
      "secondFile": {
        "name": "packages/history/test/health-check.test.ts",
        "start": 110,
        "end": 133,
        "startLoc": {
          "line": 110,
          "column": 9,
          "position": 941
        },
        "endLoc": {
          "line": 133,
          "column": 9,
          "position": 1095
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": "}, (_, i) => ({\n        treeHash: `hash${i}`,\n        runs: [\n          {\n            id: `run-${i}`,\n            timestamp: new Date().toISOString(),\n            duration: 5000,\n            passed: true,\n            branch: 'main',\n            headCommit: `commit${i}`,\n            uncommittedChanges: false,\n            result: {\n              passed: true,\n              timestamp: new Date().toISOString(),\n              treeHash: `hash${i}`,\n              phases: [],\n            },\n          },\n        ],\n      }));\n\n      vi.mocked(reader.getAllHistoryNotes).mockResolvedValue(notes",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/health-check.test.ts",
        "start": 253,
        "end": 274,
        "startLoc": {
          "line": 253,
          "column": 2,
          "position": 2143
        },
        "endLoc": {
          "line": 274,
          "column": 6,
          "position": 2321
        }
      },
      "secondFile": {
        "name": "packages/history/test/health-check.test.ts",
        "start": 71,
        "end": 92,
        "startLoc": {
          "line": 71,
          "column": 2,
          "position": 581
        },
        "endLoc": {
          "line": 92,
          "column": 16,
          "position": 759
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ",\n              uncommittedChanges: false,\n              result: {\n                passed: true,\n                timestamp: new Date().toISOString(),\n                treeHash: 'abc123',\n                phases: [],\n              },\n            },\n          ],\n        },\n      ];\n\n      vi.mocked(reader.getAllHistoryNotes).mockResolvedValue(notesWithMultipleRuns",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/test/health-check.test.ts",
        "start": 347,
        "end": 360,
        "startLoc": {
          "line": 347,
          "column": 12,
          "position": 2884
        },
        "endLoc": {
          "line": 360,
          "column": 22,
          "position": 2969
        }
      },
      "secondFile": {
        "name": "packages/history/test/health-check.test.ts",
        "start": 44,
        "end": 57,
        "startLoc": {
          "line": 44,
          "column": 12,
          "position": 356
        },
        "endLoc": {
          "line": 57,
          "column": 12,
          "position": 441
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", async () => {\n    vi.mocked(gitExecutor.executeGitCommand)\n      .mockReturnValueOnce({ success: true, stdout: '', stderr: '', exitCode: 0 })  // git rev-parse --is-inside-work-tree\n      .mockReturnValueOnce({ success: true, stdout: '.git', stderr: '', exitCode: 0 })  // git rev-parse --git-dir\n      .mockReturnValueOnce({ success: true, stdout: '', stderr: '', exitCode: 0 })  // git add\n      .mockReturnValueOnce({ success: true, stdout: '4b825dc642cb6eb9a060e54bf8d69288fbee4904\\n'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/tree-hash.test.ts",
        "start": 195,
        "end": 200,
        "startLoc": {
          "line": 195,
          "column": 33,
          "position": 1828
        },
        "endLoc": {
          "line": 200,
          "column": 45,
          "position": 1966
        }
      },
      "secondFile": {
        "name": "packages/git/test/tree-hash.test.ts",
        "start": 175,
        "end": 180,
        "startLoc": {
          "line": 175,
          "column": 35,
          "position": 1557
        },
        "endLoc": {
          "line": 180,
          "column": 17,
          "position": 1695
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", async () => {\n    vi.mocked(gitExecutor.executeGitCommand)\n      .mockReturnValueOnce({ success: true, stdout: '', stderr: '', exitCode: 0 })  // git rev-parse --is-inside-work-tree\n      .mockReturnValueOnce({ success: true, stdout: '.git', stderr: '', exitCode: 0 })  // git rev-parse --git-dir\n      .mockReturnValueOnce({ success: true, stdout: '', stderr: '', exitCode: 0 })  // git add\n      .mockImplementationOnce",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/tree-hash.test.ts",
        "start": 229,
        "end": 234,
        "startLoc": {
          "line": 229,
          "column": 54,
          "position": 2319
        },
        "endLoc": {
          "line": 234,
          "column": 23,
          "position": 2444
        }
      },
      "secondFile": {
        "name": "packages/git/test/tree-hash.test.ts",
        "start": 175,
        "end": 180,
        "startLoc": {
          "line": 175,
          "column": 35,
          "position": 1557
        },
        "endLoc": {
          "line": 180,
          "column": 20,
          "position": 1682
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", async () => {\n    // Create initial commit so index exists\n    writeFileSync(join(testRepoPath, 'initial.txt'), 'initial');\n    executeGitCommand(['add', 'initial.txt'], { suppressStderr: true });\n    executeGitCommand(['commit', '-m', 'initial'], { suppressStderr: true });\n\n    // Delete all files to make working tree \"empty\"",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/tree-hash.integration.test.ts",
        "start": 123,
        "end": 129,
        "startLoc": {
          "line": 123,
          "column": 33,
          "position": 1050
        },
        "endLoc": {
          "line": 129,
          "column": 49,
          "position": 1129
        }
      },
      "secondFile": {
        "name": "packages/git/test/tree-hash.integration.test.ts",
        "start": 106,
        "end": 112,
        "startLoc": {
          "line": 106,
          "column": 53,
          "position": 895
        },
        "endLoc": {
          "line": 112,
          "column": 15,
          "position": 974
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n        stderr: '',\n        exitCode: 0,\n      })\n      .mockReturnValueOnce({\n        success: true,\n        stdout: '0\\n',\n        stderr: '',\n        exitCode: 0,\n      });\n\n    const result = isCurrentBranchBehindTracking();\n\n    expect(result).toBe(0);\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/tracking-branch.test.ts",
        "start": 98,
        "end": 112,
        "startLoc": {
          "line": 98,
          "column": 16,
          "position": 653
        },
        "endLoc": {
          "line": 112,
          "column": 2,
          "position": 739
        }
      },
      "secondFile": {
        "name": "packages/git/test/tracking-branch.test.ts",
        "start": 46,
        "end": 60,
        "startLoc": {
          "line": 46,
          "column": 23,
          "position": 302
        },
        "endLoc": {
          "line": 60,
          "column": 7,
          "position": 388
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ", async () => {\n      const cleanup = new PostPRMergeCleanup();\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 222,
        "end": 231,
        "startLoc": {
          "line": 222,
          "column": 55,
          "position": 1763
        },
        "endLoc": {
          "line": 231,
          "column": 17,
          "position": 1848
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 160,
        "end": 169,
        "startLoc": {
          "line": 160,
          "column": 32,
          "position": 1239
        },
        "endLoc": {
          "line": 169,
          "column": 37,
          "position": 1324
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult('feature/test\\nmain\\n'))\n        // Regular delete fails",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 223,
        "end": 233,
        "startLoc": {
          "line": 223,
          "column": 2,
          "position": 1785
        },
        "endLoc": {
          "line": 233,
          "column": 24,
          "position": 1863
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 137,
        "end": 147,
        "startLoc": {
          "line": 137,
          "column": 2,
          "position": 1032
        },
        "endLoc": {
          "line": 147,
          "column": 2,
          "position": 1110
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", async () => {\n      const cleanup = new PostPRMergeCleanup();\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult('feature/test\\nmain\\n'))\n        // Regular delete fails\n        .mockReturnValueOnce(createSpawnError('delete failed'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 251,
        "end": 263,
        "startLoc": {
          "line": 251,
          "column": 50,
          "position": 1995
        },
        "endLoc": {
          "line": 263,
          "column": 16,
          "position": 2103
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 160,
        "end": 234,
        "startLoc": {
          "line": 160,
          "column": 32,
          "position": 1239
        },
        "endLoc": {
          "line": 234,
          "column": 26,
          "position": 1871
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ", async () => {\n      const cleanup = new PostPRMergeCleanup();\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        // Return main in the branch list (should be filtered)",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 292,
        "end": 301,
        "startLoc": {
          "line": 292,
          "column": 51,
          "position": 2347
        },
        "endLoc": {
          "line": 301,
          "column": 55,
          "position": 2427
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 160,
        "end": 169,
        "startLoc": {
          "line": 160,
          "column": 32,
          "position": 1239
        },
        "endLoc": {
          "line": 169,
          "column": 2,
          "position": 1319
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ", async () => {\n      const cleanup = new PostPRMergeCleanup();\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 314,
        "end": 323,
        "startLoc": {
          "line": 314,
          "column": 40,
          "position": 2531
        },
        "endLoc": {
          "line": 323,
          "column": 3,
          "position": 2616
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 160,
        "end": 169,
        "startLoc": {
          "line": 160,
          "column": 32,
          "position": 1239
        },
        "endLoc": {
          "line": 169,
          "column": 37,
          "position": 1324
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": ", async () => {\n      const cleanup = new PostPRMergeCleanup();\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult('feature/test-123\\n'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 333,
        "end": 342,
        "startLoc": {
          "line": 333,
          "column": 52,
          "position": 2679
        },
        "endLoc": {
          "line": 342,
          "column": 21,
          "position": 2764
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 160,
        "end": 169,
        "startLoc": {
          "line": 160,
          "column": 32,
          "position": 1239
        },
        "endLoc": {
          "line": 169,
          "column": 37,
          "position": 1324
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", async () => {\n      const cleanup = new PostPRMergeCleanup();\n\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        // Merge status check fails - should skip branch",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 376,
        "end": 386,
        "startLoc": {
          "line": 376,
          "column": 42,
          "position": 3037
        },
        "endLoc": {
          "line": 386,
          "column": 49,
          "position": 3127
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 160,
        "end": 146,
        "startLoc": {
          "line": 160,
          "column": 32,
          "position": 1239
        },
        "endLoc": {
          "line": 146,
          "column": 2,
          "position": 1100
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''));\n\n      const result = await cleanupMergedBranches",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 401,
        "end": 409,
        "startLoc": {
          "line": 401,
          "column": 17,
          "position": 3250
        },
        "endLoc": {
          "line": 409,
          "column": 22,
          "position": 3324
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 363,
        "end": 371,
        "startLoc": {
          "line": 363,
          "column": 23,
          "position": 2931
        },
        "endLoc": {
          "line": 371,
          "column": 8,
          "position": 3005
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", async () => {\n      mockSpawnSync\n        .mockReturnValueOnce(createSpawnResult('feature/test\\n'))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''))\n        .mockReturnValueOnce(createSpawnResult(''));\n\n      const result = await cleanupMergedBranches({",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 415,
        "end": 425,
        "startLoc": {
          "line": 415,
          "column": 32,
          "position": 3368
        },
        "endLoc": {
          "line": 425,
          "column": 2,
          "position": 3465
        }
      },
      "secondFile": {
        "name": "packages/git/test/post-merge-cleanup.test.ts",
        "start": 399,
        "end": 409,
        "startLoc": {
          "line": 399,
          "column": 50,
          "position": 3229
        },
        "endLoc": {
          "line": 409,
          "column": 2,
          "position": 3326
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ", () => {\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation((hash) => {\n        if (!/^[0-9a-f]{4,40}$/.test(hash)) {\n          throw new Error('Invalid tree hash: must be hexadecimal');\n        }\n      });\n\n      expect(() => addNote('vibe-validate/test' as NotesRef, 'main'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 42,
        "end": 49,
        "startLoc": {
          "line": 42,
          "column": 29,
          "position": 338
        },
        "endLoc": {
          "line": 49,
          "column": 7,
          "position": 419
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 31,
        "end": 38,
        "startLoc": {
          "line": 31,
          "column": 40,
          "position": 225
        },
        "endLoc": {
          "line": 38,
          "column": 7,
          "position": 306
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.executeGitCommand).mockReturnValue({\n        success: true,\n        stdout: '',\n        stderr: '',\n        exitCode: 0,\n      });\n\n      // Without force",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 75,
        "end": 87,
        "startLoc": {
          "line": 75,
          "column": 37,
          "position": 708
        },
        "endLoc": {
          "line": 87,
          "column": 17,
          "position": 825
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 55,
        "end": 67,
        "startLoc": {
          "line": 55,
          "column": 34,
          "position": 490
        },
        "endLoc": {
          "line": 67,
          "column": 6,
          "position": 607
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", () => {\n    it('should reject symbolic refs like HEAD', () => {\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation((hash) => {\n        if (!/^[0-9a-f]{4,40}$/.test(hash)) {\n          throw new Error('Invalid tree hash: must be hexadecimal');\n        }\n      });\n\n      expect(() => readNote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 105,
        "end": 113,
        "startLoc": {
          "line": 105,
          "column": 11,
          "position": 1000
        },
        "endLoc": {
          "line": 113,
          "column": 9,
          "position": 1085
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 30,
        "end": 38,
        "startLoc": {
          "line": 30,
          "column": 10,
          "position": 212
        },
        "endLoc": {
          "line": 38,
          "column": 8,
          "position": 297
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ", () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.executeGitCommand).mockReturnValue({\n        success: true,\n        stdout: 'note content'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 117,
        "end": 124,
        "startLoc": {
          "line": 117,
          "column": 44,
          "position": 1120
        },
        "endLoc": {
          "line": 124,
          "column": 15,
          "position": 1213
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 55,
        "end": 62,
        "startLoc": {
          "line": 55,
          "column": 34,
          "position": 490
        },
        "endLoc": {
          "line": 62,
          "column": 3,
          "position": 583
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.executeGitCommand).mockReturnValue({\n        success: false",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 137,
        "end": 143,
        "startLoc": {
          "line": 137,
          "column": 46,
          "position": 1329
        },
        "endLoc": {
          "line": 143,
          "column": 6,
          "position": 1415
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 55,
        "end": 61,
        "startLoc": {
          "line": 55,
          "column": 34,
          "position": 490
        },
        "endLoc": {
          "line": 61,
          "column": 5,
          "position": 576
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", () => {\n    it('should reject symbolic refs like HEAD', () => {\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation((hash) => {\n        if (!/^[0-9a-f]{4,40}$/.test(hash)) {\n          throw new Error('Invalid tree hash: must be hexadecimal');\n        }\n      });\n\n      expect(() => removeNote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 154,
        "end": 162,
        "startLoc": {
          "line": 154,
          "column": 13,
          "position": 1491
        },
        "endLoc": {
          "line": 162,
          "column": 11,
          "position": 1576
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 30,
        "end": 38,
        "startLoc": {
          "line": 30,
          "column": 10,
          "position": 212
        },
        "endLoc": {
          "line": 38,
          "column": 8,
          "position": 297
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.tryGitCommand",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 166,
        "end": 171,
        "startLoc": {
          "line": 166,
          "column": 42,
          "position": 1611
        },
        "endLoc": {
          "line": 171,
          "column": 14,
          "position": 1686
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 55,
        "end": 60,
        "startLoc": {
          "line": 55,
          "column": 34,
          "position": 490
        },
        "endLoc": {
          "line": 60,
          "column": 18,
          "position": 565
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.tryGitCommand).mockReturnValue(false",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 181,
        "end": 186,
        "startLoc": {
          "line": 181,
          "column": 47,
          "position": 1783
        },
        "endLoc": {
          "line": 186,
          "column": 6,
          "position": 1863
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 55,
        "end": 171,
        "startLoc": {
          "line": 55,
          "column": 34,
          "position": 490
        },
        "endLoc": {
          "line": 171,
          "column": 5,
          "position": 1691
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ", () => {\n    it('should reject symbolic refs like HEAD', () => {\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation((hash) => {\n        if (!/^[0-9a-f]{4,40}$/.test(hash)) {\n          throw new Error('Invalid tree hash: must be hexadecimal');\n        }\n      });\n\n      expect(() => hasNote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 193,
        "end": 201,
        "startLoc": {
          "line": 193,
          "column": 10,
          "position": 1915
        },
        "endLoc": {
          "line": 201,
          "column": 8,
          "position": 2000
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 30,
        "end": 38,
        "startLoc": {
          "line": 30,
          "column": 10,
          "position": 212
        },
        "endLoc": {
          "line": 38,
          "column": 8,
          "position": 297
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ", () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.tryGitCommand).mockReturnValue(true);\n\n      const result = hasNote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 205,
        "end": 212,
        "startLoc": {
          "line": 205,
          "column": 38,
          "position": 2035
        },
        "endLoc": {
          "line": 212,
          "column": 8,
          "position": 2127
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 55,
        "end": 173,
        "startLoc": {
          "line": 55,
          "column": 34,
          "position": 490
        },
        "endLoc": {
          "line": 173,
          "column": 11,
          "position": 1703
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n    });\n\n    it('should return false when note does not exist', () => {\n      const validHash = 'abc123def456789012345678901234567890abcd' as TreeHash;\n\n      vi.mocked(gitExecutor.validateNotesRef).mockImplementation(() => {});\n      vi.mocked(gitExecutor.validateTreeHash).mockImplementation(() => {});\n      vi.mocked(gitExecutor.tryGitCommand).mockReturnValue(false);\n\n      const result = hasNote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 213,
        "end": 223,
        "startLoc": {
          "line": 213,
          "column": 5,
          "position": 2149
        },
        "endLoc": {
          "line": 223,
          "column": 8,
          "position": 2254
        }
      },
      "secondFile": {
        "name": "packages/git/test/git-notes.test.ts",
        "start": 178,
        "end": 188,
        "startLoc": {
          "line": 178,
          "column": 7,
          "position": 1770
        },
        "endLoc": {
          "line": 188,
          "column": 11,
          "position": 1875
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": "const checker = new BranchSyncChecker({ gitExecutor: mockGitExecutor as GitExecutor });\n      const result = await checker.checkSync();\n\n      expect(result.isUpToDate).toBe(true);\n      expect(result.behindBy).toBe(0);\n      expect(result.hasRemote",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 59,
        "end": 64,
        "startLoc": {
          "line": 59,
          "column": 7,
          "position": 617
        },
        "endLoc": {
          "line": 64,
          "column": 10,
          "position": 692
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 28,
        "end": 33,
        "startLoc": {
          "line": 28,
          "column": 7,
          "position": 238
        },
        "endLoc": {
          "line": 33,
          "column": 14,
          "position": 313
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", async () => {\n      mockGitExecutor\n        .mockResolvedValueOnce({ stdout: 'feature/test\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'abc123\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '0\\n'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 81,
        "end": 86,
        "startLoc": {
          "line": 81,
          "column": 38,
          "position": 874
        },
        "endLoc": {
          "line": 86,
          "column": 6,
          "position": 957
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 38,
        "end": 43,
        "startLoc": {
          "line": 38,
          "column": 54,
          "position": 359
        },
        "endLoc": {
          "line": 43,
          "column": 6,
          "position": 442
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'abc123\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '0\\n', stderr: '' });\n\n      const checker = new BranchSyncChecker({ gitExecutor",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 101,
        "end": 106,
        "startLoc": {
          "line": 101,
          "column": 23,
          "position": 1093
        },
        "endLoc": {
          "line": 106,
          "column": 12,
          "position": 1178
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 83,
        "end": 89,
        "startLoc": {
          "line": 83,
          "column": 17,
          "position": 898
        },
        "endLoc": {
          "line": 89,
          "column": 13,
          "position": 984
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ", async () => {\n      mockGitExecutor\n        .mockResolvedValueOnce({ stdout: 'feature/test\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'abc123\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '', stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'invalid\\n'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 112,
        "end": 117,
        "startLoc": {
          "line": 112,
          "column": 42,
          "position": 1232
        },
        "endLoc": {
          "line": 117,
          "column": 12,
          "position": 1315
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 38,
        "end": 43,
        "startLoc": {
          "line": 38,
          "column": 54,
          "position": 359
        },
        "endLoc": {
          "line": 43,
          "column": 6,
          "position": 442
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "mockGitExecutor\n        .mockResolvedValueOnce({ stdout: 'feature/test\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'abc123\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '0\\n', stderr: '' });\n\n      const checker = new BranchSyncChecker({\n        remoteBranch: maliciousBranch",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 141,
        "end": 148,
        "startLoc": {
          "line": 141,
          "column": 7,
          "position": 1560
        },
        "endLoc": {
          "line": 148,
          "column": 16,
          "position": 1661
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 82,
        "end": 89,
        "startLoc": {
          "line": 82,
          "column": 7,
          "position": 886
        },
        "endLoc": {
          "line": 89,
          "column": 17,
          "position": 987
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ", async () => {\n      mockGitExecutor\n        .mockResolvedValueOnce({ stdout: 'feature/test\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'abc123\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '0\\n', stderr: '' });\n\n      const result",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 230,
        "end": 237,
        "startLoc": {
          "line": 230,
          "column": 32,
          "position": 2395
        },
        "endLoc": {
          "line": 237,
          "column": 7,
          "position": 2494
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 38,
        "end": 88,
        "startLoc": {
          "line": 38,
          "column": 54,
          "position": 359
        },
        "endLoc": {
          "line": 88,
          "column": 8,
          "position": 973
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ", stderr: '' })\n        .mockResolvedValueOnce({ stdout: 'abc123\\n', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '', stderr: '' })\n        .mockResolvedValueOnce({ stdout: '0\\n', stderr: '' });\n\n      const result = await checkBranchSync({\n        remoteBranch",
      "tokens": 0,
      "firstFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 232,
        "end": 238,
        "startLoc": {
          "line": 232,
          "column": 17,
          "position": 2419
        },
        "endLoc": {
          "line": 238,
          "column": 13,
          "position": 2505
        }
      },
      "secondFile": {
        "name": "packages/git/test/branch-sync.test.ts",
        "start": 219,
        "end": 224,
        "startLoc": {
          "line": 219,
          "column": 9,
          "position": 2258
        },
        "endLoc": {
          "line": 224,
          "column": 12,
          "position": 2343
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": "}],\n        totalErrors: 1,\n        summary: '1 error',\n        guidance: 'Fix it',\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: ['test'],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      const wrappedExtract = createSandboxedExtractor(plugin, { trust: 'full' });\n      const result = await wrappedExtract('error'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 101,
        "end": 119,
        "startLoc": {
          "line": 101,
          "column": 2,
          "position": 890
        },
        "endLoc": {
          "line": 119,
          "column": 8,
          "position": 1028
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 74,
        "end": 92,
        "startLoc": {
          "line": 74,
          "column": 2,
          "position": 626
        },
        "endLoc": {
          "line": 92,
          "column": 21,
          "position": 764
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ",\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: ['test'],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      const wrappedExtract = createSandboxedExtractor(plugin, { trust: 'full' });\n      const result = await wrappedExtract('clean output'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 129,
        "end": 144,
        "startLoc": {
          "line": 129,
          "column": 11,
          "position": 1120
        },
        "endLoc": {
          "line": 144,
          "column": 15,
          "position": 1235
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 77,
        "end": 92,
        "startLoc": {
          "line": 77,
          "column": 9,
          "position": 649
        },
        "endLoc": {
          "line": 92,
          "column": 21,
          "position": 764
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ", async () => {\n      const plugin = createMockPlugin((output) => ({\n        errors: [{ file: 'test.ts', line: 1, message: output }],\n        totalErrors: 1,\n        summary: '1 error',\n        guidance: 'Fix it',\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: ['test'],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      const wrappedExtract = createSandboxedExtractor(plugin, { trust: 'sandbox'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 152,
        "end": 171,
        "startLoc": {
          "line": 152,
          "column": 38,
          "position": 1296
        },
        "endLoc": {
          "line": 171,
          "column": 10,
          "position": 1470
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 72,
        "end": 91,
        "startLoc": {
          "line": 72,
          "column": 55,
          "position": 573
        },
        "endLoc": {
          "line": 91,
          "column": 7,
          "position": 747
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": ", async () => {\n      const plugin = createMockPlugin((output) => ({\n        errors: [{ file: 'test.ts', line: 1, message: output }],\n        totalErrors: 1,\n        summary: '1 error',\n        guidance: 'Fix it',\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: ['test'],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      // No trust specified - should default to sandbox",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 178,
        "end": 197,
        "startLoc": {
          "line": 178,
          "column": 62,
          "position": 1535
        },
        "endLoc": {
          "line": 197,
          "column": 50,
          "position": 1693
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 72,
        "end": 91,
        "startLoc": {
          "line": 72,
          "column": 55,
          "position": 573
        },
        "endLoc": {
          "line": 91,
          "column": 6,
          "position": 731
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ",\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: ['test'],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      const wrappedExtract = createSandboxedExtractor(plugin, { trust: 'sandbox' });\n      const result = await wrappedExtract('multiple errors'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 213,
        "end": 228,
        "startLoc": {
          "line": 213,
          "column": 11,
          "position": 1874
        },
        "endLoc": {
          "line": 228,
          "column": 18,
          "position": 1989
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 77,
        "end": 172,
        "startLoc": {
          "line": 77,
          "column": 9,
          "position": 649
        },
        "endLoc": {
          "line": 172,
          "column": 21,
          "position": 1487
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ");\n    });\n\n    it('should handle extractors that return no errors', async () => {\n      const plugin = createMockPlugin(() => ({\n        errors: [],\n        totalErrors: 0,\n        summary: 'No errors',\n        guidance: 'All good',\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: ['test'],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      const wrappedExtract = createSandboxedExtractor(plugin, { trust: 'sandbox' });\n      const result = await wrappedExtract('clean output'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 282,
        "end": 305,
        "startLoc": {
          "line": 282,
          "column": 3,
          "position": 2478
        },
        "endLoc": {
          "line": 305,
          "column": 15,
          "position": 2661
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 121,
        "end": 172,
        "startLoc": {
          "line": 121,
          "column": 18,
          "position": 1052
        },
        "endLoc": {
          "line": 172,
          "column": 21,
          "position": 1487
        }
      }
    },
    {
      "format": "typescript",
      "lines": 22,
      "fragment": ", async () => {\n      const plugin = createMockPlugin(() => ({\n        errors: [],\n        totalErrors: 0,\n        summary: 'No errors',\n        guidance: '',\n        metadata: {\n          detection: {\n            extractor: 'test-extractor',\n            confidence: 100,\n            patterns: [],\n            reason: 'Test',\n          },\n          confidence: 100,\n          completeness: 100,\n          issues: [],\n        },\n      }));\n\n      const wrappedExtract = createSandboxedExtractor(plugin, {\n        trust: 'sandbox',\n        timeoutMs",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 386,
        "end": 407,
        "startLoc": {
          "line": 386,
          "column": 32,
          "position": 3376
        },
        "endLoc": {
          "line": 407,
          "column": 10,
          "position": 3533
        }
      },
      "secondFile": {
        "name": "packages/extractors/test/sandboxed-extractor.test.ts",
        "start": 358,
        "end": 379,
        "startLoc": {
          "line": 358,
          "column": 37,
          "position": 3171
        },
        "endLoc": {
          "line": 379,
          "column": 14,
          "position": 3328
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ",\n          metadata: {\n            confidence: 100,\n            completeness: 100,\n            issues: [],\n            detection: {\n              extractor: 'vitest',\n              confidence: 100,\n              patterns: [],\n              reason: 'test',\n            },\n          },\n        },\n      };\n\n      const result = StepResultSchema.parse",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 111,
        "end": 126,
        "startLoc": {
          "line": 111,
          "column": 3,
          "position": 783
        },
        "endLoc": {
          "line": 126,
          "column": 6,
          "position": 874
        }
      },
      "secondFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 52,
        "end": 67,
        "startLoc": {
          "line": 52,
          "column": 37,
          "position": 332
        },
        "endLoc": {
          "line": 67,
          "column": 10,
          "position": 423
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "];\n\n      // Check that expected fields appear in order\n      let lastIndex = -1;\n      for (const expectedKey of expectedOrder) {\n        const currentIndex = keys.indexOf(expectedKey);\n        if (currentIndex !== -1) {\n          expect(currentIndex).toBeGreaterThan(lastIndex);\n          lastIndex = currentIndex;\n        }\n      }\n    });\n  });\n\n  describe('v0.15.0 breaking changes'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 138,
        "end": 152,
        "startLoc": {
          "line": 138,
          "column": 7,
          "position": 948
        },
        "endLoc": {
          "line": 152,
          "column": 27,
          "position": 1050
        }
      },
      "secondFile": {
        "name": "packages/cli/test/schemas/run-result-schema.test.ts",
        "start": 75,
        "end": 89,
        "startLoc": {
          "line": 75,
          "column": 7,
          "position": 499
        },
        "endLoc": {
          "line": 89,
          "column": 24,
          "position": 601
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", // ❌ Removed in v0.15.0\n      };\n\n      const result = StepResultSchema.safeParse(stepWithOldFormat);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.error.errors.some(e =>\n          e.message.includes('Unrecognized key')\n        )).toBe(true);\n      }\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 180,
        "end": 192,
        "startLoc": {
          "line": 180,
          "column": 2,
          "position": 1287
        },
        "endLoc": {
          "line": 192,
          "column": 2,
          "position": 1382
        }
      },
      "secondFile": {
        "name": "packages/core/test/step-result-schema.test.ts",
        "start": 160,
        "end": 173,
        "startLoc": {
          "line": 160,
          "column": 19,
          "position": 1125
        },
        "endLoc": {
          "line": 173,
          "column": 3,
          "position": 1221
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "};\n\n      const result = safeValidateResult(invalidResult);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.errors.some(e =>\n          e.includes('Unrecognized key') || e.includes('unknownField'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 72,
        "end": 79,
        "startLoc": {
          "line": 72,
          "column": 7,
          "position": 506
        },
        "endLoc": {
          "line": 79,
          "column": 15,
          "position": 577
        }
      },
      "secondFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 42,
        "end": 49,
        "startLoc": {
          "line": 42,
          "column": 7,
          "position": 282
        },
        "endLoc": {
          "line": 49,
          "column": 13,
          "position": 353
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "}]\n        }]\n      };\n\n      const result = safeValidateResult(invalidResult);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.errors.some(e =>\n          e.includes('Unrecognized key') || e.includes('_internalFlag'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 100,
        "end": 109,
        "startLoc": {
          "line": 100,
          "column": 11,
          "position": 722
        },
        "endLoc": {
          "line": 109,
          "column": 16,
          "position": 801
        }
      },
      "secondFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 70,
        "end": 49,
        "startLoc": {
          "line": 70,
          "column": 11,
          "position": 498
        },
        "endLoc": {
          "line": 49,
          "column": 13,
          "position": 353
        }
      }
    },
    {
      "format": "typescript",
      "lines": 16,
      "fragment": ", () => {\n      const v014Result = {\n        passed: false,\n        timestamp: '2025-11-04T16:00:00.000Z',\n        treeHash: 'abc123def456',\n        phases: [{\n          name: 'Testing',\n          passed: false,\n          durationSecs: 10.5,\n          steps: [{\n            name: 'Unit Tests',\n            command: 'npm test',\n            exitCode: 1,\n            durationSecs: 10.5,\n            passed: false,\n            failedTests",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 240,
        "end": 255,
        "startLoc": {
          "line": 240,
          "column": 64,
          "position": 1790
        },
        "endLoc": {
          "line": 255,
          "column": 12,
          "position": 1900
        }
      },
      "secondFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 210,
        "end": 225,
        "startLoc": {
          "line": 210,
          "column": 59,
          "position": 1566
        },
        "endLoc": {
          "line": 225,
          "column": 7,
          "position": 1676
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ", // ❌ v0.14.x field - removed in v0.15.0\n          }]\n        }]\n      };\n\n      const result = safeValidateResult(v014Result);\n\n      expect(result.success).toBe(false);\n      if (!result.success) {\n        expect(result.errors.some(e =>\n          e.includes('Unrecognized key') && e.includes('failedTests'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 255,
        "end": 265,
        "startLoc": {
          "line": 255,
          "column": 2,
          "position": 1906
        },
        "endLoc": {
          "line": 265,
          "column": 14,
          "position": 1990
        }
      },
      "secondFile": {
        "name": "packages/core/test/result-schema-strict.test.ts",
        "start": 225,
        "end": 235,
        "startLoc": {
          "line": 225,
          "column": 14,
          "position": 1680
        },
        "endLoc": {
          "line": 235,
          "column": 9,
          "position": 1764
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", () => {\n    const config = {\n      validation: {\n        phases: [{\n          name: 'Test',\n          steps: [{ name: 'Test', command: 'npm test' }]\n        }]\n      },\n      hooks: {\n        preCommit: {\n          enabled: true,\n          secretScanning: {\n            enabled: true",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 260,
        "end": 272,
        "startLoc": {
          "line": 260,
          "column": 71,
          "position": 1988
        },
        "endLoc": {
          "line": 272,
          "column": 5,
          "position": 2084
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 216,
        "end": 228,
        "startLoc": {
          "line": 216,
          "column": 55,
          "position": 1655
        },
        "endLoc": {
          "line": 228,
          "column": 6,
          "position": 1751
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "}\n        }\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(true);\n    expect(result.data?.hooks?.preCommit?.secretScanning?.enabled).toBe(true);\n    expect(result.data?.hooks?.preCommit?.secretScanning?.scanCommand).toBeUndefined",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 274,
        "end": 282,
        "startLoc": {
          "line": 274,
          "column": 11,
          "position": 2090
        },
        "endLoc": {
          "line": 282,
          "column": 14,
          "position": 2176
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 205,
        "end": 213,
        "startLoc": {
          "line": 205,
          "column": 11,
          "position": 1553
        },
        "endLoc": {
          "line": 213,
          "column": 5,
          "position": 1639
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", () => {\n    const config = {\n      validation: {\n        phases: [{\n          name: 'Test',\n          steps: [{ name: 'Test', command: 'npm test' }]\n        }]\n      },\n      hooks: {\n        preCommit: {\n          secretScanning: {\n            enabled: true,\n            scanCommand: ''",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 332,
        "end": 344,
        "startLoc": {
          "line": 332,
          "column": 34,
          "position": 2523
        },
        "endLoc": {
          "line": 344,
          "column": 3,
          "position": 2619
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 285,
        "end": 297,
        "startLoc": {
          "line": 285,
          "column": 36,
          "position": 2191
        },
        "endLoc": {
          "line": 297,
          "column": 31,
          "position": 2287
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ", () => {\n    const config = {\n      validation: {\n        phases: [{\n          name: 'Test',\n          steps: [{ name: 'Test', command: 'npm test' }]\n        }]\n      },\n      locking: {\n        enabled: true,\n        concurrencyScope: 'directory'\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(true);\n    expect(result.data?.locking?.concurrencyScope",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 417,
        "end": 433,
        "startLoc": {
          "line": 417,
          "column": 56,
          "position": 3232
        },
        "endLoc": {
          "line": 433,
          "column": 17,
          "position": 3364
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 358,
        "end": 374,
        "startLoc": {
          "line": 358,
          "column": 56,
          "position": 2739
        },
        "endLoc": {
          "line": 374,
          "column": 8,
          "position": 2871
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "}\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(true);\n    expect(result.data?.locking?.enabled).toBe(true);\n    expect(result.data?.locking?.concurrencyScope).toBe('directory');\n  });\n\n  it('should reject invalid concurrencyScope values'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 443,
        "end": 452,
        "startLoc": {
          "line": 443,
          "column": 7,
          "position": 3447
        },
        "endLoc": {
          "line": 452,
          "column": 48,
          "position": 3530
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 369,
        "end": 378,
        "startLoc": {
          "line": 369,
          "column": 7,
          "position": 2826
        },
        "endLoc": {
          "line": 378,
          "column": 47,
          "position": 2909
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": "}\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(true);\n    expect(result.data?.locking?.concurrencyScope).toBe('project');\n    expect(result.data?.locking?.projectId).toBeUndefined",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 484,
        "end": 490,
        "startLoc": {
          "line": 484,
          "column": 7,
          "position": 3803
        },
        "endLoc": {
          "line": 490,
          "column": 14,
          "position": 3871
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 408,
        "end": 414,
        "startLoc": {
          "line": 408,
          "column": 7,
          "position": 3148
        },
        "endLoc": {
          "line": 414,
          "column": 5,
          "position": 3216
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "};\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Unrecognized key'))).toBe(true);\n  });\n\n  it",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 525,
        "end": 533,
        "startLoc": {
          "line": 525,
          "column": 5,
          "position": 4163
        },
        "endLoc": {
          "line": 533,
          "column": 3,
          "position": 4243
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 505,
        "end": 512,
        "startLoc": {
          "line": 505,
          "column": 5,
          "position": 3976
        },
        "endLoc": {
          "line": 512,
          "column": 2,
          "position": 4054
        }
      }
    },
    {
      "format": "typescript",
      "lines": 10,
      "fragment": "}\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Unrecognized key'))).toBe(true);\n  });\n\n  it('should reject unknown properties in git config'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 565,
        "end": 574,
        "startLoc": {
          "line": 565,
          "column": 7,
          "position": 4525
        },
        "endLoc": {
          "line": 574,
          "column": 49,
          "position": 4610
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 504,
        "end": 533,
        "startLoc": {
          "line": 504,
          "column": 7,
          "position": 3973
        },
        "endLoc": {
          "line": 533,
          "column": 62,
          "position": 4245
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "}]\n        }]\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('git'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 583,
        "end": 591,
        "startLoc": {
          "line": 583,
          "column": 2,
          "position": 4690
        },
        "endLoc": {
          "line": 591,
          "column": 6,
          "position": 4763
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 563,
        "end": 571,
        "startLoc": {
          "line": 563,
          "column": 11,
          "position": 4517
        },
        "endLoc": {
          "line": 571,
          "column": 19,
          "position": 4590
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", () => {\n    const config = {\n      validation: {\n        phases: [{\n          name: 'Test',\n          steps: [{ name: 'Test', command: 'npm test' }]\n        }]\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(true);\n    expect(result.data?.extractors",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 617,
        "end": 629,
        "startLoc": {
          "line": 617,
          "column": 60,
          "position": 4955
        },
        "endLoc": {
          "line": 629,
          "column": 11,
          "position": 5061
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 436,
        "end": 448,
        "startLoc": {
          "line": 436,
          "column": 51,
          "position": 3383
        },
        "endLoc": {
          "line": 448,
          "column": 8,
          "position": 3489
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ", () => {\n    const config = {\n      validation: {\n        phases: [{\n          name: 'Test',\n          steps: [{ name: 'Test', command: 'npm test' }]\n        }]\n      },\n      extractors: {\n        builtins: {\n          trust: 'full',\n          disable: ['maven-compiler']",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 796,
        "end": 807,
        "startLoc": {
          "line": 796,
          "column": 45,
          "position": 6425
        },
        "endLoc": {
          "line": 807,
          "column": 2,
          "position": 6517
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 656,
        "end": 667,
        "startLoc": {
          "line": 656,
          "column": 59,
          "position": 5334
        },
        "endLoc": {
          "line": 667,
          "column": 2,
          "position": 5426
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "}\n        ]\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(true);\n    expect(result.data?.extractors?.builtins?.trust).toBe('full');\n    expect(result.data?.extractors?.builtins?.disable).toEqual(['maven-compiler'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 817,
        "end": 825,
        "startLoc": {
          "line": 817,
          "column": 11,
          "position": 6571
        },
        "endLoc": {
          "line": 825,
          "column": 17,
          "position": 6654
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 623,
        "end": 630,
        "startLoc": {
          "line": 623,
          "column": 9,
          "position": 5015
        },
        "endLoc": {
          "line": 630,
          "column": 2,
          "position": 5096
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": "}\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Invalid enum'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 842,
        "end": 849,
        "startLoc": {
          "line": 842,
          "column": 9,
          "position": 6823
        },
        "endLoc": {
          "line": 849,
          "column": 15,
          "position": 6891
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 346,
        "end": 353,
        "startLoc": {
          "line": 346,
          "column": 9,
          "position": 2625
        },
        "endLoc": {
          "line": 353,
          "column": 14,
          "position": 2693
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "}\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Invalid enum') || e.includes('trust'))).toBe(true);\n  });\n\n  it('should reject invalid trust level for external extractor'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 863,
        "end": 873,
        "startLoc": {
          "line": 863,
          "column": 9,
          "position": 7007
        },
        "endLoc": {
          "line": 873,
          "column": 59,
          "position": 7104
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 346,
        "end": 852,
        "startLoc": {
          "line": 346,
          "column": 9,
          "position": 2625
        },
        "endLoc": {
          "line": 852,
          "column": 53,
          "position": 6920
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "}\n        ]\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Invalid enum') || e.includes('trust'))).toBe(true);\n  });\n\n  it('should reject empty package name for external extractor'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 886,
        "end": 897,
        "startLoc": {
          "line": 886,
          "column": 11,
          "position": 7201
        },
        "endLoc": {
          "line": 897,
          "column": 58,
          "position": 7301
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 564,
        "end": 852,
        "startLoc": {
          "line": 564,
          "column": 9,
          "position": 4521
        },
        "endLoc": {
          "line": 852,
          "column": 53,
          "position": 6920
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "}\n        ]\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Package name'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 910,
        "end": 918,
        "startLoc": {
          "line": 910,
          "column": 11,
          "position": 7398
        },
        "endLoc": {
          "line": 918,
          "column": 15,
          "position": 7469
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 564,
        "end": 571,
        "startLoc": {
          "line": 564,
          "column": 9,
          "position": 4521
        },
        "endLoc": {
          "line": 571,
          "column": 19,
          "position": 4590
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "}\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Unrecognized key'))).toBe(true);\n  });\n\n  it('should reject unknown properties in external extractor'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 933,
        "end": 943,
        "startLoc": {
          "line": 933,
          "column": 9,
          "position": 7592
        },
        "endLoc": {
          "line": 943,
          "column": 57,
          "position": 7680
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 346,
        "end": 533,
        "startLoc": {
          "line": 346,
          "column": 9,
          "position": 2625
        },
        "endLoc": {
          "line": 533,
          "column": 62,
          "position": 4245
        }
      }
    },
    {
      "format": "typescript",
      "lines": 13,
      "fragment": ", () => {\n    const config = {\n      validation: {\n        phases: [{\n          name: 'Test',\n          steps: [{ name: 'Test', command: 'npm test' }]\n        }]\n      },\n      extractors: {\n        external: [\n          {\n            package: '@myorg/plugin',\n            trust: 'sandbox'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 943,
        "end": 955,
        "startLoc": {
          "line": 943,
          "column": 57,
          "position": 7681
        },
        "endLoc": {
          "line": 955,
          "column": 10,
          "position": 7774
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 873,
        "end": 885,
        "startLoc": {
          "line": 873,
          "column": 59,
          "position": 7105
        },
        "endLoc": {
          "line": 885,
          "column": 10,
          "position": 7198
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": "}\n        ]\n      }\n    };\n\n    const result = safeValidateConfig(config);\n    expect(result.success).toBe(false);\n    expect(result.errors).toBeDefined();\n    expect(result.errors!.some(e => e.includes('Unrecognized key'))).toBe(true);\n  });\n});",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 957,
        "end": 967,
        "startLoc": {
          "line": 957,
          "column": 11,
          "position": 7784
        },
        "endLoc": {
          "line": 967,
          "column": 2,
          "position": 7873
        }
      },
      "secondFile": {
        "name": "packages/config/test/schema.test.ts",
        "start": 564,
        "end": 512,
        "startLoc": {
          "line": 564,
          "column": 9,
          "position": 4521
        },
        "endLoc": {
          "line": 512,
          "column": 2,
          "position": 4056
        }
      }
    },
    {
      "format": "typescript",
      "lines": 8,
      "fragment": ": string;\n\n  beforeEach(async () => {\n    // Create unique temp directory for each test\n    // eslint-disable-next-line sonarjs/pseudo-random -- Safe for test directory uniqueness\n    testDir = join(normalizedTmpdir(), `vibe-validate-test-${Date.now()}-${Math.random()}`);\n    await mkdir(testDir, { recursive: true });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/test/loader.test.ts",
        "start": 18,
        "end": 25,
        "startLoc": {
          "line": 18,
          "column": 8,
          "position": 115
        },
        "endLoc": {
          "line": 25,
          "column": 2,
          "position": 191
        }
      },
      "secondFile": {
        "name": "packages/cli/test/commands/init-focused-modes.test.ts",
        "start": 22,
        "end": 29,
        "startLoc": {
          "line": 22,
          "column": 8,
          "position": 119
        },
        "endLoc": {
          "line": 29,
          "column": 8,
          "position": 195
        }
      }
    },
    {
      "format": "typescript",
      "lines": 18,
      "fragment": "const config: VibeValidateConfig = {\n        validation: {\n          phases: []\n        }\n      };\n\n      const context: AgentContext = {\n        isAgent: false,\n        isCI: false,\n        isInteractive: true\n      };\n\n      const runnerConfig = createRunnerConfig(config, {\n        verbose: true,\n        context\n      });\n\n      expect(runnerConfig.env?",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 90,
        "end": 107,
        "startLoc": {
          "line": 90,
          "column": 7,
          "position": 632
        },
        "endLoc": {
          "line": 107,
          "column": 2,
          "position": 737
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 63,
        "end": 80,
        "startLoc": {
          "line": 63,
          "column": 7,
          "position": 463
        },
        "endLoc": {
          "line": 80,
          "column": 2,
          "position": 568
        }
      }
    },
    {
      "format": "typescript",
      "lines": 19,
      "fragment": ", () => {\n      const config: VibeValidateConfig = {\n        validation: {\n          phases: []\n        }\n      };\n\n      const context: AgentContext = {\n        isAgent: false,\n        isCI: false,\n        isInteractive: true\n      };\n\n      const runnerConfig = createRunnerConfig(config, {\n        verbose: true,\n        context\n      });\n\n      expect(runnerConfig.onPhaseStart",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 131,
        "end": 149,
        "startLoc": {
          "line": 131,
          "column": 53,
          "position": 920
        },
        "endLoc": {
          "line": 149,
          "column": 13,
          "position": 1034
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 62,
        "end": 80,
        "startLoc": {
          "line": 62,
          "column": 56,
          "position": 453
        },
        "endLoc": {
          "line": 80,
          "column": 4,
          "position": 567
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ",\n        context\n      });\n\n      expect(runnerConfig.onPhaseStart).toBeDefined();\n      expect(runnerConfig.onPhaseComplete).toBeDefined();\n      expect(runnerConfig.onStepStart).toBeDefined();\n      expect(runnerConfig.onStepComplete).toBeDefined();\n    });\n\n    it('should include minimal callbacks for CI context (verbose=false)'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 170,
        "end": 180,
        "startLoc": {
          "line": 170,
          "column": 6,
          "position": 1196
        },
        "endLoc": {
          "line": 180,
          "column": 66,
          "position": 1268
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 145,
        "end": 155,
        "startLoc": {
          "line": 145,
          "column": 5,
          "position": 1018
        },
        "endLoc": {
          "line": 155,
          "column": 54,
          "position": 1090
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": ",\n        isInteractive: false\n      };\n\n      const runnerConfig = createRunnerConfig(config, {\n        verbose: false,\n        context\n      });\n\n      expect(runnerConfig.onPhaseStart).toBeDefined();\n      expect(runnerConfig.onPhaseComplete).toBeDefined();\n      expect(runnerConfig.onStepStart).toBeDefined();\n      expect(runnerConfig.onStepComplete).toBeDefined();\n    });\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 189,
        "end": 203,
        "startLoc": {
          "line": 189,
          "column": 5,
          "position": 1335
        },
        "endLoc": {
          "line": 203,
          "column": 2,
          "position": 1436
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 165,
        "end": 155,
        "startLoc": {
          "line": 165,
          "column": 6,
          "position": 1164
        },
        "endLoc": {
          "line": 155,
          "column": 3,
          "position": 1088
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", () => {\n      const config: VibeValidateConfig = {\n        validation: {\n          phases: [\n            {\n              name: 'Test Phase',\n              parallel: true,\n              steps: []\n            }\n          ]\n        }\n      };\n\n      const context: AgentContext = {\n        isAgent: false,\n        isCI: false,\n        isInteractive: true\n      };\n\n      const runnerConfig = createRunnerConfig(config, {\n        verbose: true,\n        context\n      });\n\n      // Call the callback with success result",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 238,
        "end": 262,
        "startLoc": {
          "line": 238,
          "column": 40,
          "position": 1651
        },
        "endLoc": {
          "line": 262,
          "column": 41,
          "position": 1790
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 206,
        "end": 230,
        "startLoc": {
          "line": 206,
          "column": 45,
          "position": 1458
        },
        "endLoc": {
          "line": 230,
          "column": 21,
          "position": 1597
        }
      }
    },
    {
      "format": "typescript",
      "lines": 25,
      "fragment": ", () => {\n      const config: VibeValidateConfig = {\n        validation: {\n          phases: [\n            {\n              name: 'Test Phase',\n              parallel: true,\n              steps: []\n            }\n          ]\n        }\n      };\n\n      const context: AgentContext = {\n        isAgent: false,\n        isCI: false,\n        isInteractive: true\n      };\n\n      const runnerConfig = createRunnerConfig(config, {\n        verbose: true,\n        context\n      });\n\n      // Call the callback with failure result",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 275,
        "end": 299,
        "startLoc": {
          "line": 275,
          "column": 40,
          "position": 1878
        },
        "endLoc": {
          "line": 299,
          "column": 41,
          "position": 2017
        }
      },
      "secondFile": {
        "name": "packages/cli/test/runner-adapter.test.ts",
        "start": 206,
        "end": 230,
        "startLoc": {
          "line": 206,
          "column": 45,
          "position": 1458
        },
        "endLoc": {
          "line": 230,
          "column": 21,
          "position": 1597
        }
      }
    },
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ");\n      const content = readFileSync(filePath, 'utf-8');\n      const config = parseYaml(content) as any;\n\n      expect(config.validation.phases).toHaveLength(3);\n      expect(config.validation.phases[0].name).toBe('Pre-Qualification');\n      expect(config.validation.phases[1].name).toBe('Testing');\n      expect(config.validation.phases[2].name).toBe('Build');\n    });\n\n    it('all templates should have git.mainBranch configured'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/config-templates.test.ts",
        "start": 132,
        "end": 142,
        "startLoc": {
          "line": 132,
          "column": 24,
          "position": 1192
        },
        "endLoc": {
          "line": 142,
          "column": 54,
          "position": 1317
        }
      },
      "secondFile": {
        "name": "packages/cli/test/config-templates.test.ts",
        "start": 121,
        "end": 131,
        "startLoc": {
          "line": 121,
          "column": 25,
          "position": 1044
        },
        "endLoc": {
          "line": 131,
          "column": 76,
          "position": 1169
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": ";\n      writeFileSync(join(testDir, 'vibe-validate.config.yaml'), configContent);\n\n      // Initialize git\n      initializeGitRepo(testDir);\n      executeGitCommand(['-C', testDir, 'add', '.'], { suppressStderr: true });\n      executeGitCommand(['-C', testDir, 'commit', '-m', 'Initial commit'], { suppressStderr: true });\n\n      // Run validate with --force",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/test/bin.test.ts",
        "start": 767,
        "end": 775,
        "startLoc": {
          "line": 767,
          "column": 2,
          "position": 7470
        },
        "endLoc": {
          "line": 775,
          "column": 29,
          "position": 7560
        }
      },
      "secondFile": {
        "name": "packages/cli/test/bin.test.ts",
        "start": 682,
        "end": 690,
        "startLoc": {
          "line": 682,
          "column": 2,
          "position": 6711
        },
        "endLoc": {
          "line": 690,
          "column": 32,
          "position": 6801
        }
      }
    }
  ]
}