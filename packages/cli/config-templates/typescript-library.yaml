# ============================================================================
# CONFIGURATION TEMPLATE - vibe-validate for TypeScript Libraries
# ============================================================================
#
# USAGE:
#   1. Copy this file to your project root as 'vibe-validate.config.yaml'
#   2. Customize the validation phases and commands for your project
#   3. Run: vibe-validate validate
#
# This template is optimized for TypeScript libraries and npm packages.
# It includes pre-configured validation phases for type checking, linting,
# testing, and building.
#
# Learn more: https://github.com/jdutton/vibe-validate/blob/main/docs/configuration-reference.md
# ============================================================================

$schema: https://unpkg.com/@vibe-validate/config/config.schema.json

# Git settings
git:
  mainBranch: main

# Pre-commit hooks configuration
hooks:
  preCommit:
    enabled: true
    # Secret scanning prevents accidental credential commits
    secretScanning:
      enabled: true
      # Autodetect mode (recommended): Omit scanCommand to auto-detect tools
      # Automatically runs tools based on config files present:
      #   - .gitleaks.toml or .gitleaksignore → runs gitleaks
      #   - .secretlintrc.json → runs secretlint (via npx)
      #   - Both files present → runs both tools (defense-in-depth)
      #
      # Setup options:
      # 1. gitleaks (recommended - fast, 160+ secret types):
      #    macOS: brew install gitleaks
      #    Linux/Windows: https://github.com/gitleaks/gitleaks#installation
      #    Create .gitleaksignore for false positives
      #
      # 2. secretlint (npm-based, always available):
      #    npm install --save-dev @secretlint/secretlint-rule-preset-recommend secretlint
      #    Create .secretlintrc.json with: {"rules": [{"id": "@secretlint/secretlint-rule-preset-recommend"}]}
      #    Create .secretlintignore for false positives
      #
      # 3. Both (defense-in-depth): Create both config files
      #
      # To use explicit command instead: scanCommand: "gitleaks protect --staged --verbose"
      # To disable: set enabled: false

# Validation configuration
validation:
  phases:
    - name: Pre-Qualification
      parallel: true
      steps:
        - name: TypeScript
          command: tsc --noEmit
        - name: ESLint
          command: eslint .

    - name: Build & Test
      steps:
        - name: Unit Tests
          command: npm test
        - name: Build
          command: npm run build
