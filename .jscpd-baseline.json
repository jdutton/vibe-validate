{
  "duplicates": [
    {
      "format": "typescript",
      "lines": 11,
      "fragment": ".exec(output)) !== null) {\n      errors.push({\n        file: match[1].trim(),\n        line: Number.parseInt(match[2]),\n        column: Number.parseInt(match[3]),\n        severity: match[4] as 'error' | 'warning',\n        code: match[5],\n        message: match[6].trim(),\n      });\n    }\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/typescript/index.ts",
        "start": 79,
        "end": 89,
        "startLoc": {
          "line": 79,
          "column": 11,
          "position": 467
        },
        "endLoc": {
          "line": 89,
          "column": 2,
          "position": 583
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/typescript/index.ts",
        "start": 66,
        "end": 77,
        "startLoc": {
          "line": 66,
          "column": 11,
          "position": 323
        },
        "endLoc": {
          "line": 77,
          "column": 36,
          "position": 440
        }
      }
    },
    {
      "format": "typescript",
      "lines": 9,
      "fragment": "function extractFailures(output: string): TestFailureInfo[] {\n  const failures: TestFailureInfo[] = [];\n  const lines = output.split('\\n');\n\n  let i = 0;\n  while (i < lines.length) {\n    const line = lines[i];\n\n    // Look for numbered failure markers (e.g., \"1) Test name\")",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.ts",
        "start": 21,
        "end": 29,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 55
        },
        "endLoc": {
          "line": 29,
          "column": 60,
          "position": 144
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.ts",
        "start": 21,
        "end": 29,
        "startLoc": {
          "line": 21,
          "column": 1,
          "position": 55
        },
        "endLoc": {
          "line": 29,
          "column": 53,
          "position": 144
        }
      }
    },
    {
      "format": "typescript",
      "lines": 20,
      "fragment": "], 10) : 0;\n\n  // Extract all failures\n  const failures = extractFailures(output);\n\n  // Early return if no failures detected (but failure count suggested there should be)\n  if (failureCount === 0 && failures.length === 0) {\n    return processTestFailures([], 95);\n  }\n\n  // Process failures using shared utility\n  return processTestFailures(failures, 95);\n}\n\n/**\n * Detect if output is from Jasmine test framework\n *\n * @param output - Command output to analyze\n * @returns Detection result with confidence and patterns\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/jasmine/index.ts",
        "start": 160,
        "end": 179,
        "startLoc": {
          "line": 160,
          "column": 2,
          "position": 1104
        },
        "endLoc": {
          "line": 179,
          "column": 4,
          "position": 1194
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/mocha/index.ts",
        "start": 174,
        "end": 193,
        "startLoc": {
          "line": 174,
          "column": 2,
          "position": 1084
        },
        "endLoc": {
          "line": 193,
          "column": 4,
          "position": 1174
        }
      }
    },
    {
      "format": "typescript",
      "lines": 17,
      "fragment": ",\n          confidence: detection.confidence,\n          patterns: detection.patterns,\n          reason: detection.reason,\n        },\n        confidence: 100,\n        completeness: 100,\n        issues: [],\n      },\n    };\n  }\n\n  const errors: FormattedError[] = [];\n  let completeCount = 0;\n\n  for (const failure of failures) {\n    const file = failure.file ?? 'unknown'",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 164,
        "end": 180,
        "startLoc": {
          "line": 164,
          "column": 6,
          "position": 1021
        },
        "endLoc": {
          "line": 180,
          "column": 10,
          "position": 1144
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/tap/index.ts",
        "start": 158,
        "end": 174,
        "startLoc": {
          "line": 158,
          "column": 6,
          "position": 988
        },
        "endLoc": {
          "line": 174,
          "column": 10,
          "position": 1111
        }
      }
    },
    {
      "format": "typescript",
      "lines": 24,
      "fragment": ",\n      confidence: detection.confidence,\n      patterns: detection.patterns,\n      reason: detection.reason,\n    },\n    confidence,\n    completeness,\n    issues: [],\n  };\n\n  return {\n    summary,\n    errors,\n    totalErrors: failures.length,\n    errorSummary: formatCleanOutput(errors),\n    guidance,\n    metadata,\n  };\n}\n\n/**\n * Extract all failures from Ava output\n * Strategy: Find detailed headers (test names with â€º), then parse each block\n */",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 211,
        "end": 234,
        "startLoc": {
          "line": 211,
          "column": 6,
          "position": 1417
        },
        "endLoc": {
          "line": 234,
          "column": 4,
          "position": 1518
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/tap/index.ts",
        "start": 204,
        "end": 226,
        "startLoc": {
          "line": 204,
          "column": 6,
          "position": 1362
        },
        "endLoc": {
          "line": 226,
          "column": 4,
          "position": 1463
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": "+ 1, failure);\n\n        // Add error type detection and guidance\n        if (!failure.errorType && failure.message) {\n          failure.errorType = detectErrorType(failure.message);\n        }\n        if (failure.errorType) {\n          failure.guidance = getErrorGuidance(failure.errorType);\n        }\n\n        failures.push(failure);\n      }\n    }\n  }",
      "tokens": 0,
      "firstFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 296,
        "end": 309,
        "startLoc": {
          "line": 296,
          "column": 2,
          "position": 2102
        },
        "endLoc": {
          "line": 309,
          "column": 2,
          "position": 2197
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/extractors/ava/index.ts",
        "start": 271,
        "end": 283,
        "startLoc": {
          "line": 271,
          "column": 2,
          "position": 1864
        },
        "endLoc": {
          "line": 283,
          "column": 5,
          "position": 1958
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": ".result));\n\n    // Wait for stdout to flush before exiting\n    await new Promise<void>(resolve => {\n      if (process.stdout.write('')) {\n        resolve();\n      } else {\n        process.stdout.once('drain', resolve);\n      }\n    });\n  } else {\n    // Human-readable mode: Display status message",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/src/utils/check-validation.ts",
        "start": 143,
        "end": 154,
        "startLoc": {
          "line": 143,
          "column": 11,
          "position": 1203
        },
        "endLoc": {
          "line": 154,
          "column": 47,
          "position": 1288
        }
      },
      "secondFile": {
        "name": "packages/cli/src/utils/check-validation.ts",
        "start": 103,
        "end": 114,
        "startLoc": {
          "line": 103,
          "column": 11,
          "position": 802
        },
        "endLoc": {
          "line": 114,
          "column": 48,
          "position": 887
        }
      }
    },
    {
      "format": "typescript",
      "lines": 6,
      "fragment": ".substring(0, 12)}...`));\n    console.log(chalk.gray(`   Last validated: ${passingRun.timestamp}`));\n    console.log(chalk.gray(`   Duration: ${durationSecs}s`));\n    console.log(chalk.gray(`   Branch: ${passingRun.branch}`));\n\n    if (passingRun.result?",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/src/utils/check-validation.ts",
        "start": 157,
        "end": 162,
        "startLoc": {
          "line": 157,
          "column": 16,
          "position": 1339
        },
        "endLoc": {
          "line": 162,
          "column": 2,
          "position": 1419
        }
      },
      "secondFile": {
        "name": "packages/cli/src/utils/validate-workflow.ts",
        "start": 98,
        "end": 103,
        "startLoc": {
          "line": 98,
          "column": 9,
          "position": 603
        },
        "endLoc": {
          "line": 103,
          "column": 2,
          "position": 683
        }
      }
    },
    {
      "format": "typescript",
      "lines": 12,
      "fragment": "), chalk.white('vibe-validate state'));\n\n          // Find the failed step's command (v0.15.0+: rerunCommand removed, use step.command)\n          const failedStep = result.phases\n            ?.flatMap(phase => phase.steps)\n            .find(step => step.name === result.failedStep);\n\n          if (failedStep?.command) {\n            console.error(chalk.blue('ðŸ”„ To retry:'), chalk.white(failedStep.command));\n          }\n\n          process",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/src/commands/pre-commit.ts",
        "start": 145,
        "end": 156,
        "startLoc": {
          "line": 145,
          "column": 22,
          "position": 1322
        },
        "endLoc": {
          "line": 156,
          "column": 8,
          "position": 1425
        }
      },
      "secondFile": {
        "name": "packages/cli/src/utils/validate-workflow.ts",
        "start": 170,
        "end": 181,
        "startLoc": {
          "line": 170,
          "column": 27,
          "position": 1184
        },
        "endLoc": {
          "line": 181,
          "column": 86,
          "position": 1287
        }
      }
    },
    {
      "format": "typescript",
      "lines": 7,
      "fragment": ");\n        return;\n      }\n\n      console.log(`${dryRun ? 'Would prune' : 'Pruned'} ${result.notesPruned} tree hashes`);\n      console.log(`${dryRun ? 'Would remove' : 'Removed'} ${result.runsPruned} validation runs`);\n      console",
      "tokens": 0,
      "firstFile": {
        "name": "packages/cli/src/commands/history.ts",
        "start": 609,
        "end": 615,
        "startLoc": {
          "line": 609,
          "column": 13,
          "position": 4986
        },
        "endLoc": {
          "line": 615,
          "column": 8,
          "position": 5050
        }
      },
      "secondFile": {
        "name": "packages/cli/src/commands/history.ts",
        "start": 581,
        "end": 588,
        "startLoc": {
          "line": 581,
          "column": 22,
          "position": 4720
        },
        "endLoc": {
          "line": 588,
          "column": 3,
          "position": 4785
        }
      }
    },
    {
      "format": "typescript",
      "lines": 15,
      "fragment": "config: HistoryConfig = {},\n  dryRun: boolean = false\n): Promise<PruneResult> {\n  const mergedConfig = {\n    ...DEFAULT_HISTORY_CONFIG,\n    ...config,\n    gitNotes: {\n      ...DEFAULT_HISTORY_CONFIG.gitNotes,\n      ...config.gitNotes,\n    },\n  };\n\n  const notesRef = mergedConfig.gitNotes.ref;\n\n  const allNotes",
      "tokens": 0,
      "firstFile": {
        "name": "packages/history/src/pruner.ts",
        "start": 98,
        "end": 112,
        "startLoc": {
          "line": 98,
          "column": 3,
          "position": 618
        },
        "endLoc": {
          "line": 112,
          "column": 9,
          "position": 715
        }
      },
      "secondFile": {
        "name": "packages/history/src/pruner.ts",
        "start": 28,
        "end": 41,
        "startLoc": {
          "line": 28,
          "column": 3,
          "position": 162
        },
        "endLoc": {
          "line": 41,
          "column": 11,
          "position": 258
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ".safeParse(data);\n\n    if (result.success) {\n      return { success: true, data: result.data };\n    }\n\n    // Extract error messages with full path\n    const errors = result.error.errors.map(err => {\n      const path = err.path.join('.');\n      return path ? `${path}: ${err.message}` : err.message;\n    });\n\n    return { success: false, errors };\n  };",
      "tokens": 0,
      "firstFile": {
        "name": "packages/core/src/schema-utils.ts",
        "start": 36,
        "end": 49,
        "startLoc": {
          "line": 36,
          "column": 7,
          "position": 111
        },
        "endLoc": {
          "line": 49,
          "column": 2,
          "position": 246
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/result-schema.ts",
        "start": 152,
        "end": 175,
        "startLoc": {
          "line": 152,
          "column": 27,
          "position": 710
        },
        "endLoc": {
          "line": 175,
          "column": 4,
          "position": 846
        }
      }
    },
    {
      "format": "typescript",
      "lines": 14,
      "fragment": ");\n\n  if (result.success) {\n    return { success: true, data: result.data };\n  }\n\n  // Extract error messages with full path\n  const errors = result.error.errors.map(err => {\n    const path = err.path.join('.');\n    return path ? `${path}: ${err.message}` : err.message;\n  });\n\n  return { success: false, errors };\n}",
      "tokens": 0,
      "firstFile": {
        "name": "packages/config/src/schema.ts",
        "start": 307,
        "end": 320,
        "startLoc": {
          "line": 307,
          "column": 7,
          "position": 1742
        },
        "endLoc": {
          "line": 320,
          "column": 2,
          "position": 1871
        }
      },
      "secondFile": {
        "name": "packages/extractors/src/result-schema.ts",
        "start": 152,
        "end": 165,
        "startLoc": {
          "line": 152,
          "column": 5,
          "position": 714
        },
        "endLoc": {
          "line": 165,
          "column": 2,
          "position": 843
        }
      }
    },
    {
      "format": "javascript",
      "lines": 12,
      "fragment": ",\n  reset: '\\x1b[0m',\n};\n\nfunction log(message, color = 'reset') {\n  console.log(`${colors[color]}${message}${colors.reset}`);\n}\n\n// Parse command-line arguments\nconst args = process.argv.slice(2);\n\nif",
      "tokens": 0,
      "firstFile": {
        "name": "tools/bump-version.js",
        "start": 34,
        "end": 45,
        "startLoc": {
          "line": 34,
          "column": 13,
          "position": 143
        },
        "endLoc": {
          "line": 45,
          "column": 3,
          "position": 218
        }
      },
      "secondFile": {
        "name": "tools/pre-publish-check.js",
        "start": 34,
        "end": 44,
        "startLoc": {
          "line": 34,
          "column": 13,
          "position": 159
        },
        "endLoc": {
          "line": 44,
          "column": 4,
          "position": 233
        }
      }
    },
    {
      "format": "javascript",
      "lines": 13,
      "fragment": "'unicorn/prefer-node-protocol': 'error', // Enforce node: prefix for built-ins (security + clarity)\n      'unicorn/prefer-number-properties': 'error', // Prefer Number.isNaN over global isNaN (reliability)\n      'unicorn/throw-new-error': 'error', // Require 'new' when throwing Error\n      'unicorn/prefer-module': 'error', // Prefer ESM over CommonJS\n      'unicorn/prefer-top-level-await': 'error', // Modern async patterns\n      'unicorn/no-array-for-each': 'error', // Prefer for...of over forEach\n      'unicorn/no-useless-undefined': 'error', // Simplify unnecessary undefined\n      'unicorn/prefer-ternary': 'off', // Too aggressive - doesn't account for readability\n      'unicorn/prefer-string-raw': 'error', // Use String.raw for strings with backslashes\n    },\n  },\n  {\n    // Git-aware packages - OS command execution is intentional and necessary",
      "tokens": 0,
      "firstFile": {
        "name": "eslint.config.js",
        "start": 151,
        "end": 163,
        "startLoc": {
          "line": 151,
          "column": 7,
          "position": 993
        },
        "endLoc": {
          "line": 163,
          "column": 74,
          "position": 1085
        }
      },
      "secondFile": {
        "name": "eslint.config.js",
        "start": 68,
        "end": 80,
        "startLoc": {
          "line": 68,
          "column": 7,
          "position": 447
        },
        "endLoc": {
          "line": 80,
          "column": 70,
          "position": 539
        }
      }
    }
  ]
}